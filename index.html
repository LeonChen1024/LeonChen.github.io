<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>LeonChen&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="LeonChen&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="LeonChen&#39;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LeonChen&#39;s Blog">
    

    

    
        <link rel="icon" href="/images/Facicon.png" />
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9191109011370892",
    enable_page_level_ads: true
  });
</script>
    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-111687087-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">LeonChen&#39;s Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">Leon Chen</h2>
            <h3 id="title">Android Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>XiaMen, China</span>
            <a id="follow" target="_blank" href="https://github.com/LeonChen1024">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                19
                <span>posts</span>
            </div>
            <div class="article-info-block">
                12
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/LeonChen1024/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/en" target="_blank" title="english" class=tooltip>
                            <i class="fa fa-english"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
         
    </div>
</aside>

            
            <section id="main">
    <article id="post-6-ZigZag-Conversion/Record-en" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/09/12/6-ZigZag-Conversion/Record-en/" itemprop="url">
            <img src="/2018/09/12/6-ZigZag-Conversion/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/09/12/6-ZigZag-Conversion/Record-en/">LeetCode 6. ZigZag Conversion</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/09/12/6-ZigZag-Conversion/Record-en/">
            <time datetime="2018-09-11T16:00:00.000Z" itemprop="datePublished">2018-09-12</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[English ver]</p>
<h1><span id="6-zigzag-conversion">6. ZigZag Conversion</span></h1><p>The string “PAYPALISHIRING” is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">P   A   H   N</div><div class="line">A P L S I I G</div><div class="line">Y   I   R</div></pre></td></tr></table></figure></p>
<p>And then read line by line: “PAHNAPLSIIGYIR”<br>Write the code that will take a string and make this conversion given a number of rows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string convert(string text, int nRows);</div></pre></td></tr></table></figure></p>
<p>convert(“PAYPALISHIRING”, 3) should return “PAHNAPLSIIGYIR”.</p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/09/12/6-ZigZag-Conversion/Record-en/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[English ver]</p>
<h1><span id="6-zigzag-conversion">6. ZigZag Conversion</span></h1><p>The string “PAYPALISHIRING” is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">P   A   H   N</div><div class="line">A P L S I I G</div><div class="line">Y   I   R</div></pre></td></tr></table></figure></p>
<p>And then read line by line: “PAHNAPLSIIGYIR”<br>Write the code that will take a string and make this conversion given a number of rows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string convert(string text, int nRows);</div></pre></td></tr></table></figure></p>
<p>convert(“PAYPALISHIRING”, 3) should return “PAHNAPLSIIGYIR”.</p>
<hr>
<p>First we need to know the meaning about the zigzag pattern, it means a pattern made up of small corners at variable angles, though constant within the zigzag, tracing a path between two parallel lines; it can be described as both jagged and fairly regular. In the begining i think it’s one line in the middle and then some symmetry verticle line between the middle horizontal line,when the number of rows is 4(use number to represent the index of the String)it would look like that:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1   7    13</div><div class="line">2   8    14</div><div class="line">3 6 9 12 15</div><div class="line">4   10   16</div><div class="line">5   11   17</div></pre></td></tr></table></figure>
<p>but the trueth is not , it should be looked like that:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1     7        13</div><div class="line">2   6 8     12 14</div><div class="line">3 5   9  11    15</div><div class="line">4     10       16</div></pre></td></tr></table></figure></p>
<h3><span id="approach-1-use-string">Approach 1 use String[]:</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line">        String result = <span class="string">""</span>;</div><div class="line">        String[] strings = <span class="keyword">new</span> String[numRows];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            strings[i] = <span class="string">""</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> position = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">int</span> numRowsIndex = numRows-<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> step = <span class="number">1</span>;</div><div class="line">        <span class="comment">//if the numRows is one ,or the s's length is less than numRows ,return s .</span></div><div class="line">        <span class="keyword">if</span> (numRows ==<span class="number">1</span> || s.length()&lt;numRows)&#123;</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//loop the every char in the String, when the position is 0,the step is one ,is the position is numRowsIndex,the step is negative one</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            strings[position] += s.charAt(i);</div><div class="line">            <span class="keyword">if</span> (position ==<span class="number">0</span>)&#123;</div><div class="line">               step = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (position == numRowsIndex )&#123;</div><div class="line">                step = -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            position = position+step;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            result += strings[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/6.%20ZigZag%20Conversion/Images/StringsResult.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This method put every line’s String into the String[i] accordingly,in the last concate it together and then we get the result we want . When the position is in the first row , next time the position should move down,so step = 1.When the position is in the last Row , next time the position should move up , so the step = -1.</p>
<p>Time complexity ： O(n) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<h3><span id="approach-2-stringbuilder">Approach 2 StringBuilder[]:</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</div><div class="line">        StringBuilder[] strings = <span class="keyword">new</span> StringBuilder[numRows];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            strings[i] = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> position = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">int</span> numRowsIndex = numRows-<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> step = <span class="number">1</span>;</div><div class="line">          <span class="comment">//if the numRows is one ,or the s's length is less than numRows ,return s .</span></div><div class="line">        <span class="keyword">if</span> (numRows ==<span class="number">1</span> || s.length()&lt;numRows)&#123;</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        &#125;</div><div class="line">          <span class="comment">//loop the every char in the String, when the position is 0,the step is one ,is the position is numRowsIndex,the step is negative one</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            strings[position].append(s.charAt(i));</div><div class="line">            <span class="keyword">if</span> (position ==<span class="number">0</span>)&#123;</div><div class="line">               step = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (position == numRowsIndex )&#123;</div><div class="line">                step = -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            position = position+step;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            result.append(strings[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result.toString();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/6.%20ZigZag%20Conversion/Images/StringBuilderResult.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This method’s principle is the same as the Approach 1 , it just replace the String into StringBuilder,it has a big optimization.</p>
<p>Time complexity ： O(n) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<h3><span id="approach-3-use-interval">Approach 3 use interval</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line"></div><div class="line">        String result=<span class="string">""</span>;</div><div class="line">        <span class="keyword">if</span>(numRows==<span class="number">1</span>)</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        <span class="keyword">int</span> step1,step2;</div><div class="line">        <span class="keyword">int</span> len=s.length();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numRows;++i)&#123;</div><div class="line">            step1=(numRows-i-<span class="number">1</span>)*<span class="number">2</span>;</div><div class="line">            step2=(i)*<span class="number">2</span>;</div><div class="line">            <span class="keyword">int</span> pos=i;</div><div class="line">            <span class="keyword">if</span>(pos&lt;len)</div><div class="line">                result+=s.charAt(pos);</div><div class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</div><div class="line">                pos+=step1;</div><div class="line">                <span class="keyword">if</span>(pos&gt;=len)</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">if</span>(step1&gt;<span class="number">0</span>)</div><div class="line">                    result+=s.charAt(pos);</div><div class="line">                pos+=step2;</div><div class="line">                <span class="keyword">if</span>(pos&gt;=len)</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">if</span>(step2&gt;<span class="number">0</span>)</div><div class="line">                    result+=s.charAt(pos);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Analysis</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/*n=numRows</div><div class="line">Δ=2n-2    1                           2n-1                         4n-3</div><div class="line">Δ=        2                     2n-2  2n                    4n-4   4n-2</div><div class="line">Δ=        3               2n-3        2n+1              4n-5       .</div><div class="line">Δ=        .           .               .               .            .</div><div class="line">Δ=        .       n+2                 .           3n               .</div><div class="line">Δ=        n-1 n+1                     3n-3    3n-1                 5n-5</div><div class="line">Δ=2n-2    n                           3n-2                         5n-4</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>This method used regular interval to calculate position .</p>
<p>Time complexity ： O(n) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<p>If you have any suggestions to make the logic and implementation more better , or you have some advice on my description. Please let me know!Thanks!</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github  <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>My twitter <a href="https://twitter.com/LChen1024?lang=en" target="_blank" rel="external">https://twitter.com/LChen1024?lang=en</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/09/12/6-ZigZag-Conversion/Record-en/" data-id="cjo6xygd0002j6objxrtkv8bs" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-6-ZigZag-Conversion/Record-cn" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/" itemprop="url">
            <img src="/2018/09/12/6-ZigZag-Conversion/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/09/12/6-ZigZag-Conversion/Record-cn/">LeetCode 6. 锯齿形转换</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/">
            <time datetime="2018-09-11T16:00:00.000Z" itemprop="datePublished">2018-09-12</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[Chinese ver]</p>
<h1><span id="6-zigzag-conversion">6. ZigZag Conversion</span></h1><p>字符串”PAYPALISHIRING”是通过一个如下给定行数的锯齿模式书写的:(你可能想要使用一个固定的字体来更好的显示它)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">P   A   H   N</div><div class="line">A P L S I I G</div><div class="line">Y   I   R</div></pre></td></tr></table></figure>
<p>然后一行一行的读取这个字符串:”PAHNAPLSIIGYIR”<br>编写代码实现获取一个字符串然后根据给出的行数来实现这个锯齿转换:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string convert(string text, int nRows);</div></pre></td></tr></table></figure></p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[Chinese ver]</p>
<h1><span id="6-zigzag-conversion">6. ZigZag Conversion</span></h1><p>字符串”PAYPALISHIRING”是通过一个如下给定行数的锯齿模式书写的:(你可能想要使用一个固定的字体来更好的显示它)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">P   A   H   N</div><div class="line">A P L S I I G</div><div class="line">Y   I   R</div></pre></td></tr></table></figure>
<p>然后一行一行的读取这个字符串:”PAHNAPLSIIGYIR”<br>编写代码实现获取一个字符串然后根据给出的行数来实现这个锯齿转换:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string convert(string text, int nRows);</div></pre></td></tr></table></figure></p>
<p>convert(“PAYPALISHIRING”, 3) 应该返回 “PAHNAPLSIIGYIR”.</p>
<hr>
<p>首先我们来分析下什么是zigzag pattern,zigzag是锯齿或之字形的意思。是以一定的角度相交的两条线依次以其平行线进行重复相交的线路。一开始我以为是中间都是一行然后旁边是锯齿，当为4行的情况如下(以数字作为字符的index):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1   7    13</div><div class="line">2   8    14</div><div class="line">3 6 9 12 15</div><div class="line">4   10   16</div><div class="line">5   11   17</div></pre></td></tr></table></figure>
<p>但是事实并不是这样的，zigzag pattern 4行的情况应该是如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1     7        13</div><div class="line">2   6 8     12 14</div><div class="line">3 5   9  11    15</div><div class="line">4     10       16</div></pre></td></tr></table></figure></p>
<p>字符以这种锯齿形分布。</p>
<h4><span id="方法一-使用string">方法一 使用String[]：</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line">        String result = <span class="string">""</span>;</div><div class="line">        String[] strings = <span class="keyword">new</span> String[numRows];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            strings[i] = <span class="string">""</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> position = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">int</span> numRowsIndex = numRows-<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> step = <span class="number">1</span>;</div><div class="line">        <span class="comment">//if the numRows is one ,or the s's length is less than numRows ,return s .</span></div><div class="line">        <span class="keyword">if</span> (numRows ==<span class="number">1</span> || s.length()&lt;numRows)&#123;</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//loop the every char in the String, when the position is 0,the step is one ,is the position is numRowsIndex,the step is negative one</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            strings[position] += s.charAt(i);</div><div class="line">            <span class="keyword">if</span> (position ==<span class="number">0</span>)&#123;</div><div class="line">               step = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (position == numRowsIndex )&#123;</div><div class="line">                step = -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            position = position+step;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            result += strings[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/6.%20ZigZag%20Conversion/Images/StringsResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法将每一行的字符串存入对应的String[i]中，最后在将String[]按顺序拼接起来就得到了我们要的结果。当目前的位置在第一行的时候，下一个位置应该向下移动，所以step =1 . 当位置在最后一行的时候，下一个位置应该向上移动，所以step =-1.<br>时间复杂度 ： O(n) 。n是字符串的长度<br>空间复杂度 ： O(n) .</p>
<h4><span id="方法二-stringbuilder">方法二 StringBuilder[]：</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</div><div class="line">        StringBuilder[] strings = <span class="keyword">new</span> StringBuilder[numRows];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            strings[i] = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> position = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">int</span> numRowsIndex = numRows-<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> step = <span class="number">1</span>;</div><div class="line">          <span class="comment">//if the numRows is one ,or the s's length is less than numRows ,return s .</span></div><div class="line">        <span class="keyword">if</span> (numRows ==<span class="number">1</span> || s.length()&lt;numRows)&#123;</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        &#125;</div><div class="line">          <span class="comment">//loop the every char in the String, when the position is 0,the step is one ,is the position is numRowsIndex,the step is negative one</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            strings[position].append(s.charAt(i));</div><div class="line">            <span class="keyword">if</span> (position ==<span class="number">0</span>)&#123;</div><div class="line">               step = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (position == numRowsIndex )&#123;</div><div class="line">                step = -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            position = position+step;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            result.append(strings[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result.toString();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/6.%20ZigZag%20Conversion/Images/StringBuilderResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法原理和方法一一样，只是把String 换成 StringBuilder来处理，效率有了很大的提高</p>
<p>时间复杂度 ： O(n) 。n是字符串的长度<br>空间复杂度 ： O(n) .</p>
<h4><span id="方法三-间隔算法">方法三 间隔算法</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line"></div><div class="line">        String result=<span class="string">""</span>;</div><div class="line">        <span class="keyword">if</span>(numRows==<span class="number">1</span>)</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        <span class="keyword">int</span> step1,step2;</div><div class="line">        <span class="keyword">int</span> len=s.length();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numRows;++i)&#123;</div><div class="line">            step1=(numRows-i-<span class="number">1</span>)*<span class="number">2</span>;</div><div class="line">            step2=(i)*<span class="number">2</span>;</div><div class="line">            <span class="keyword">int</span> pos=i;</div><div class="line">            <span class="keyword">if</span>(pos&lt;len)</div><div class="line">                result+=s.charAt(pos);</div><div class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</div><div class="line">                pos+=step1;</div><div class="line">                <span class="keyword">if</span>(pos&gt;=len)</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">if</span>(step1&gt;<span class="number">0</span>)</div><div class="line">                    result+=s.charAt(pos);</div><div class="line">                pos+=step2;</div><div class="line">                <span class="keyword">if</span>(pos&gt;=len)</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">if</span>(step2&gt;<span class="number">0</span>)</div><div class="line">                    result+=s.charAt(pos);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>分析</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/*n=numRows</div><div class="line">Δ=2n-2    1                           2n-1                         4n-3</div><div class="line">Δ=        2                     2n-2  2n                    4n-4   4n-2</div><div class="line">Δ=        3               2n-3        2n+1              4n-5       .</div><div class="line">Δ=        .           .               .               .            .</div><div class="line">Δ=        .       n+2                 .           3n               .</div><div class="line">Δ=        n-1 n+1                     3n-3    3n-1                 5n-5</div><div class="line">Δ=2n-2    n                           3n-2                         5n-4</div><div class="line">*/</div></pre></td></tr></table></figure></p>
<p>这个方法主要是通过间隔的规律来进行计算和排位。</p>
<p>时间复杂度 ： O(n) 。n是字符串长度<br>空间复杂度 ： O(n) .</p>
<p>如果你有更好的办法或者对我这里的描述有其他看法，请联系我。谢谢</p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=false" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/09/12/6-ZigZag-Conversion/Record-cn/" data-id="cjo6xygd2002n6objclyf6ni2" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-5-Longest-Palindromic-Substring/Record-cn" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/" itemprop="url">
            <img src="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/">LeetCode 5.最长的回文字符串</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/">
            <time datetime="2018-08-30T16:00:00.000Z" itemprop="datePublished">2018-08-31</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><h1><span id="5-longest-palindromic-substring">5. Longest Palindromic Substring</span></h1><p>给定一个字符串s,找出其中最长的回文格式的子字符串。你可以假设长度的最大值为1000.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;babad&quot;</div><div class="line"></div><div class="line">Output: &quot;bab&quot;</div></pre></td></tr></table></figure></p>
<p>Note: “aba” is also a valid answer.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;cbbd&quot;</div><div class="line"></div><div class="line">Output: &quot;bb&quot;</div></pre></td></tr></table></figure></p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<h1><span id="5-longest-palindromic-substring">5. Longest Palindromic Substring</span></h1><p>给定一个字符串s,找出其中最长的回文格式的子字符串。你可以假设长度的最大值为1000.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;babad&quot;</div><div class="line"></div><div class="line">Output: &quot;bab&quot;</div></pre></td></tr></table></figure></p>
<p>Note: “aba” is also a valid answer.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;cbbd&quot;</div><div class="line"></div><div class="line">Output: &quot;bb&quot;</div></pre></td></tr></table></figure></p>
<p>一开始以为palindrome是重复的意思，走了很大的弯路，后来才知道指的是回文格式，就是一个顺着读和反过来读都一样的字符串。<br>由此可知他有两种情况，一种是奇数的情况，中间的一个字符独立，其余的字符以中间为轴两两对应。另一种是偶数的情况，所有的字符都以中间为轴两两对应。</p>
<h4><span id="方法一">方法一：</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">       <span class="keyword">private</span> <span class="keyword">int</span> lo, maxLen;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">           <span class="keyword">int</span> len = s.length();</div><div class="line">           <span class="keyword">if</span> (len &lt; <span class="number">2</span>)</div><div class="line">               <span class="keyword">return</span> s;</div><div class="line"></div><div class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</div><div class="line">               extendPalindrome(s, i, i);  <span class="comment">//assume odd length, try to extend Palindrome as possible</span></div><div class="line">               extendPalindrome(s, i, i + <span class="number">1</span>); <span class="comment">//assume even length.</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">return</span> s.substring(lo, lo + maxLen);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">extendPalindrome</span><span class="params">(String s, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">           <span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; k &lt; s.length() &amp;&amp; s.charAt(j) == s.charAt(k)) &#123;</div><div class="line">               j--;</div><div class="line">               k++;</div><div class="line">           &#125;</div><div class="line">           <span class="keyword">if</span> (maxLen &lt; k - j - <span class="number">1</span>) &#123;</div><div class="line">               lo = j + <span class="number">1</span>;</div><div class="line">               maxLen = k - j - <span class="number">1</span>;</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/SuccessResult1.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法分为奇偶两种情况进行计算。首先对每一个字符串里的字符进行两种情况的计算，extendPalindrome方法的原理就是当对应的位置的字符相同时，就将左侧字符向左一位，右侧字符向右一位，然后再重复进行这个比较过程。<br>时间复杂度 ： O(n^2) 。n是字符串的长度<br>空间复杂度 ： O(n) .</p>
<h4><span id="方法二">方法二：</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        String res = <span class="string">""</span>;</div><div class="line">        <span class="keyword">int</span> currLength = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            <span class="keyword">if</span>(isPalindrome(s,i-currLength-<span class="number">1</span>,i))&#123;</div><div class="line">                res = s.substring(i-currLength-<span class="number">1</span>,i+<span class="number">1</span>);</div><div class="line">                currLength = currLength+<span class="number">2</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(isPalindrome(s,i-currLength,i))&#123;</div><div class="line">                res = s.substring(i-currLength,i+<span class="number">1</span>);</div><div class="line">                currLength = currLength+<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(String s, <span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(begin&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">while</span>(begin&lt;end)&#123;</div><div class="line">        	<span class="keyword">if</span>(s.charAt(begin++)!=s.charAt(end--)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/SuccessResult2.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法主要是每当指针向右移时，我们都以这个位置的字符为结尾看是否能有新的长度为length(current length +1 或者 current length +2)的回文字符串。</p>
<p>时间复杂度 ： O(n^2) 。n是字符串长度。<br>空间复杂度 ： O(n) .</p>
<h4><span id="方法三-manacher算法">方法三 Manacher算法</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">      <span class="keyword">char</span>[] str = changeString(s);</div><div class="line">		  String result = manacher(str,s);</div><div class="line"></div><div class="line">		  <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">	 * 返回例如 #a#c#b#c#a#a#c#b#c#d#形式的字符串数组</span></div><div class="line"><span class="comment">	 *</span></div><div class="line"><span class="comment">	 * <span class="doctag">@param</span> s</span></div><div class="line"><span class="comment">	 * <span class="doctag">@return</span></span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">char</span>[] changeString(String s)</div><div class="line">	&#123;</div><div class="line">	    <span class="keyword">char</span>[] str = <span class="keyword">new</span> <span class="keyword">char</span>[s.length() * <span class="number">2</span> + <span class="number">1</span>];</div><div class="line"></div><div class="line">	    <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">for</span> (; i &lt; s.length(); i++)</div><div class="line">	    &#123;</div><div class="line">	        str[<span class="number">2</span> * i] = <span class="string">'#'</span>;</div><div class="line">	        str[<span class="number">2</span> * i + <span class="number">1</span>] = s.charAt(i);</div><div class="line">	    &#125;</div><div class="line">	    str[<span class="number">2</span> * i] = <span class="string">'#'</span>;</div><div class="line"></div><div class="line">	    <span class="keyword">return</span> str;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">	 * manacher 算法实现找到回文字符串最长的一个</span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">manacher</span><span class="params">(<span class="keyword">char</span>[] s,String olds)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		  String result = <span class="string">""</span>;</div><div class="line">	    <span class="keyword">int</span> rad[] = <span class="keyword">new</span> <span class="keyword">int</span>[s.length];</div><div class="line">	    <span class="keyword">int</span> start = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">int</span> end = <span class="number">0</span>;</div><div class="line">	    <span class="comment">//i index,j 回文半径，k</span></div><div class="line">	    <span class="keyword">int</span> i = <span class="number">1</span>, j = <span class="number">0</span>, k;</div><div class="line"></div><div class="line">	    <span class="comment">// 记录最长的回文串的长度</span></div><div class="line">	    <span class="keyword">int</span> maxLen = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">while</span> (i &lt; s.length)</div><div class="line">	    &#123;</div><div class="line">	        <span class="comment">// 扫描得出rad值</span></div><div class="line">	        <span class="keyword">while</span> (i - j - <span class="number">1</span> &gt; -<span class="number">1</span> &amp;&amp; i + j + <span class="number">1</span> &lt; s.length</div><div class="line">	                &amp;&amp; s[i - j - <span class="number">1</span>] == s[i + j + <span class="number">1</span>]) &#123;</div><div class="line">	        	  j++;</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        <span class="keyword">if</span> (maxLen &lt; j ) &#123;</div><div class="line">				        maxLen =j;</div><div class="line">				        start = i - j  ;</div><div class="line">				        end =i + j ;</div><div class="line"></div><div class="line">			       &#125;</div><div class="line">	        rad[i] = j;</div><div class="line">	        maxLen = maxLen &gt; j ? maxLen : j;</div><div class="line"></div><div class="line">	        k = <span class="number">1</span>;</div><div class="line">          <span class="comment">//当回文中包含子回文，看子回文是否超出父回文边界。 分三种情况。</span></div><div class="line">	        <span class="keyword">while</span> (k &lt;= rad[i] &amp;&amp; rad[i - k] != rad[i] - k)</div><div class="line">	        &#123;</div><div class="line">	            rad[i + k] = Math.min(rad[i - k], rad[i] - k);</div><div class="line">	            k++;</div><div class="line">	        &#125;</div><div class="line">	        i = i + k;</div><div class="line">	        j = Math.max(j - k, <span class="number">0</span>);</div><div class="line">	    &#125;</div><div class="line"></div><div class="line">	    result = olds.substring(start/<span class="number">2</span>,end/<span class="number">2</span>);</div><div class="line">	    <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>分析</strong><br>在这个问题中，回文的情况一共有两种，一种是奇数回文，一种是偶数回文，为了将他们合并成一种情况，我们可以在首尾和每两个字符中间加上一个特殊字符，如‘#’，形如”#a#b#b#c#a#”.这样我们就将所有的回文情况合并成奇数回文的情况。</p>
<p>在字符串s中，我们用rad[i]表示第i个字符的回文半径，可以得到s[i-rad[i],i-1] = s[i+1,i+rad[i]]，只要求出了所有的rad，就求出了所有奇数长度的回文子串。</p>
<p>当我们得到了rad[1..i-1]的值，并通过比较对称字符得到当前字符i的rad值至少为j，求出了rad[i]。现在我们设一个指针k，从1循环到rad[i]，以此来求出[i+1,i+rad[i]]的rad值。</p>
<p>根据定义，黑色的部分是一个回文子串，两段红色的区间全等。<br>因为之前已经求出了rad[i-k]，所以直接用它.有3种情况：<br>（1）rad[i]-k &lt; rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation1.jpg?raw=true" alt="Situation1.jpg"></p>
<p>如图,rad[i-k]的范围为墨绿色。因为黑色的部分是回文的，且墨绿色的部分超过了黑色的部分，所以rad[i+k]至少为rad[i]-k，即橙色的部分。有没有可能rad[i+k]的值大于rad[i]-k呢？这是不可能发生的，根据回文的特性我们知道，如果橙色部分以外也是回文，那么黑色的回文部分就可以向外拓展。与假设冲突。因此rad[i+k] = rad[i]-k。</p>
<p>（2）rad[i]-k &gt; rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation2.jpg?raw=true" alt="Situation2.jpg"></p>
<p>如图,rad[i-k]的范围为墨绿色。因为黑色的部分是回文的，且墨绿色的部分在黑色的部分里面，根据回文特性，很容易得出：rad[i+k] = rad[i-k]。</p>
<p>根据上面两种情况，可以得出结论：当rad[i]-k != rad[i-k]的时候，rad[i+k] = min(rad[i]-k,rad[i-k])。</p>
<p>（3）rad[i]-k = rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation3.jpg?raw=true" alt="Situation3.jpg"><br>如图，通过和第一种情况对比之后会发现，因为墨绿色的部分没有超出黑色的部分，所以即使橙色的部分全等，也无法像第一种情况一样引出矛盾，因此橙色的部分是有可能全等的。但是，根据已知的信息，我们不知道橙色的部分是多长，因此就把i指针移到i+k的位置，j=rad[i-k](因为它的rad值至少为rad[i-k])，是否可以向外拓展等下个循环再做。</p>
<p>时间复杂度 ： O(n) 。看起来程序里用到了循环嵌套，但是实际上他只对没有计量过的i进行计量。<br>空间复杂度 ： O(n) .</p>
<p>如果你有更好的办法或者对我这里的描述有其他看法，请联系我。谢谢</p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=false" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/" data-id="cjo6xyge000496objoxk3zmoh" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-5-Longest-Palindromic-Substring/Record-en" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/" itemprop="url">
            <img src="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/">LeetCode 5.Longest Palindromic Substring</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/">
            <time datetime="2018-08-30T16:00:00.000Z" itemprop="datePublished">2018-08-31</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><h1><span id="5-longest-palindromic-substring">5. Longest Palindromic Substring</span></h1><p>Given a string s, find the longest palindromic substring in s. You may assume that the maximum length of s is 1000.<br>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;babad&quot;</div><div class="line"></div><div class="line">Output: &quot;bab&quot;</div></pre></td></tr></table></figure></p>
<p>Note: “aba” is also a valid answer.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;cbbd&quot;</div><div class="line"></div><div class="line">Output: &quot;bb&quot;</div></pre></td></tr></table></figure></p>
<hr>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<h1><span id="5-longest-palindromic-substring">5. Longest Palindromic Substring</span></h1><p>Given a string s, find the longest palindromic substring in s. You may assume that the maximum length of s is 1000.<br>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;babad&quot;</div><div class="line"></div><div class="line">Output: &quot;bab&quot;</div></pre></td></tr></table></figure></p>
<p>Note: “aba” is also a valid answer.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;cbbd&quot;</div><div class="line"></div><div class="line">Output: &quot;bb&quot;</div></pre></td></tr></table></figure></p>
<hr>
<p>I have misunderstood the meaning of the word palindrome , i thought it was the meaning of repeat,finally i know that it was the meaning of a string which is the same when you look from left to right and from right to left.<br>According to that , we know it has two situation,one the length is odd , another is even .</p>
<h3><span id="approach-1">Approach 1 :</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">       <span class="keyword">private</span> <span class="keyword">int</span> lo, maxLen;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">           <span class="keyword">int</span> len = s.length();</div><div class="line">           <span class="keyword">if</span> (len &lt; <span class="number">2</span>)</div><div class="line">               <span class="keyword">return</span> s;</div><div class="line"></div><div class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</div><div class="line">               extendPalindrome(s, i, i);  <span class="comment">//assume odd length, try to extend Palindrome as possible</span></div><div class="line">               extendPalindrome(s, i, i + <span class="number">1</span>); <span class="comment">//assume even length.</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">return</span> s.substring(lo, lo + maxLen);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">extendPalindrome</span><span class="params">(String s, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">           <span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; k &lt; s.length() &amp;&amp; s.charAt(j) == s.charAt(k)) &#123;</div><div class="line">               j--;</div><div class="line">               k++;</div><div class="line">           &#125;</div><div class="line">           <span class="keyword">if</span> (maxLen &lt; k - j - <span class="number">1</span>) &#123;</div><div class="line">               lo = j + <span class="number">1</span>;</div><div class="line">               maxLen = k - j - <span class="number">1</span>;</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/SuccessResult1.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This method divided the problem into two situation.First we loop the every char of the String,each char call the extendPalindrome method .The extendPalindrome method is used to find the char of corresponding position is the same or not . if so we move the index of the left char to left one ,and the right char to right one,and then repeat this procedure.</p>
<p>Time complexity ： O(n^2) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<h3><span id="approach-2">Approach 2 :</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        String res = <span class="string">""</span>;</div><div class="line">        <span class="keyword">int</span> currLength = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            <span class="keyword">if</span>(isPalindrome(s,i-currLength-<span class="number">1</span>,i))&#123;</div><div class="line">                res = s.substring(i-currLength-<span class="number">1</span>,i+<span class="number">1</span>);</div><div class="line">                currLength = currLength+<span class="number">2</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(isPalindrome(s,i-currLength,i))&#123;</div><div class="line">                res = s.substring(i-currLength,i+<span class="number">1</span>);</div><div class="line">                currLength = currLength+<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(String s, <span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(begin&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">while</span>(begin&lt;end)&#123;</div><div class="line">        	<span class="keyword">if</span>(s.charAt(begin++)!=s.charAt(end--)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/SuccessResult2.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This method is when then index move to right , we used the char of this index as the end of the substring which length is current length +1 or current length +2, and see if is the Palindrome string .</p>
<p>Time complexity ： O(n^2) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<h3><span id="approach-3-manachers-algorithm">Approach 3 (Manacher’s Algorithm)</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">      <span class="keyword">char</span>[] str = changeString(s);</div><div class="line">		  String result = manacher(str,s);</div><div class="line"></div><div class="line">		  <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">	 * 返回例如 #a#c#b#c#a#a#c#b#c#d#形式的字符串数组</span></div><div class="line"><span class="comment">	 *</span></div><div class="line"><span class="comment">	 * <span class="doctag">@param</span> s</span></div><div class="line"><span class="comment">	 * <span class="doctag">@return</span></span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">char</span>[] changeString(String s)</div><div class="line">	&#123;</div><div class="line">	    <span class="keyword">char</span>[] str = <span class="keyword">new</span> <span class="keyword">char</span>[s.length() * <span class="number">2</span> + <span class="number">1</span>];</div><div class="line"></div><div class="line">	    <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">for</span> (; i &lt; s.length(); i++)</div><div class="line">	    &#123;</div><div class="line">	        str[<span class="number">2</span> * i] = <span class="string">'#'</span>;</div><div class="line">	        str[<span class="number">2</span> * i + <span class="number">1</span>] = s.charAt(i);</div><div class="line">	    &#125;</div><div class="line">	    str[<span class="number">2</span> * i] = <span class="string">'#'</span>;</div><div class="line"></div><div class="line">	    <span class="keyword">return</span> str;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">	 * manacher 算法实现找到回文字符串最长的一个</span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">manacher</span><span class="params">(<span class="keyword">char</span>[] s,String olds)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		  String result = <span class="string">""</span>;</div><div class="line">	    <span class="keyword">int</span> rad[] = <span class="keyword">new</span> <span class="keyword">int</span>[s.length];</div><div class="line">	    <span class="keyword">int</span> start = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">int</span> end = <span class="number">0</span>;</div><div class="line">	    <span class="comment">//i index,j 回文半径，k</span></div><div class="line">	    <span class="keyword">int</span> i = <span class="number">1</span>, j = <span class="number">0</span>, k;</div><div class="line"></div><div class="line">	    <span class="comment">// 记录最长的回文串的长度</span></div><div class="line">	    <span class="keyword">int</span> maxLen = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">while</span> (i &lt; s.length)</div><div class="line">	    &#123;</div><div class="line">	        <span class="comment">// 扫描得出rad值</span></div><div class="line">	        <span class="keyword">while</span> (i - j - <span class="number">1</span> &gt; -<span class="number">1</span> &amp;&amp; i + j + <span class="number">1</span> &lt; s.length</div><div class="line">	                &amp;&amp; s[i - j - <span class="number">1</span>] == s[i + j + <span class="number">1</span>]) &#123;</div><div class="line">	        	  j++;</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        <span class="keyword">if</span> (maxLen &lt; j ) &#123;</div><div class="line">				        maxLen =j;</div><div class="line">				        start = i - j  ;</div><div class="line">				        end =i + j ;</div><div class="line"></div><div class="line">			       &#125;</div><div class="line">	        rad[i] = j;</div><div class="line">	        maxLen = maxLen &gt; j ? maxLen : j;</div><div class="line"></div><div class="line">	        k = <span class="number">1</span>;</div><div class="line">          <span class="comment">//当回文中包含子回文，看子回文是否超出父回文边界。 分三种情况。</span></div><div class="line">	        <span class="keyword">while</span> (k &lt;= rad[i] &amp;&amp; rad[i - k] != rad[i] - k)</div><div class="line">	        &#123;</div><div class="line">	            rad[i + k] = Math.min(rad[i - k], rad[i] - k);</div><div class="line">	            k++;</div><div class="line">	        &#125;</div><div class="line">	        i = i + k;</div><div class="line">	        j = Math.max(j - k, <span class="number">0</span>);</div><div class="line">	    &#125;</div><div class="line"></div><div class="line">	    result = olds.substring(start/<span class="number">2</span>,end/<span class="number">2</span>);</div><div class="line">	    <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Analysis</strong></p>
<p>In this question,the Palindrome has two situation, one is even Palindrome , another is odd Palindrome. In order to combine them into one situation, we can add a special char like ‘#’ between every two char of the string which is neaby ,and the begining and the ending of the string . like  “#a#b#b#c#a#”. Now we have combine the two situation into together.</p>
<p>In the String s ,we use rad[i] to represent the Palindrome radius of index i , we can get s[i-rad[i],i-1] = s[i+1,i+rad[i]] easily , once we get the all the rad of the String , we get the all the Palindrome which is even length .</p>
<p>when we get the value of rad[1..i-1],and get the rad value of the char i is at least j through compare char which is symmetry.Now we suppose that we have a index k , it start from 1 to rad[i],we can use it to get the rad valule of the [i+1,i+rad[i]].</p>
<p>According to the acept of the Palindrome , we know the part of the black is a Palindrome, two parts of the red have the same length.<br>Because we have calculate the value of rad[i-k],so we can use it . There are three situations:<br>(1)rad[i]-k &lt; rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation1.jpg?raw=true" alt="Situation1.jpg"></p>
<p>As the picture , rad[i-k]’s range is blackish green line . Because of the black line is Palindrome,and a part of blackish green line is out of the black line,so rad[i+k] is at least rad[i]-k (the orange line).Is there have any possible that rad[i+k] is larger than rad[i]-k? it’s impossible ,according to the acept of the Palindrome ,we know that if the part out of the orange line is the Palindrome , than the black line can expand outward. Is different from the suppose we have done . so rad[i+k] = rad[i]-k。</p>
<p>（2）rad[i]-k &gt; rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation2.jpg?raw=true" alt="Situation2.jpg"></p>
<p>As the picture , rad[i-k]’s range is the blackish green line . Because the black line is Palindrome and the blackish green line is in the black line , according to the acept of the Palindrome ,we can get that rad[i+k] = rad[i-k] easily.</p>
<p>According to the situation we have talk , we can get that when rad[i]-k != rad[i-k] ,rad[i+k] = min(rad[i]-k,rad[i-k])。</p>
<p>（3）rad[i]-k = rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation3.jpg?raw=true" alt="Situation3.jpg"></p>
<p>As the picture , after compare to the first situation , we can find that because the blackish line is in the black line , so even the orange line is equals , it can’t cause a contradiction like situation 1 ,so the orange line can be equals . But , according to the message we know , we have not idear how long is the orange line , so we put the i to the i+k position , j=rad[i-k](because it’s rad is at least rad[i-k]), wait to next loop to calculate it can expand out or not .</p>
<p>Time complexity  ： O(n) 。it looks like the program is use the nesting loop ,but actualy it only calculate the i which haven’t calculated.<br>Space complexity ： O(n) .</p>
<p>If you have any suggestions to make the logic and implementation more better , or you have some advice on my description. Please let me know!Thanks!</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github  <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>My twitter <a href="https://twitter.com/LChen1024?lang=en" target="_blank" rel="external">https://twitter.com/LChen1024?lang=en</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/31/5-Longest-Palindromic-Substring/Record-en/" data-id="cjo6xygdz00466objdozpvweq" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-4-Median-of-Two-Sorted-Arrays/Record-en" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/" itemprop="url">
            <img src="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/">LeetCode 4. Median of Two Sorted Arrays [English ver]</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/">
            <time datetime="2018-08-14T16:00:00.000Z" itemprop="datePublished">2018-08-15</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[English ver]</p>
<h1><span id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays</span></h1><p>There are two sorted arrays nums1 and nums2 of size m and n respectively.</p>
<p>Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Example 1:</div><div class="line">nums1 = [1, 3]</div><div class="line">nums2 = [2]</div><div class="line"></div><div class="line">The median is 2.0</div></pre></td></tr></table></figure>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[English ver]</p>
<h1><span id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays</span></h1><p>There are two sorted arrays nums1 and nums2 of size m and n respectively.</p>
<p>Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Example 1:</div><div class="line">nums1 = [1, 3]</div><div class="line">nums2 = [2]</div><div class="line"></div><div class="line">The median is 2.0</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Example 2:</div><div class="line">nums1 = [1, 2]</div><div class="line">nums2 = [3, 4]</div><div class="line"></div><div class="line">The median is (2 + 3)/2 = 2.5</div></pre></td></tr></table></figure>
<h2><span id="approach-1">Approach 1:</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">        <span class="comment">//how many number we need</span></div><div class="line">        <span class="keyword">int</span> needNum = <span class="number">0</span>;</div><div class="line">        <span class="comment">//the index of the number we need</span></div><div class="line">        <span class="keyword">int</span> needIndex = <span class="number">0</span>;</div><div class="line">        <span class="comment">//the median value</span></div><div class="line">        <span class="keyword">double</span> median = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> big = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> stand = <span class="number">0</span>;</div><div class="line">        <span class="comment">//the total array</span></div><div class="line">        <span class="keyword">int</span>[] insertnum ;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> m = nums1.length;</div><div class="line">        <span class="keyword">int</span> n = nums2.length;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">0</span>)&#123;</div><div class="line">            needNum = <span class="number">2</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>-<span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            needNum=<span class="number">1</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        insertnum = <span class="keyword">new</span> <span class="keyword">int</span>[m+n];</div><div class="line">        <span class="comment">//nums1 index</span></div><div class="line">        <span class="keyword">int</span> j =<span class="number">0</span>;</div><div class="line">        <span class="comment">//nums2 index</span></div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;m+n;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(k==n)&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j==m)&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[j]&gt;nums2[k])&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(needNum == <span class="number">1</span>)&#123;</div><div class="line">            median = Double.valueOf(insertnum[needIndex]);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            median = Double.valueOf(insertnum[needIndex]+insertnum[needIndex+<span class="number">1</span>]) /<span class="number">2.0</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> median;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>by the way ,this method often failed , maybe is the complexity is too big.</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/1SuccessResult.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong><br>This method is easy,first we figure out how to get the median value and how many number we need for calculate median value when the sum of the two arrays size is odd-lengthed or even-lengthed. And then we put the two arrays together sorted from small to large , and then use the method we got to calculate the median value.</p>
<p>Time complexity: O(m+n)<br>Space complexity:O(m+n)</p>
<p>we can have a optmization of this approach,like that</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> needNum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> needIndex = <span class="number">0</span>;</div><div class="line">        <span class="keyword">double</span> median = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> big = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> stand = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span>[] insertnum ;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> m = nums1.length;</div><div class="line">        <span class="keyword">int</span> n = nums2.length;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">0</span>)&#123;</div><div class="line">            needNum = <span class="number">2</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>-<span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            needNum=<span class="number">1</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        insertnum = <span class="keyword">new</span> <span class="keyword">int</span>[(m+n)/<span class="number">2</span>+<span class="number">1</span>];</div><div class="line">        <span class="keyword">int</span> j =<span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;m+n;i++)&#123;</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(k==n)&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j==m)&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[j]&gt;nums2[k])&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">             <span class="keyword">if</span> (i &gt;= needIndex )&#123;</div><div class="line">                <span class="keyword">if</span> (needNum == <span class="number">1</span>)&#123;</div><div class="line">                    median = Double.valueOf(insertnum[needIndex]);</div><div class="line">                    <span class="keyword">return</span> median;</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                     <span class="keyword">if</span> (i == needIndex+<span class="number">1</span>)&#123;</div><div class="line">                         median = Double.valueOf(insertnum[needIndex]+insertnum[needIndex+<span class="number">1</span>]) /<span class="number">2.0</span>;</div><div class="line">                         <span class="keyword">return</span> median;</div><div class="line">                     &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    <span class="keyword">return</span> median;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Analysis</strong></p>
<p>The optmization is we get the index of the median value ,  when we sorted the array to the index , we can calculate the median value and we don’t need to sorted all the number.</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/1OptimizeSuccessResult.png?raw=true" alt="efficiency"></p>
<h2><span id="approach-2">Approach 2</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">           <span class="keyword">int</span> N1 = nums1.length;</div><div class="line">           <span class="keyword">int</span> N2 = nums2.length;</div><div class="line">           <span class="keyword">if</span> (N1 &lt; N2)</div><div class="line">               <span class="keyword">return</span> findMedianSortedArrays(nums2, nums1);    <span class="comment">// Make sure A2 is the shorter one.</span></div><div class="line"></div><div class="line">           <span class="keyword">if</span> (N2 == <span class="number">0</span>)</div><div class="line">               <span class="keyword">return</span> ((<span class="keyword">double</span>) nums1[(N1 - <span class="number">1</span>) / <span class="number">2</span>] + (<span class="keyword">double</span>) nums1[N1 / <span class="number">2</span>]) / <span class="number">2</span>;  <span class="comment">// If A2 is empty</span></div><div class="line"></div><div class="line">           <span class="keyword">int</span> lo = <span class="number">0</span>, hi = N2 * <span class="number">2</span>;</div><div class="line">           <span class="keyword">while</span> (lo &lt;= hi) &#123;</div><div class="line">               <span class="keyword">int</span> mid2 = (lo + hi) / <span class="number">2</span>;   <span class="comment">// Try Cut 2</span></div><div class="line">               <span class="keyword">int</span> mid1 = N1 + N2 - mid2;  <span class="comment">// Calculate Cut 1 accordingly</span></div><div class="line"></div><div class="line">               <span class="keyword">double</span> L1 = (mid1 == <span class="number">0</span>) ? Integer.MIN_VALUE : nums1[(mid1 - <span class="number">1</span>) / <span class="number">2</span>];    <span class="comment">// Get L1, R1, L2, R2 respectively</span></div><div class="line">               <span class="keyword">double</span> L2 = (mid2 == <span class="number">0</span>) ? Integer.MIN_VALUE : nums2[(mid2 - <span class="number">1</span>) / <span class="number">2</span>];</div><div class="line">               <span class="keyword">double</span> R1 = (mid1 == N1 * <span class="number">2</span>) ? Integer.MAX_VALUE : nums1[(mid1) / <span class="number">2</span>];</div><div class="line">               <span class="keyword">double</span> R2 = (mid2 == N2 * <span class="number">2</span>) ? Integer.MAX_VALUE : nums2[(mid2) / <span class="number">2</span>];</div><div class="line"></div><div class="line">               <span class="keyword">if</span> (L1 &gt; R2)</div><div class="line">                   lo = mid2 + <span class="number">1</span>;        <span class="comment">// A1's lower half is too big; need to move C1 left (C2 right)</span></div><div class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (L2 &gt; R1)</div><div class="line">                   hi = mid2 - <span class="number">1</span>;    <span class="comment">// A2's lower half too big; need to move C2 left.</span></div><div class="line">               <span class="keyword">else</span></div><div class="line">                   <span class="keyword">return</span> ((L1 &gt; L2 ? L1 : L2) + (R1 &gt; R2 ? R2 : R1)) / <span class="number">2</span>;    <span class="comment">// Otherwise, that's the right cut.</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/2SeccessResult.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong></p>
<p>this method is a little hard to understand,many implementations consider odd-lengthed and even-lengthed arrays as two different cases and treat them separately. In fact , this is a little twist.<br>First, we can define ‘MEDIAN’ i:</p>
<p>“if we cut the sorted array to two halves of equal length, then median is the average of the max number of the small half and min of larger half , is the number near to the cut .</p>
<p>For example, for [ 1 2 ], we make the cut between 1 and 2:<br>[1 | 2]<br>the median = (1+2)/2.0 = 1.5 .<br>The same to the two arrays , we only need to make sure numbers in the right side of the cut of the two arrays bigger than the left side of the cut ,and the size of the left is equal to the size of the right .<br>I’ll use ‘|’ to represent a cut, and (number | number) to represent a cut made through a number in this article.</p>
<p>for example , [1 2 3],the cut is like [1 (2|2) 3].the median = (2+2)/2.0 = 2.</p>
<p>now we use ‘L’ to represent the number in the left of the cut ,’R’ to represent the number in the right.</p>
<p>we can found that</p>
<p>N        Index of L / R<br>1               0 / 0<br>2               0 / 1<br>3               1 / 1<br>4               1 / 2<br>5               2 / 2<br>6               2 / 3<br>7               3 / 3<br>8               3 / 4</p>
<p>It is not hard to conclude that index of L = (N-1)/2, and R = N/2. the median = (L + R)/2 = (A[(N-1)/2] + A[N/2])/2</p>
<p>To get ready for the two array situation,we add a few empty number (represented as ‘#’) in between numbers. and use ‘positions’ to represented the position of that .</p>
<p>[1 2] -&gt; [# 1 # 2 #] (N=2)<br>position  0 1 2 3 4  (N_Position = 5)</p>
<p>[3 4] -&gt; [# 3 # 4 #] (N=2)<br>position  0 1 2 3 4  (N_Position = 5)</p>
<p>there are always 2*N+1 ‘positions’ of which array length is N. Therefore, the middle cut should be made on the Nth position (0-based). index(L) = (CutPosition-1)/2, index(R) = (CutPosition)/2.</p>
<p>notice that, when we cut the two arrays there are 2N1+2N2+2 positions,so,each side of the cut should be N1+N2 positions, the two position lefted is the cut . so when A2’s cut is at C2 = K , than A1’s cut should be C1 = N1 + N2 -K,for example ,C2 = 2, 那么 C1 = 2 + 2 - C2 = 2.</p>
<p>[# 1 | 2 #]<br>[# 3 | 4 #]</p>
<p>now we have two L and two R.</p>
<p>L1 = A1[(C1-1)/2]; R1 = A1[C1/2];<br>L2 = A2[(C2-1)/2]; R2 = A2[C2/2];</p>
<p>L1 = A1[(2-1)/2] = A1[0] = 1; R1 = A1[2/2] = A1[1] = 2;<br>L2 = A2[(2-1)/2] = A2[0] = 3; R2 = A1[2/2] = A1[1] = 4;</p>
<p>How can we figure out this cut is the cut we want ?<br>the numbers in left side must be smaller than the numbers in right side .<br>Because A1 and A2 is sorted , L1 &lt;= R1  &amp;&amp; L2 &lt;= R2.so we only need to confirm that L1 &lt;= R2 and L2 &lt;= R1.</p>
<p>Now we can use binary search to find out the result.</p>
<p>If L1 &gt; R1, it means there are too many large numbers on the left half of A1, then we must move C1 to the left at the same time move C2 to the right;<br>If L2 &gt; R1, then there are too many large numbers on the left half of A2, and we must move C2 to the left , and move C1 to the right .<br>Otherwise, make it opposite.</p>
<p>After we find the cut, the medium can be computed as (max(L1, L2) + min(R1, R2)) / 2;</p>
<ol>
<li>since C1 and C2 can be mutually determined from each other, we might as well select the shorter array (say A2) and only move C2 around, and calculate C1 accordingly. That way we can achieve a run-time complexity of O(log(min(N1, N2)))</li>
<li>The only edge case is when a cut falls on the 0th(first) or the 2Nth(last) position. For instance, if C2 = 2N2, then R2 = A2[2*N2/2] = A2[N2], which exceeds the boundary of the array. To solve this problem, we can imagine that both A1 and A2 actually have two extra elements, INT_MAX at A[-1] and INT_MAX at A[N].</li>
</ol>
<p>Time complexity ： O(log(min(m,n))) 。m,n is the length of the two arrays.<br>space complexity ： O(1) .</p>
<h2><span id="approach-3">Approach 3：</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> B[])</span> </span>&#123;</div><div class="line">       <span class="keyword">int</span> n = A.length;</div><div class="line">       <span class="keyword">int</span> m = B.length;</div><div class="line">       <span class="comment">// the following call is to make sure len(A) &lt;= len(B).</span></div><div class="line">       <span class="comment">// yes, it calls itself, but at most once, shouldn't be</span></div><div class="line">       <span class="comment">// consider a recursive solution</span></div><div class="line">       <span class="keyword">if</span> (n &gt; m)</div><div class="line">           <span class="keyword">return</span> findMedianSortedArrays(B, A);</div><div class="line"></div><div class="line">       <span class="comment">// now, do binary search</span></div><div class="line">       <span class="keyword">int</span> k = (n + m - <span class="number">1</span>) / <span class="number">2</span>;</div><div class="line">       <span class="keyword">int</span> l = <span class="number">0</span>, r = Math.min(k, n); <span class="comment">// r is n, NOT n-1, this is important!!</span></div><div class="line">       <span class="keyword">while</span> (l &lt; r) &#123;</div><div class="line">           <span class="keyword">int</span> midA = (l + r) / <span class="number">2</span>;</div><div class="line">           <span class="keyword">int</span> midB = k - midA;</div><div class="line">           <span class="keyword">if</span> (A[midA] &lt; B[midB])</div><div class="line">               l = midA + <span class="number">1</span>;</div><div class="line">           <span class="keyword">else</span></div><div class="line">               r = midA;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="comment">// after binary search, we almost get the median because it must be between</span></div><div class="line">       <span class="comment">// these 4 numbers: A[l-1], A[l], B[k-l], and B[k-l+1]</span></div><div class="line"></div><div class="line">       <span class="comment">// if (n+m) is odd, the median is the larger one between A[l-1] and B[k-l].</span></div><div class="line">       <span class="comment">// and there are some corner cases we need to take care of.</span></div><div class="line">       <span class="keyword">int</span> a = Math.max(l &gt; <span class="number">0</span> ? A[l - <span class="number">1</span>] : Integer.MIN_VALUE, k - l &gt;= <span class="number">0</span> ? B[k - l] : Integer.MIN_VALUE);</div><div class="line">       <span class="keyword">if</span> (((n + m) &amp; <span class="number">1</span>) == <span class="number">1</span>)</div><div class="line">           <span class="keyword">return</span> (<span class="keyword">double</span>) a;</div><div class="line"></div><div class="line">       <span class="comment">// if (n+m) is even, the median can be calculated by</span></div><div class="line">       <span class="comment">//      median = (max(A[l-1], B[k-l]) + min(A[l], B[k-l+1]) / 2.0</span></div><div class="line">       <span class="comment">// also, there are some corner cases to take care of.</span></div><div class="line">       <span class="keyword">int</span> b = Math.min(l &lt; n ? A[l] : Integer.MAX_VALUE, k - l + <span class="number">1</span> &lt; m ? B[k - l + <span class="number">1</span>] : Integer.MAX_VALUE);</div><div class="line">       <span class="keyword">return</span> (a + b) / <span class="number">2.0</span>;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/3SuccessResult.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong><br>this method’s principle is same as the Approach 2.</p>
<p>Time complexity ： O(log(min(m,n))) 。m,n is the length of the two arrays.<br>space complexity ： O(1) .</p>
<h2><span id="approach-4">Approach 4:</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</div><div class="line">              <span class="keyword">int</span> m = A.length, n = B.length;</div><div class="line">              <span class="keyword">int</span> l = (m + n + <span class="number">1</span>) / <span class="number">2</span>;<span class="comment">//position of l element (not the index)</span></div><div class="line">              <span class="keyword">int</span> r = (m + n + <span class="number">2</span>) / <span class="number">2</span>;<span class="comment">//position of r element (not the index)</span></div><div class="line">              <span class="keyword">return</span> (getkth(A, <span class="number">0</span>, B, <span class="number">0</span>, l) + getkth(A, <span class="number">0</span>, B, <span class="number">0</span>, r)) / <span class="number">2.0</span>;</div><div class="line">          &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getkth</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> aStart, <span class="keyword">int</span>[] B, <span class="keyword">int</span> bStart, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">          <span class="comment">//when the start position is bigger than A.length -1 ,means the median doesn't in the A.</span></div><div class="line">          <span class="keyword">if</span> (aStart &gt; A.length - <span class="number">1</span>) <span class="keyword">return</span> B[bStart + k - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (bStart &gt; B.length - <span class="number">1</span>) <span class="keyword">return</span> A[aStart + k - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (k == <span class="number">1</span>) <span class="keyword">return</span> Math.min(A[aStart], B[bStart]);</div><div class="line"></div><div class="line">          <span class="keyword">int</span> aMid = Integer.MAX_VALUE, bMid = Integer.MAX_VALUE;</div><div class="line">          <span class="keyword">if</span> (aStart + k/<span class="number">2</span> - <span class="number">1</span> &lt; A.length) aMid = A[aStart + k/<span class="number">2</span> - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (bStart + k/<span class="number">2</span> - <span class="number">1</span> &lt; B.length) bMid = B[bStart + k/<span class="number">2</span> - <span class="number">1</span>];</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (aMid &lt; bMid)</div><div class="line">              <span class="keyword">return</span> getkth(A, aStart + k/<span class="number">2</span>, B, bStart, k - k/<span class="number">2</span>);<span class="comment">// Check: aRight + bLeft</span></div><div class="line">          <span class="keyword">else</span></div><div class="line">              <span class="keyword">return</span> getkth(A, aStart, B, bStart + k/<span class="number">2</span>, k - k/<span class="number">2</span>);<span class="comment">// Check: bRight + aLeft</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/4SuccessResult.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong><br>this method is like that, compare the two arrays’s median recursively, and every time ignore a half of the two arrays. if A’s median is smaller than B’s median , then we keep A’s right and B’s left.Otherwise opposite. last ,we will get L and R , use (L+R)/2.0 to get the median.notice that L and R is not index, isn’t start from 0 . when the numbers of the sum of two array’s size is odd-lengthed L is the same as R,Otherwise is different.</p>
<p>Time complexity ： O(log(m + n))<br>Space complexity ： O(1)</p>
<p>If you have any suggestions to make the logic and implementation more better , or you have some advice on my description. Please let me know!</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/" data-id="cjo6xygdu00406objsm7csnf1" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-4-Median-of-Two-Sorted-Arrays/Record-cn" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/" itemprop="url">
            <img src="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/">LeetCode 4. Median of Two Sorted Arrays [Chinese ver]</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/">
            <time datetime="2018-08-14T16:00:00.000Z" itemprop="datePublished">2018-08-15</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[Chinese ver]</p>
<h1><span id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays</span></h1><p>这里有两个有序数组nums1和nums2，他们各自的大小为m和n.<br>找到这两个数组的中间值，总的时间复杂度应该为O(log (m+n)).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example 1:</div><div class="line">nums1 = [1, 3]</div><div class="line">nums2 = [2]</div><div class="line"> 中间值是 2.0</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example 2:</div><div class="line">nums1 = [1, 2]</div><div class="line">nums2 = [3, 4]</div><div class="line">中间值是 (2 + 3)/2 = 2.5</div></pre></td></tr></table></figure>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[Chinese ver]</p>
<h1><span id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays</span></h1><p>这里有两个有序数组nums1和nums2，他们各自的大小为m和n.<br>找到这两个数组的中间值，总的时间复杂度应该为O(log (m+n)).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example 1:</div><div class="line">nums1 = [1, 3]</div><div class="line">nums2 = [2]</div><div class="line"> 中间值是 2.0</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example 2:</div><div class="line">nums1 = [1, 2]</div><div class="line">nums2 = [3, 4]</div><div class="line">中间值是 (2 + 3)/2 = 2.5</div></pre></td></tr></table></figure>
<h2><span id="方法一">方法一：</span></h2><p>首先尝试了一种比较笨的方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">        <span class="comment">//需要几个数值</span></div><div class="line">        <span class="keyword">int</span> needNum = <span class="number">0</span>;</div><div class="line">        <span class="comment">//数值位置</span></div><div class="line">        <span class="keyword">int</span> needIndex = <span class="number">0</span>;</div><div class="line">        <span class="comment">//中间值</span></div><div class="line">        <span class="keyword">double</span> median = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> big = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> stand = <span class="number">0</span>;</div><div class="line">        <span class="comment">//合成的数组</span></div><div class="line">        <span class="keyword">int</span>[] insertnum ;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> m = nums1.length;</div><div class="line">        <span class="keyword">int</span> n = nums2.length;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">0</span>)&#123;</div><div class="line">            needNum = <span class="number">2</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>-<span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            needNum=<span class="number">1</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        insertnum = <span class="keyword">new</span> <span class="keyword">int</span>[m+n];</div><div class="line">        <span class="comment">//nums1的下标</span></div><div class="line">        <span class="keyword">int</span> j =<span class="number">0</span>;</div><div class="line">        <span class="comment">//nums2的下标</span></div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;m+n;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(k==n)&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j==m)&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[j]&gt;nums2[k])&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(needNum == <span class="number">1</span>)&#123;</div><div class="line">            median = Double.valueOf(insertnum[needIndex]);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            median = Double.valueOf(insertnum[needIndex]+insertnum[needIndex+<span class="number">1</span>]) /<span class="number">2.0</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> median;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>顺便提一下，这个方法经常无法通过，应该是时间复杂度过高的原因吧。</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/1SuccessResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法的原理很简单，首先将两个数组个数和是奇数和偶数的情况所需的取值个数以及中间值计算方法得出。然后将两个数组按照从小到大的顺序合并成一个数组，最后根据前面得到的中间数的计算方法得出中间值。<br>时间复杂度 ： O(m+n) 。<br>空间复杂度 ： O(m+n) .</p>
<p>这个方法可以在做一个优化，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> needNum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> needIndex = <span class="number">0</span>;</div><div class="line">        <span class="keyword">double</span> median = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> big = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> stand = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span>[] insertnum ;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> m = nums1.length;</div><div class="line">        <span class="keyword">int</span> n = nums2.length;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">0</span>)&#123;</div><div class="line">            needNum = <span class="number">2</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>-<span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            needNum=<span class="number">1</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        insertnum = <span class="keyword">new</span> <span class="keyword">int</span>[(m+n)/<span class="number">2</span>+<span class="number">1</span>];</div><div class="line">        <span class="keyword">int</span> j =<span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;m+n;i++)&#123;</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(k==n)&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j==m)&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[j]&gt;nums2[k])&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">             <span class="keyword">if</span> (i &gt;= needIndex )&#123;</div><div class="line">                <span class="keyword">if</span> (needNum == <span class="number">1</span>)&#123;</div><div class="line">                    median = Double.valueOf(insertnum[needIndex]);</div><div class="line">                    <span class="keyword">return</span> median;</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                     <span class="keyword">if</span> (i == needIndex+<span class="number">1</span>)&#123;</div><div class="line">                         median = Double.valueOf(insertnum[needIndex]+insertnum[needIndex+<span class="number">1</span>]) /<span class="number">2.0</span>;</div><div class="line">                         <span class="keyword">return</span> median;</div><div class="line">                     &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    <span class="keyword">return</span> median;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>分析</strong><br>这个方法优化的地方就是通过事先得到中间值的位置，在得到该位置的数值之后就不继续往下走了。</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/1OptimizeSuccessResult.png?raw=true" alt="效率"></p>
<h2><span id="方法二">方法二：</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">           <span class="keyword">int</span> N1 = nums1.length;</div><div class="line">           <span class="keyword">int</span> N2 = nums2.length;</div><div class="line">           <span class="keyword">if</span> (N1 &lt; N2)</div><div class="line">               <span class="keyword">return</span> findMedianSortedArrays(nums2, nums1);    <span class="comment">// Make sure A2 is the shorter one.</span></div><div class="line"></div><div class="line">           <span class="keyword">if</span> (N2 == <span class="number">0</span>)</div><div class="line">               <span class="keyword">return</span> ((<span class="keyword">double</span>) nums1[(N1 - <span class="number">1</span>) / <span class="number">2</span>] + (<span class="keyword">double</span>) nums1[N1 / <span class="number">2</span>]) / <span class="number">2</span>;  <span class="comment">// If A2 is empty</span></div><div class="line"></div><div class="line">           <span class="keyword">int</span> lo = <span class="number">0</span>, hi = N2 * <span class="number">2</span>;</div><div class="line">           <span class="keyword">while</span> (lo &lt;= hi) &#123;</div><div class="line">               <span class="keyword">int</span> mid2 = (lo + hi) / <span class="number">2</span>;   <span class="comment">// Try Cut 2</span></div><div class="line">               <span class="keyword">int</span> mid1 = N1 + N2 - mid2;  <span class="comment">// Calculate Cut 1 accordingly</span></div><div class="line"></div><div class="line">               <span class="keyword">double</span> L1 = (mid1 == <span class="number">0</span>) ? Integer.MIN_VALUE : nums1[(mid1 - <span class="number">1</span>) / <span class="number">2</span>];    <span class="comment">// Get L1, R1, L2, R2 respectively</span></div><div class="line">               <span class="keyword">double</span> L2 = (mid2 == <span class="number">0</span>) ? Integer.MIN_VALUE : nums2[(mid2 - <span class="number">1</span>) / <span class="number">2</span>];</div><div class="line">               <span class="keyword">double</span> R1 = (mid1 == N1 * <span class="number">2</span>) ? Integer.MAX_VALUE : nums1[(mid1) / <span class="number">2</span>];</div><div class="line">               <span class="keyword">double</span> R2 = (mid2 == N2 * <span class="number">2</span>) ? Integer.MAX_VALUE : nums2[(mid2) / <span class="number">2</span>];</div><div class="line"></div><div class="line">               <span class="keyword">if</span> (L1 &gt; R2)</div><div class="line">                   lo = mid2 + <span class="number">1</span>;        <span class="comment">// A1's lower half is too big; need to move C1 left (C2 right)</span></div><div class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (L2 &gt; R1)</div><div class="line">                   hi = mid2 - <span class="number">1</span>;    <span class="comment">// A2's lower half too big; need to move C2 left.</span></div><div class="line">               <span class="keyword">else</span></div><div class="line">                   <span class="keyword">return</span> ((L1 &gt; L2 ? L1 : L2) + (R1 &gt; R2 ? R2 : R1)) / <span class="number">2</span>;    <span class="comment">// Otherwise, that's the right cut.</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/2SeccessResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong></p>
<p>这个问题比较困难，很多方法都是把他分成两种情况，奇数个和偶数个。实际上这样有点复杂，我们可以把这两个情况合并成一种情况。</p>
<p>首先，我们来重新定义一下’median’的含义：</p>
<p>“如果我们把一个有序的array分成两个等长的部分，那么median就是比较小的那一部分的最大值和比较大的那一部分的最小值的平均值。即划分线两边的数。”</p>
<p>比如[1,2],我们的分割线就应该在1，2之间，[1 | 2],结果是(1 + 2)/2.0 = 1.5。<br>同理，如果是两个有序的数组，那么我们只需要保证两个数组划分线右侧的数都大于左侧的数，并且两个数组左侧数字个数的和等于右侧数字个数的和。</p>
<p>我们使用‘|’来代表分割线，(n|n)来表示分割线正好在某个数字n上。<br>比如[1 2 3],得到的分割后的数组像这样[1 (2|2) 3],z中间值就是(2+2)/2.0 = 2</p>
<p>我们使用L代表分割线左边的数，R代表分割线右边的数。</p>
<p>可以观察到左边的数和右边的数有这样的规律。</p>
<p>N        Index of L / R<br>1               0 / 0<br>2               0 / 1<br>3               1 / 1<br>4               1 / 2<br>5               2 / 2<br>6               2 / 3<br>7               3 / 3<br>8               3 / 4</p>
<p>可以得到 L = (N-1)/2,  R = N/2. 中间值为(L + R)/2 = (A[(N-1)/2] + A[N/2])/2</p>
<p>为了更方便的计算两个数组的情况，我们添加一些空位在数字之间。用’#’代表，用’position’来表示增加空格后的位置信息。</p>
<p>[1 2] -&gt; [# 1 # 2 #] (N=2)<br>position  0 1 2 3 4  (N_Position = 5)</p>
<p>[3 4] -&gt; [# 3 # 4 #] (N=2)<br>position  0 1 2 3 4  (N_Position = 5)</p>
<p>可以看出N_Position = 2N+1.所以分割线是在N，index(L) = (CutPosition-1)/2, index(R) = (CutPosition)/2.</p>
<p>当我们分割这两个数组的时候要注意，总共有2N1+2N2+2的位置，所以，分割线的每一边都要有N1+N2个位置，剩下的2个就是切线的位置，所以当我们A2分割线在 C2 = K  , 那么A1的分割线就必须要在C1 = N1 + N2 - k. 比如,  C2 = 2, 那么 C1 = 2 + 2 - C2 = 2.</p>
<p>[# 1 | 2 #]<br>[# 3 | 4 #]<br>现在我们有了两个L和两个R。<br>L1 = A1[(C1-1)/2]; R1 = A1[C1/2];<br>L2 = A2[(C2-1)/2]; R2 = A2[C2/2];<br>即<br>    L1 = A1[(2-1)/2] = A1[0] = 1; R1 = A1[2/2] = A1[1] = 2;<br>    L2 = A2[(2-1)/2] = A2[0] = 3; R2 = A1[2/2] = A1[1] = 4;</p>
<p>那么我们要怎么判断这个分割线是不是符合规则的呢？我们只要左边的数字都小于右边的数字。首先这两个数组都是有序的，所以L1,L2是左半边数组里最大的数，R1,R2是右半边数组里最小的数，L1&lt;=R1.L2&lt;=R2.<br>所以我们只要判断L1&lt;=R2,L2&lt;=R1就可以了。</p>
<p>现在我们用简单的二分法查找就可以得到答案了。</p>
<p>如果L1&gt;R2,代表A1左边有过多较大的数字，我们必须把C1往左移，同时需要把C2往右移。<br>如果L2&gt;R1,代表A2左边有过多较大的数字，我们必须把C2往左移，同时需要把C1往右移。<br>反之则相反。</p>
<p>当我们找到正确的分割线位置的时候，中间值  = (max(L1, L2) + min(R1, R2)) / 2。</p>
<p>1.因为C1和C2可以根据彼此的值互相推断，我们可以使用较短的数组(设为A2)并且只移动C2，然后计算出C1。这样我们的时间复杂度就是O(log(min(N1, N2)))</p>
<p>2.只有在极限的条件下分割线会在0,或者2N的index。比如，C2=2N2,R2 = A2[2*N2/2] = A2[N2].这种情况下他有一边是没有数值的，我们可以把它当成是极大或者极小，L = INT_MIN ，R = INT_MAX.</p>
<p>时间复杂度 ： O(log(min(m,n))) 。m,n是两个数组的长度。<br>空间复杂度 ： O(1) .</p>
<h2><span id="方法三">方法三：</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> B[])</span> </span>&#123;</div><div class="line">       <span class="keyword">int</span> n = A.length;</div><div class="line">       <span class="keyword">int</span> m = B.length;</div><div class="line">       <span class="comment">// the following call is to make sure len(A) &lt;= len(B).</span></div><div class="line">       <span class="comment">// yes, it calls itself, but at most once, shouldn't be</span></div><div class="line">       <span class="comment">// consider a recursive solution</span></div><div class="line">       <span class="keyword">if</span> (n &gt; m)</div><div class="line">           <span class="keyword">return</span> findMedianSortedArrays(B, A);</div><div class="line"></div><div class="line">       <span class="comment">// now, do binary search</span></div><div class="line">       <span class="keyword">int</span> k = (n + m - <span class="number">1</span>) / <span class="number">2</span>;</div><div class="line">       <span class="keyword">int</span> l = <span class="number">0</span>, r = Math.min(k, n); <span class="comment">// r is n, NOT n-1, this is important!!</span></div><div class="line">       <span class="keyword">while</span> (l &lt; r) &#123;</div><div class="line">           <span class="keyword">int</span> midA = (l + r) / <span class="number">2</span>;</div><div class="line">           <span class="keyword">int</span> midB = k - midA;</div><div class="line">           <span class="keyword">if</span> (A[midA] &lt; B[midB])</div><div class="line">               l = midA + <span class="number">1</span>;</div><div class="line">           <span class="keyword">else</span></div><div class="line">               r = midA;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="comment">// after binary search, we almost get the median because it must be between</span></div><div class="line">       <span class="comment">// these 4 numbers: A[l-1], A[l], B[k-l], and B[k-l+1]</span></div><div class="line"></div><div class="line">       <span class="comment">// if (n+m) is odd, the median is the larger one between A[l-1] and B[k-l].</span></div><div class="line">       <span class="comment">// and there are some corner cases we need to take care of.</span></div><div class="line">       <span class="keyword">int</span> a = Math.max(l &gt; <span class="number">0</span> ? A[l - <span class="number">1</span>] : Integer.MIN_VALUE, k - l &gt;= <span class="number">0</span> ? B[k - l] : Integer.MIN_VALUE);</div><div class="line">       <span class="keyword">if</span> (((n + m) &amp; <span class="number">1</span>) == <span class="number">1</span>)</div><div class="line">           <span class="keyword">return</span> (<span class="keyword">double</span>) a;</div><div class="line"></div><div class="line">       <span class="comment">// if (n+m) is even, the median can be calculated by</span></div><div class="line">       <span class="comment">//      median = (max(A[l-1], B[k-l]) + min(A[l], B[k-l+1]) / 2.0</span></div><div class="line">       <span class="comment">// also, there are some corner cases to take care of.</span></div><div class="line">       <span class="keyword">int</span> b = Math.min(l &lt; n ? A[l] : Integer.MAX_VALUE, k - l + <span class="number">1</span> &lt; m ? B[k - l + <span class="number">1</span>] : Integer.MAX_VALUE);</div><div class="line">       <span class="keyword">return</span> (a + b) / <span class="number">2.0</span>;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/3SuccessResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法的原理和上一个方法是大致相同的。<br>时间复杂度 ： O(log(min(m,n))) 。m,n是两个数组的长度。<br>空间复杂度 ： O(1) .</p>
<h2><span id="方法四">方法四：</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</div><div class="line">              <span class="keyword">int</span> m = A.length, n = B.length;</div><div class="line">              <span class="keyword">int</span> l = (m + n + <span class="number">1</span>) / <span class="number">2</span>;<span class="comment">//position of l element (not the index)</span></div><div class="line">              <span class="keyword">int</span> r = (m + n + <span class="number">2</span>) / <span class="number">2</span>;<span class="comment">//position of r element (not the index)</span></div><div class="line">              <span class="keyword">return</span> (getkth(A, <span class="number">0</span>, B, <span class="number">0</span>, l) + getkth(A, <span class="number">0</span>, B, <span class="number">0</span>, r)) / <span class="number">2.0</span>;</div><div class="line">          &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getkth</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> aStart, <span class="keyword">int</span>[] B, <span class="keyword">int</span> bStart, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">          <span class="comment">//when the start position is bigger than A.length -1 ,means the median doesn't in the A.</span></div><div class="line">          <span class="keyword">if</span> (aStart &gt; A.length - <span class="number">1</span>) <span class="keyword">return</span> B[bStart + k - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (bStart &gt; B.length - <span class="number">1</span>) <span class="keyword">return</span> A[aStart + k - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (k == <span class="number">1</span>) <span class="keyword">return</span> Math.min(A[aStart], B[bStart]);</div><div class="line"></div><div class="line">          <span class="keyword">int</span> aMid = Integer.MAX_VALUE, bMid = Integer.MAX_VALUE;</div><div class="line">          <span class="keyword">if</span> (aStart + k/<span class="number">2</span> - <span class="number">1</span> &lt; A.length) aMid = A[aStart + k/<span class="number">2</span> - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (bStart + k/<span class="number">2</span> - <span class="number">1</span> &lt; B.length) bMid = B[bStart + k/<span class="number">2</span> - <span class="number">1</span>];</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (aMid &lt; bMid)</div><div class="line">              <span class="keyword">return</span> getkth(A, aStart + k/<span class="number">2</span>, B, bStart, k - k/<span class="number">2</span>);<span class="comment">// Check: aRight + bLeft</span></div><div class="line">          <span class="keyword">else</span></div><div class="line">              <span class="keyword">return</span> getkth(A, aStart, B, bStart + k/<span class="number">2</span>, k - k/<span class="number">2</span>);<span class="comment">// Check: bRight + aLeft</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/4SuccessResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法的原理是这样的，从两个数组中间值开始通过递归对比，每次排除一半的选项。如果A的中间值小于B的中间值则保留a的右侧数字和b的左侧数字。反之相反。然后得到l和r位置的数字,再相加除以2即可。需要注意的是这里的l和r不是index，不是从零开始的。如果两个数组的长度的和是奇数的话l和r是相同的，偶数则不同。<br>时间复杂度 ： O(log(m + n))<br>空间复杂度 ： O(1)</p>
<p>如果你有更好的办法或者对我这里的描述有其他看法，请联系我。谢谢</p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=true" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/" data-id="cjo6xygdx00446objua17xzjk" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-Binary-Search" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/14/Binary-Search/" itemprop="url">
            <img src="/2018/08/14/Binary-Search/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/14/Binary-Search/">Binary Search(二分搜索)</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/14/Binary-Search/">
            <time datetime="2018-08-13T16:00:00.000Z" itemprop="datePublished">2018-08-14</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/Common/">Common</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><h1><span id="binary-search二分搜索">Binary Search(二分搜索)</span></h1><p>二分搜索(binary search),也叫做 折半搜索(half-interval search),对数搜索(logarithmic search),对半搜索(binary chop),是一种在有序数组中查找某一特定元素的搜索算法.</p>
<p>二分搜索有几个变体.特别是,分散层叠(<a href="https://en.wikipedia.org/wiki/Fractional_cascading" target="_blank" rel="external">fractional cascading</a>)(将每个数组里的值集合成一个数组,元素为11[0,3,2,0] 的形式,括号内的数字是该值在对应数组中应该返回的数字)提高了在多个数组中查找相同值的效率,高效的解决了一系列计算几何和其他领域的查找问题).指数查找(<a href="https://en.wikipedia.org/wiki/Exponential_search" target="_blank" rel="external">Exponential search</a>)延伸了二分查找到一个没有边界的 list.<a href="https://en.wikipedia.org/wiki/Binary_search_tree" target="_blank" rel="external">binary search tree</a>和<a href="https://en.wikipedia.org/wiki/B-tree" target="_blank" rel="external">B-tree</a>是基于 binary search 延伸的.</p>
<h2><span id="原理">原理</span></h2><p>搜索时从数组中间元素开始,如果中间元素正好是要查找的元素,则搜索过程结束;如果中间元素大于或者小于要查找的元素,则在数组中大于或者小于查找元素的一半中继续查找,重复这个过程直到找到这个元素,或者这一半的大小为空时则代表找不到.这样子每一次比较都使得搜索范围缩小一半.</p>
<h3><span id="步骤">步骤</span></h3><p>给定一个有序数组 A 是 A0,…,An-1并保证 A0&lt;=…&lt;=An-1,以及目标值 T.</p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/14/Binary-Search/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<h1><span id="binary-search二分搜索">Binary Search(二分搜索)</span></h1><p>二分搜索(binary search),也叫做 折半搜索(half-interval search),对数搜索(logarithmic search),对半搜索(binary chop),是一种在有序数组中查找某一特定元素的搜索算法.</p>
<p>二分搜索有几个变体.特别是,分散层叠(<a href="https://en.wikipedia.org/wiki/Fractional_cascading" target="_blank" rel="external">fractional cascading</a>)(将每个数组里的值集合成一个数组,元素为11[0,3,2,0] 的形式,括号内的数字是该值在对应数组中应该返回的数字)提高了在多个数组中查找相同值的效率,高效的解决了一系列计算几何和其他领域的查找问题).指数查找(<a href="https://en.wikipedia.org/wiki/Exponential_search" target="_blank" rel="external">Exponential search</a>)延伸了二分查找到一个没有边界的 list.<a href="https://en.wikipedia.org/wiki/Binary_search_tree" target="_blank" rel="external">binary search tree</a>和<a href="https://en.wikipedia.org/wiki/B-tree" target="_blank" rel="external">B-tree</a>是基于 binary search 延伸的.</p>
<h2><span id="原理">原理</span></h2><p>搜索时从数组中间元素开始,如果中间元素正好是要查找的元素,则搜索过程结束;如果中间元素大于或者小于要查找的元素,则在数组中大于或者小于查找元素的一半中继续查找,重复这个过程直到找到这个元素,或者这一半的大小为空时则代表找不到.这样子每一次比较都使得搜索范围缩小一半.</p>
<h3><span id="步骤">步骤</span></h3><p>给定一个有序数组 A 是 A0,…,An-1并保证 A0&lt;=…&lt;=An-1,以及目标值 T.</p>
<ol>
<li>令 L 为0,R 为 n-1.</li>
<li>如果 L&gt;R 则搜索失败</li>
<li>令m(中间值元素索引)为最大的小于(L+R)/2的整数</li>
<li>如果 Am&lt;T ,令 L=m+1并回到第2步;</li>
<li>如果 Am&gt;T ,令 R=m-1并回到第2步;</li>
<li>当 Am=T,搜索结束;T 所在的索引位置为m.</li>
</ol>
<p><code>变体</code></p>
<ol>
<li>令 L 为0,R 为 n-1.</li>
<li>令 m(中间元素索引) 为上限,也就是最小的大于(L+R)/2的值.</li>
<li>如果 Am&gt;T ,设置 R 为 m-1并且返回第2步</li>
<li>如果 Am&lt;=T ,设置 L 为m 并且返回第2步.</li>
<li>直到 L=R ,搜索完成.这时候如果T=Am,返回 m,否则,搜索失败.</li>
</ol>
<p>在 Am&lt;=T 的时候,这个变体将 L 设置为 m 而不是 m+1.这个方式的比较是更快速的,因为它在每个循环里省略了一次比较.但是平均就会多出来一次循环.在数组包含重复的元素的时候这个变体总是会返回最右侧的元素索引.比如 A 是[1,2,3,4,4,5,6,7]查找的对象是4,那么这个方法会返回 index 4,而不是 index 3.</p>
<h3><span id="大致匹配">大致匹配</span></h3><p>由于有序数组的顺序性,可以将二分搜索扩展到大致匹配.可以用来计算赋值的排名(或称秩,比它更小的元素的数量),前趋(下一个最小元素),后继(下一个最大元素)以及最近邻.还可以使用两个排名查询来执行范围查询.</p>
<ul>
<li>排名查询可以使用调整后的二分搜索来进行.成功时返回m,失败时返回 L, 这样就等于返回了比目标值小的元素数目.</li>
<li>前趋和后继可以使用排名查询来进行.当知道目标值的排名,成功时前趋是排名位置的上一个元素,失败时则是排名位置的元素.它的后继是排名位置的后一个元素,或是前趋的下一个元素.目标值的最近领可能是前趋或后继,取决于哪个更接近目标值.</li>
<li>范围查询,一旦知道范围两边的值的排名,那么大于边界最小值且小于边界最大值的元素排名就是他们的范围,是否包含边界值根据需要处理.</li>
</ul>
<h2><span id="性能分析">性能分析</span></h2><p><strong>时间复杂度</strong><br>二分查找每次把搜索区域减少一半,时间复杂度为<br>$$<br>O(log_2 n)<br>$$<br>(n 是集合中元素的个数)<br>最差的情况是 遍历到最后一层,或者是没有找到该元素的时候,复杂度为 $O(\lfloor log_2 n + 1 \rfloor)$ .</p>
<p>综合复杂度为 $O(log_2 n)$</p>
<p>分散层叠(fractional cascading) 可以提高在多数组中查询相同值的效率. k 是数组的数量,在每个数组中查询目标值消耗 $O(k log n)$ 的时间.分散层叠可以将它降低到 $O(k+log n)$.</p>
<p><code>变体效率分析</code><br>相对于正常的二分搜索,它减少了每次循环的比对次数,但是它必须做完完整的循环,而不会在中间就得到答案.但是在 n 很大的情况下减少了对比次数的提升不能够抵消多余的循环的消耗.</p>
<p><strong>空间复杂度</strong><br>O(1).尾递归,可以改写为循环.</p>
<h2><span id="应用">应用</span></h2><p>查找数组中的元素,或用于插入排序.</p>
<h2><span id="二分搜索和其他的方案对比">二分搜索和其他的方案对比</span></h2><p>使用二分搜索的有序数组在插入和删除操作效率很低,每个操作消耗 O(n) 的时间.其他的数据结构提供了更高效的插入和删除,并且提供了同样高效的完全匹配.然而,二分搜索适用于很多的搜索问题,只消耗 $O(log n)$ 的时间.</p>
<h3><span id="hashing">Hashing</span></h3><p>对于<a href="https://en.wikipedia.org/wiki/Associative_arrays" target="_blank" rel="external">关联数组 (associative arrays)</a>,<a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="external">哈希表 (hash tables)</a>,他们是通过hash 函数将键映射到记录上的数据结构,通常情况下比在有序数组的情况下使用二分查找要更快.大部分的实现平均开销都是常量级的.然而, hashing 并不适用于模糊匹配,比如计算前趋,后继,以及最近的键,它在失败的查询情况下能给我们的唯一信息就是目标在记录中不存在.二分查找是这种匹配的理想模式,消耗对数级别的时间.</p>
<h3><span id="trees">Trees</span></h3><p><a href="todo">二叉搜索树(binary search tree)</a> 是一个基于二叉搜索原理的<a href="todo">二叉树(binary tree)</a>数据结构.树的记录按照顺序排列,并且每个树里的每个记录都可以使用类似二叉搜索的方法来搜索,平均耗费对数级的时间.插入和删除的平均时间也是对数级的.这会比有序数组消耗的线性时间要快,并且二叉树拥有所有有序数组可以执行的操作,包含范围和模糊查找.</p>
<p>然而二叉搜索通常情况下比二叉搜索树的搜索更有效率,因为二叉搜索树很可能会完全不平衡,导致性能稍差.这同样适用于 <a href="todo">平衡二叉搜索树( balanced binary search trees)</a> , 它平衡了它自己的节点稍微向完全平衡树靠拢.虽然不太可能,但是树有可能只有少数节点有两个子节点导致严重不平衡,这种情况下平均时间损耗和最差的情况差不多都是 O(n) .二叉搜索树比有序数组占用更多的空间.</p>
<p>二叉搜索树因为可以高效的在文件系统中结构化,所以他们可以在硬盘中进行快速搜索.B-tree 泛化了这种树结构的方法.B-tree 常用于组织长时间的存储比如<a href="todo">数据库(databases)</a>和<a href="todo">文件系统(filesystems)</a>.</p>
<h3><span id="linear-search">Linear search</span></h3><p><a href="todo">线性搜索( Linear Search)</a>是一种简单的搜索算法,它查找每一个记录直到找到目标值.线性搜索可以在 链表(linked list) 上使用,它的插入和删除会比在数组上要快.二分搜索比线性搜索要快除非数组很短.如果数组必须先被排序,这个消耗必须在搜索中平摊.对数组进行排序还可以进行有效的近似匹配和其他操作.</p>
<h3><span id="set-membership-algorithms">Set membership algorithms</span></h3><p>一个和搜索相关的问题是<a href="todo">集合成员(set membership)</a>.所有有关查找的算法,比如二分搜索,都可以用于集合成员.还有一些更适用于集合成员的算法,<a href="todo">位数组(bit array)</a>是最简单的一个,在键的范围是有限的时候非常有用.它非常快,是需要O(1)的时间.<a href="todo">朱迪矩阵(Judy array)</a>可以高效的处理64位键.</p>
<p>对于近似结果,<a href="todo">布隆过滤器(Bloom filters)</a>是另外一个基于哈希的概率性数据结构,通过存储使用bit array 和多重 hash 函数编码的键集合. Bloom filters 在大多数情况下空间效率比bit arrays 要高而不会慢太多:使用了 k 重hash 函数,成员查找只需要 O(k) 的时间.然而, Bloom filters 有一定的误判性.</p>
<h3><span id="其他的数据结构">其他的数据结构</span></h3><p>这里存在一些数据结构在某些情况下比在有序数组上使用二分搜索进行查找或其他的操作更加高效.比如,在<a href="todo">van Emde Boas trees</a>, <a href="todo">fusion trees</a>, <a href="todo">前缀树(tries)</a>, 和<a href="todo">位数组</a> 上进行查找,近似匹配,以及其他可用的操作可以比在有序数组上进行二分搜索更加的高效.然而,尽管这些操作可以比在无视键的情况下比有序数组上使用更高效,这样的数据结构通常是因为利用了某些键的属性(键通常是一些小整数),因此如果键缺乏那些属性将会消耗更多的空间或时间.一些结构如朱迪矩阵,使用了多种方式的组合来保证效率和执行近似匹配的能力.</p>
<h2><span id="变体">变体</span></h2><h3><span id="uniform-binary-search">Uniform binary search</span></h3><p>Uniform binary search 不是存储下限和上限的边界值,而是中间元素的索引,和从这次循环的中间元素到下次循环的中间元素的变化.每一步的变化减少一半.比如,要搜索的数组是[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],中间元素是6.Uniform binary search 同时对左边和右边的子数组进行操作.在这个情况下,左边的子数组([1, 2, 3, 4, 5]) 的中间元素 3 而右边的子数组 ([7, 8, 9, 10, 11]) 的中间元素是 9.然后存储3 作为两个中间元素和 6 的差别.为了减少搜索的空间使用,算法同时加上或减去这个和中间元素的改变.这个算法的好处是可以将每次循环的索引的差别存储到一个表里,在某些系统里可以提高算法的性能.</p>
<p><img src="/2018/08/14/Binary-Search/Uniform_binary_search.svg.png" alt=""></p>
<h3><span id="exponential-search">Exponential search</span></h3><p>指数查找(Exponential Search)将二分搜索拓展到无边界数组.它最开始寻找第一个索引是2的幂次方并且要比目标值大的元素的索引.然后,它将这个元素索引设置为上边界,然后开始二分搜索.指数查找消耗 $\lfloor log_2 x =1 \rfloor$ 次循环 ,然后二分搜索消耗 $\lfloor log_2 x \rfloor$ 次循环, x 是目标值的位置.指数查找适用于有界列表,在目标值接近数组开始的位置的时候比二分查找性能有所提高.</p>
<p><img src="/2018/08/14/Binary-Search/Exponential_search.svg.png" alt=""></p>
<h3><span id="interpolation-search">Interpolation search</span></h3><p>内插搜索(Interpolation search)忽略了目标值的位置,计算数组的最低和最高元素的距离即数组的长度.这只有在数组元素是数字的时候才能使用.它适用于中间值不是最好的猜测选择的情况.比如,如果目标值接近数组的最高元素,最好是定位在数组的末端.如果数组的分布是均匀的或者接近均匀的,它消耗 $O(log log n)$ 次比较.</p>
<p>实际上,内插搜索在数组元素较少的情况下是比二分搜索更慢的,因为内插搜索需要额外的计算.尽管它的时间复杂度增长是小于二分搜索的,只有在在大数组的情况下这个计算的损耗可以被弥补.</p>
<p><img src="/2018/08/14/Binary-Search/Interpolation_search.svg.png" alt=""></p>
<h3><span id="fractional-cascading">Fractional cascading</span></h3><p>分散层叠(Fractional cascading) 可以提高在多个有序数组里查找相同的元素或近似匹配的效率,分别在每个数组里查找总共需要 $O(klogn)$的时间, k 是数组的数量.分散层叠通过将每个数组的信息按指定的方式存储起来将这个时间降低到 $O(k+logn)$ .</p>
<p>它将每个数组里的值集合成一个数组,元素为 11[0,3,2,0] 的形式,括号内的数字是该值在对应数组中应该返回的数字)提高了在多个数组中查找相同值的效率,高效的解决了一系列计算几何和其他领域的查找问题</p>
<p>分散层叠被发明的时候是为了高效的解决各种<a href="todo">计算几何学(computational geometry)</a> 问题,但是它同样适用于其他地方,例如 <a href="todo">数据挖掘(data mining)</a> 和 <a href="todo">互联网协议(Internet Protocal)</a> 等.</p>
<h2><span id="实现时的问题">实现时的问题</span></h2><p>要注意中间值的取值方法,如果使用 (L+R)/2 当数组的元素数量很大的时候回造成计算溢出.所以要使用L+(R-L)/2.</p>
<h2><span id="示例">示例</span></h2><p>C 版本- 递归<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">binary_search</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> arr[], <span class="keyword">int</span> start , <span class="keyword">int</span> end , <span class="keyword">int</span> khey)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span> (start &gt; end)</div><div class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> mid = start +(end - start)/<span class="number">2</span>;   <span class="comment">//直接平均可能会溢位,所以用此算法</span></div><div class="line">    <span class="keyword">if</span> (arr[mid] &gt; khey)</div><div class="line">        <span class="keyword">return</span> binary_search(arr , start , mid - <span class="number">1</span> , khey);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; khey)</div><div class="line">        <span class="keyword">return</span> binary_search(arr , mid + <span class="number">1</span> , end , khey);</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> mid;    <span class="comment">//最后才检测相等的情况是因为大多数搜寻情况不是大于就是小于</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>C 版本- while 循环</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">binary_search</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> arr[], <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> khey)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> result = <span class="number">-1</span>;    <span class="comment">//如果没有搜索到数据返回 -1</span></div><div class="line"></div><div class="line">    <span class="keyword">int</span> mid;</div><div class="line">    <span class="keyword">while</span> (start &lt;= end)&#123;</div><div class="line">      mid = start + (end - start)/<span class="number">2</span> ;    <span class="comment">//直接平均可能会溢位,所以用此算法</span></div><div class="line">      <span class="keyword">if</span> (arr[mid] &gt; khey)</div><div class="line">          end = mid<span class="number">-1</span>;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; khey)</div><div class="line">          start = mid + <span class="number">1</span>;</div><div class="line">      <span class="keyword">else</span>&#123;    <span class="comment">//最后才检测相等的情况是因为大多数搜寻情况不是大于就是小于</span></div><div class="line">          result = mid;</div><div class="line">          <span class="keyword">break</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Python3 递归</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">binary_search</span><span class="params">(arr, start, end, hkey)</span>:</span></div><div class="line">    <span class="keyword">if</span> start &gt; end:</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span></div><div class="line"></div><div class="line">    mid = start + (end - start) / <span class="number">2</span></div><div class="line">    <span class="keyword">if</span> arr[mid] &gt; hkey:</div><div class="line">        <span class="keyword">return</span> binary_search(arr, start , mid - <span class="number">1</span>,hkey)</div><div class="line">    <span class="keyword">if</span> arr[mid] &lt; hkey:</div><div class="line">        <span class="keyword">return</span> binary_search(arr, mid + <span class="number">1</span>, end, hkey)</div><div class="line">    <span class="keyword">return</span> mid</div></pre></td></tr></table></figure>
<p>Python3 while 循环</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">binary_search</span><span class="params">(arr, start, end, hkey)</span>:</span></div><div class="line">    result = <span class="number">-1</span></div><div class="line"></div><div class="line">    <span class="keyword">while</span> start &lt;= end:</div><div class="line">        mid = start + (end - start) / <span class="number">2</span></div><div class="line">        <span class="keyword">if</span> arr[mid] &gt; hkey :</div><div class="line">            end = mid - <span class="number">1</span></div><div class="line">        <span class="keyword">elif</span> arr[mid] &lt; hkey :</div><div class="line">            start = mid + <span class="number">1</span></div><div class="line">        <span class="keyword">else</span> :</div><div class="line">            result = mid</div><div class="line">            <span class="keyword">break</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> result</div></pre></td></tr></table></figure>
<p>Java 递归</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> hkey)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span> (start &gt; end)</div><div class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> mid = start + (end - start)/<span class="number">2</span>;    <span class="comment">//防止溢位</span></div><div class="line">    <span class="keyword">if</span> (arr[mid] &gt; hkey)</div><div class="line">        <span class="keyword">return</span> binarySearch(arr, start, mid - <span class="number">1</span>, hkey);</div><div class="line">    <span class="keyword">if</span> (arr[mid] &lt; hkey)</div><div class="line">        <span class="keyword">return</span> binarySearch(arr, mid + <span class="number">1</span>, end, hkey);</div><div class="line">    <span class="keyword">return</span> mid;  </div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Java while 循环</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> hkey)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> result = -<span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (start &lt;= end)&#123;</div><div class="line">        <span class="keyword">int</span> mid = start + (end - start)/<span class="number">2</span>;    <span class="comment">//防止溢位</span></div><div class="line">        <span class="keyword">if</span> (arr[mid] &gt; hkey)</div><div class="line">            end = mid - <span class="number">1</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; hkey)</div><div class="line">            start = mid + <span class="number">1</span>;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            result = mid ;  </div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2><span id="references">References</span></h2><p><a href="https://en.wikipedia.org/wiki/Binary_search_algorithm" target="_blank" rel="external">https://en.wikipedia.org/wiki/Binary_search_algorithm</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/14/Binary-Search/" data-id="cjo6xygc8001v6objncq6gmog" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-3-Longest-Substring-Without-Repeating-Characters/Record[English-ver]" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[English-ver]/" itemprop="url">
            <img src="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[Chinese-ver]/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[English-ver]/">LeetCode 3. Longest Substring Without Repeating Characters [English ver]</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[English-ver]/">
            <time datetime="2018-07-20T16:00:00.000Z" itemprop="datePublished">2018-07-21</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[English ver]</p>
<h1><span id="3-longest-substring-without-repeating-characters">3. Longest Substring Without Repeating Characters</span></h1><p>Given a string, find the length of the longest substring without repeating characters.</p>
<p><strong>Example:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Given &quot;abcabcbb&quot;, the answer is &quot;abc&quot;, which the length is 3.</div><div class="line"></div><div class="line">Given &quot;bbbbb&quot;, the answer is &quot;b&quot;, with the length of 1.</div><div class="line"></div><div class="line">Given &quot;pwwkew&quot;, the answer is &quot;wke&quot;, with the length of 3. Note that the answer must be a substring, &quot;pwke&quot; is a subsequence and not a substring.</div></pre></td></tr></table></figure></p>
<p>First time i get a very tedious algorithm, because of i did not thinking about the problem carefully in the beginning, it causes that i hava to fix bug again and again because of the situation i haven’t think about . this makes code become very redundant .</p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[English-ver]/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[English ver]</p>
<h1><span id="3-longest-substring-without-repeating-characters">3. Longest Substring Without Repeating Characters</span></h1><p>Given a string, find the length of the longest substring without repeating characters.</p>
<p><strong>Example:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Given &quot;abcabcbb&quot;, the answer is &quot;abc&quot;, which the length is 3.</div><div class="line"></div><div class="line">Given &quot;bbbbb&quot;, the answer is &quot;b&quot;, with the length of 1.</div><div class="line"></div><div class="line">Given &quot;pwwkew&quot;, the answer is &quot;wke&quot;, with the length of 3. Note that the answer must be a substring, &quot;pwke&quot; is a subsequence and not a substring.</div></pre></td></tr></table></figure></p>
<p>First time i get a very tedious algorithm, because of i did not thinking about the problem carefully in the beginning, it causes that i hava to fix bug again and again because of the situation i haven’t think about . this makes code become very redundant .</p>
<h3><span id="the-solution-for-the-first-time">The solution for the first time</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        HashMap&lt;String,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">        <span class="keyword">int</span> maxSubLength = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> tempLength = <span class="number">0</span>;</div><div class="line">        <span class="keyword">boolean</span> isFirstRepeat = <span class="keyword">true</span>;</div><div class="line">        String beginSub = <span class="string">""</span>;</div><div class="line">        <span class="keyword">int</span> bigStartNum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            beginSub = String.valueOf(s.charAt(i));</div><div class="line">            <span class="keyword">if</span>(map.containsKey(beginSub))&#123;</div><div class="line">                <span class="keyword">if</span>(map.get(beginSub)&gt;bigStartNum)&#123;</div><div class="line">                    tempLength = i - map.get(beginSub);</div><div class="line">                    bigStartNum = map.get(beginSub);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    tempLength = i - bigStartNum;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(tempLength&gt;maxSubLength)&#123;</div><div class="line">                    maxSubLength = tempLength;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(isFirstRepeat)&#123;</div><div class="line">                    tempLength = i;</div><div class="line">                    isFirstRepeat =<span class="keyword">false</span>;</div><div class="line">                    <span class="keyword">if</span>(tempLength&gt;maxSubLength)&#123;</div><div class="line">                    maxSubLength = tempLength;</div><div class="line">                &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                 tempLength = i - bigStartNum;</div><div class="line">                   <span class="keyword">if</span>(tempLength&gt;maxSubLength)&#123;</div><div class="line">                    maxSubLength = tempLength;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            map.put(beginSub,i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>((s.length()-bigStartNum)&gt;maxSubLength)&#123;</div><div class="line">            maxSubLength = (s.length()-bigStartNum-<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(isFirstRepeat)&#123;</div><div class="line">            <span class="keyword">return</span> s.length();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> maxSubLength;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/most_tedious_result.png?raw=true" alt="shame on this code "></p>
<p>i have thinking about did i have problems in the way i tried before, the twists before let me realize to think carefully and then write the code,i am not going to analyze this code, because i almost can’t understand what i writen, I even  embarrassed to write the annotate, just leave A lesson to me. The next step i will optimize and rethink this approach.</p>
<h3><span id="the-solution-for-the-second-time">The solution for the second time</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        HashMap&lt;String,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">		<span class="comment">//max substring's length</span></div><div class="line">        <span class="keyword">int</span> maxSubLength = <span class="number">0</span>;</div><div class="line">		<span class="comment">//the sub character now</span></div><div class="line">        String nowSub = <span class="string">""</span>;</div><div class="line">		<span class="comment">//the bigger index which the string can start</span></div><div class="line">        <span class="keyword">int</span> bigStartNum = -<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            nowSub = String.valueOf(s.charAt(i));</div><div class="line">            <span class="keyword">if</span>(map.containsKey(nowSub))&#123;</div><div class="line">				<span class="comment">//if the character repeat,you can start the string from the larger one of the nowSub occur before this time and bigStartNum.</span></div><div class="line">                bigStartNum = Math.max(map.get(nowSub), bigStartNum);</div><div class="line">            &#125;</div><div class="line">			<span class="comment">//the maxSubLength is the maximum number of the length of bigStartNum to i and old maxSubLength</span></div><div class="line">            maxSubLength = Math.max(i - bigStartNum, maxSubLength);</div><div class="line">            map.put(nowSub,i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> maxSubLength;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>After the optimize ,the code is very clear. I haven’t thought that there is a Math.max () method can be used util i re-conceived the code, still need more sensitivity of the api.</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/promote_self.png?raw=true" alt="效率"></p>
<p><strong>Analysis</strong><br>The principle of this method is to traverse each character, in order to avoid nest loop, we use the hashmap to replace the time cost of space costs,determine whether there is a character in front by hashmap, and store his index number information. How do we get the longest substring? In fact, it can be divided into the following situations:</p>
<p>We use (p) to represent the previous repeat character, (n) to represent the latter repeat character.</p>
<ol>
<li>The character a is the first repeat character, and the length should be from the beginning to the location a(n)-1.</li>
<li>the character a is not the first repeat character, the last repeat character is b, if a(p) is behind b(p) then the length is between two a, if a(p) is in front of b(p), then the length is between a(n) and b(p) (because a(n) to a(p) contains two b, which is irregular)</li>
<li>This character does not repeat, the length is the character to location of the last repeat character a(p)+1.</li>
</ol>
<p>Sort out the current situation util now .in fact, the conditions above can be sorted into one way to calculate, because the sub-string must be continuous, so it is to calculate the length between current character and the repeat character previous one ,and then get the largest length.</p>
<p>Time complexity: O(n).<br>Space complexity: O(n).</p>
<p>and then we look some type solution of this kind problem.</p>
<h3><span id="approach-1brute-force">Approach 1：Brute Force</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length();</div><div class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= n; j++)</div><div class="line">                <span class="keyword">if</span> (allUnique(s, i, j)) ans = Math.max(ans, j - i);</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">	<span class="comment">//judge that all the characters in s is unique.</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">allUnique</span><span class="params">(String s, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt; end; i++) &#123;</div><div class="line">            Character ch = s.charAt(i);</div><div class="line">            <span class="keyword">if</span> (set.contains(ch)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            set.add(ch);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/brute_result.png?raw=true" alt="heartbreak"></p>
<p><strong>Analysis</strong><br>The principle of this method is very simple, the outermost loop L1 traverse of every character a, nest a loop L2 traverse of b (all the characters which is after a), use another loop with the hashset to traverse all the string between a and b which is beginning with a, and determine that if it is a string with no repeat character. Nested a three-tier loop! it lead to the results of Time Limit Exceeded, that means your method is too time-consuming, is not a good method.</p>
<p>Time complexity: O(n^3) . The first is the innermost [i, j) times cycle, the time complexity is O(j-i). And then is every cycle of j which takes [i + 1, n),<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">n</div><div class="line">∑ O(j−i)</div><div class="line">i+1</div></pre></td></tr></table></figure></p>
<p>Finally count the outermost loop [0, n). The time complexity is<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  n-1   n             n-1   (1+n-i)(n-i)</div><div class="line">O( ∑  ( ∑ (j-i))) = O(∑    —————————————— ) = O(n^3)</div><div class="line">  i=0  j=i+1          i=0         2</div></pre></td></tr></table></figure></p>
<p>This transformation process is actually the use of the sum of the first n terms of an arithmetic progression, is too difficult to print the formula on my computer, i am not going to print the detail of the steps .<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Mathematical_Formula/arithmetic%20progression%20_nsum.png?raw=true" alt="the sum of the first n terms of an arithmetic progression"></p>
<p>Space complexity: O(min(n,m)) . n is the length of the string,m is the set of the size of charset.Because there are m didn’t repeat value at most,so the hashset’s size will be m at most.</p>
<p>This method can make a little optimization logically , the main idea is that if from a to b is already containing repeated characters, then a to the characters after b must also contain repeated characters. You can omit those comparisons.</p>
<h3><span id="approach-2sliding-windowk-nearest-neighbor-algorithm">Approach 2：Sliding Window（K-Nearest Neighbor algorithm）</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length();</div><div class="line">        Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</div><div class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, i = <span class="number">0</span>, j = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; n &amp;&amp; j &lt; n) &#123;</div><div class="line">            <span class="comment">// try to extend the range [i, j]</span></div><div class="line">            <span class="keyword">if</span> (!set.contains(s.charAt(j)))&#123;</div><div class="line">                set.add(s.charAt(j++));</div><div class="line">                ans = Math.max(ans, j - i);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                set.remove(s.charAt(i++));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/Sliding_Window_result.png.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong></p>
<p>Method 1 is repeatly to check each sub-string has duplicate character,but in fact, it is unnecessary, the second method is avoid repeated checks, when i ~ j has not repeat, we only need to check s[j + 1] is already in i ~ j characters . Until the characters of j + 1 is already in i~j, we get the longest non-repetitive substring which start with i character. we can stop the calculation When j is not less than n , because at this time [i, j) must be longer than [i + 1, j).</p>
<p>Time complexity: O(2n) = O(n)<br>Space complexity: O(min(m,n)) n is the length of the string,m is the size of the charset.Because there are m didn’t repeat value at most,so the hashset’s size will be m at most.</p>
<p>####Approach 3:Sliding Window Optimized</p>
<p>HashMap<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</div><div class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">// current index of character</span></div><div class="line">        <span class="comment">// try to extend the range [i, j]</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">            <span class="keyword">if</span> (map.containsKey(s.charAt(j))) &#123;</div><div class="line">                i = Math.max(map.get(s.charAt(j)), i);</div><div class="line">            &#125;</div><div class="line">            ans = Math.max(ans, j - i + <span class="number">1</span>);</div><div class="line">            map.put(s.charAt(j), j + <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/Sliding_Window_Optimized_hashmap_result.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong></p>
<p>This method is the improvement of the method two, we use the HashMap to save the characters and his position, when there are duplicate characters appeared, we can directly locate the location of the repeated characters (Note that the location here and the program’s index number is different , it’s first is 1 rather than our program is 0.), compared to the previous i and take a larger value assigned to the new i. Why should we take a large value can see the above solution for the second time.</p>
<p>Time complexity： O(n)<br>Space complexity： O(min(m,n)) the same to the method 2</p>
<p>ASCII 128<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span>[] index = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">128</span>]; <span class="comment">// current index of character</span></div><div class="line">        <span class="comment">// try to extend the range [i, j]</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">            i = Math.max(index[s.charAt(j)], i);</div><div class="line">            ans = Math.max(ans, j - i + <span class="number">1</span>);</div><div class="line">            index[s.charAt(j)] = j + <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/Sliding_Window_Optimized_ascii_result.png?raw=true" alt="efficiency"></p>
<p>The most efficient one, the reason of this method can run more fast than the previous hashmap while they have the same complexity, simply said, in fact of most collection is composed of arrays, hashmap is actually composed by the array and the list , So the array’s search speed will be better than the hashmap search speed.</p>
<p><strong>分析</strong></p>
<p>This method’s principle is almost the same as the previous method which is using hashmap, but this method uses int[] to store key-value pairs, using characters to represent subscripts (yes, characters can be used as subscripts, exactly is Integer character constants can be used as subscript, it will be parsed to ASCII value), the location use as value.<br>Time complexity： O(n)<br>Space complexity： O(m) m is the charset’s size.</p>
<p>If you have a better method or have other opinions on the description of me here, please contact me. Thank you.</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[English-ver]/" data-id="cjo6xygdv00426obj70k55y8l" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-3-Longest-Substring-Without-Repeating-Characters/Record[Chinese-ver]" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[Chinese-ver]/" itemprop="url">
            <img src="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[Chinese-ver]/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[Chinese-ver]/">LeetCode 3.最长的没有重复字符的子字符串 [Chinese ver]</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[Chinese-ver]/">
            <time datetime="2018-07-20T16:00:00.000Z" itemprop="datePublished">2018-07-21</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[Chinese ver]</p>
<h2><span id="3最长的没有重复字符的子字符串">3.最长的没有重复字符的子字符串</span></h2><p>给你一个字符串，得出最长的一个没有重复字符的子字符串的长度。</p>
<p><strong>例子：</strong></p>
<p>给定“abcabcbb”，答案是“abc”，长度为3。</p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[Chinese-ver]/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[Chinese ver]</p>
<h2><span id="3最长的没有重复字符的子字符串">3.最长的没有重复字符的子字符串</span></h2><p>给你一个字符串，得出最长的一个没有重复字符的子字符串的长度。</p>
<p><strong>例子：</strong></p>
<p>给定“abcabcbb”，答案是“abc”，长度为3。</p>
<p>给定“bbbbb”，答案是“b”，长度为1。</p>
<p>给定“pwwkew”，答案是“wke”，长度为3.</p>
<p>注意答案必须是一个子字符串，“pwke”是一个子序列，而不是一个子字符串。</p>
<p>先来一个极其繁琐的算法，一开始没有经过太多的思考，导致不断有没考虑到情况发生，不断的修修改改，成了一个极其冗余的代码。。</p>
<h3><span id="初解">初解</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        HashMap&lt;String,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">        <span class="keyword">int</span> maxSubLength = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> tempLength = <span class="number">0</span>;</div><div class="line">        <span class="keyword">boolean</span> isFirstRepeat = <span class="keyword">true</span>;</div><div class="line">        String beginSub = <span class="string">""</span>;</div><div class="line">        <span class="keyword">int</span> bigStartNum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            beginSub = String.valueOf(s.charAt(i));</div><div class="line">            <span class="keyword">if</span>(map.containsKey(beginSub))&#123;</div><div class="line">                <span class="keyword">if</span>(map.get(beginSub)&gt;bigStartNum)&#123;</div><div class="line">                    tempLength = i - map.get(beginSub);</div><div class="line">                    bigStartNum = map.get(beginSub);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    tempLength = i - bigStartNum;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(tempLength&gt;maxSubLength)&#123;</div><div class="line">                    maxSubLength = tempLength;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(isFirstRepeat)&#123;</div><div class="line">                    tempLength = i;</div><div class="line">                    isFirstRepeat =<span class="keyword">false</span>;</div><div class="line">                    <span class="keyword">if</span>(tempLength&gt;maxSubLength)&#123;</div><div class="line">                    maxSubLength = tempLength;</div><div class="line">                &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                 tempLength = i - bigStartNum;</div><div class="line">                   <span class="keyword">if</span>(tempLength&gt;maxSubLength)&#123;</div><div class="line">                    maxSubLength = tempLength;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            map.put(beginSub,i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>((s.length()-bigStartNum)&gt;maxSubLength)&#123;</div><div class="line">            maxSubLength = (s.length()-bigStartNum-<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(isFirstRepeat)&#123;</div><div class="line">            <span class="keyword">return</span> s.length();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> maxSubLength;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/most_tedious_result.png?raw=true" alt="这代码。。没脸见人"></p>
<p>痛定思过，惨痛的教训告诉我们要深思熟虑后再写代码，这个代码就不分析了，写出来的东西自己都要看不懂了，我连注释都不好意思写了，只是给自己留个教训。。接下来会对这个方法做一个优化和重新构思。</p>
<h3><span id="二次解">二次解</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        HashMap&lt;String,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">		<span class="comment">//max substring's length</span></div><div class="line">        <span class="keyword">int</span> maxSubLength = <span class="number">0</span>;</div><div class="line">		<span class="comment">//the sub character now</span></div><div class="line">        String nowSub = <span class="string">""</span>;</div><div class="line">		<span class="comment">//the bigger index which the string can start</span></div><div class="line">        <span class="keyword">int</span> bigStartNum = -<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            nowSub = String.valueOf(s.charAt(i));</div><div class="line">            <span class="keyword">if</span>(map.containsKey(nowSub))&#123;</div><div class="line">				<span class="comment">//if the character repeat,you can start the string from the larger one of the nowSub occur before this time and bigStartNum.</span></div><div class="line">                bigStartNum = Math.max(map.get(nowSub), bigStartNum);</div><div class="line">            &#125;</div><div class="line">			<span class="comment">//the maxSubLength is the maximum number of the length of bigStartNum to i and old maxSubLength</span></div><div class="line">            maxSubLength = Math.max(i - bigStartNum, maxSubLength);</div><div class="line">            map.put(nowSub,i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> maxSubLength;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>优化之后的代码就很清晰了。重新构思的时候才想到还有一个Math.max()的方法可以用，对api的敏感度还是不够。</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/promote_self.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法的原理就是将每一个字符进行遍历，为了避免多重循环嵌套，我们使用了hashmap来将时间成本换成空间成本，通过hashmap来判断前面是否有这个字符，并存储他的序号信息。那怎么得到最长的子字符串呢？其实可以分成以下几种情况：<br>我们在前一个重复的字符加上(p)来表示,后一个重复的字符加上(n)来表示<br>1.这个字符是第一个重复的字符a，长度应该是从开始到a(n)的前一位。<br>2.这个字符不是第一个重复的字符a,上一个重复的字符为b，如果a(p)在b(p)的后面那么长度是两个a之间的长度，如果a(p)在b(p)的前面，那么长度是a(n)到b(p)之间(因为a(n)到a(p)之间包含了两个b，这样的字符串是不合规矩的)<br>3.这个字符没有出现重复的情况，长度就是这个字符到上一个重复字符a(p)出现的位置加一。</p>
<p>整理一下现在的情况，其实以上的条件都可以整理成一种方式来计算，因为子字符串必须是连续的，所以就是计算当前字符到上一个任意重复字符点的长度，然后取出最大的一个。</p>
<p>时间复杂度 ： O(n) .<br>空间复杂度 ： O(n) .</p>
<p>接下来我们看一下这类题目的几类解法。</p>
<h3><span id="方法一暴力循环">方法一：暴力循环</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length();</div><div class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= n; j++)</div><div class="line">                <span class="keyword">if</span> (allUnique(s, i, j)) ans = Math.max(ans, j - i);</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">	<span class="comment">//judge that all the characters in s is unique.</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">allUnique</span><span class="params">(String s, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt; end; i++) &#123;</div><div class="line">            Character ch = s.charAt(i);</div><div class="line">            <span class="keyword">if</span> (set.contains(ch)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            set.add(ch);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/brute_result.png?raw=true" alt="扎心了老铁"></p>
<p><strong>分析</strong><br>这个方法的原理很简单，就是最外层的循环L1遍历每一个字符a，嵌套一个遍历a之后所有字符b的循环L2，在L2中又用了一个循环L3用hashset的方式来遍历a到b间以a为开头的所有字符串，并判断是否是没有重复值的字符串。嵌套了三层的循环！！！直接导致了Time Limit Exceeded 的结果，表示你这个方法太耗时了，不予通过。<br>时间复杂度 ： O(n^3) . 首先是最内层的[i,j)次的循环，时间复杂度为O(j-i)。然后是每一个j的循环[i+1,n),<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">n</div><div class="line">∑ O(j−i)</div><div class="line">i+1</div></pre></td></tr></table></figure></p>
<p>最后算上最外层的a的循环[0,n).时间复杂度为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  n-1   n             n-1   (1+n-i)(n-i)</div><div class="line">O( ∑  ( ∑ (j-i))) = O(∑    —————————————— ) = O(n^3)</div><div class="line">  i=0  j=i+1          i=0         2</div></pre></td></tr></table></figure></p>
<p>这个转化过程呢其实就是利用的等差数列的n项和公式，太难打公式了，中间步骤就不详细写了。<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Mathematical_Formula/arithmetic%20progression%20_nsum.png?raw=true" alt="等差数列前n项和"></p>
<p>空间复杂度 ： O(min(n,m)) . n就是字符串的长度，m是字母表的字符集的值。因为我们最多就可能有m个不重复的值，所以hashset的size最大也只会是m.</p>
<p>这个方法在逻辑上可以稍微做一个优化，主要的思路就是其实如果a到b已经是包含重复的字符了，那么a到b后面的字符也一定是包含重复字符的。可以省略了那些比较。</p>
<h3><span id="方法二滑窗算法也称k近邻算法">方法二：滑窗算法（也称K近邻算法）</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length();</div><div class="line">        Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</div><div class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, i = <span class="number">0</span>, j = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; n &amp;&amp; j &lt; n) &#123;</div><div class="line">            <span class="comment">// try to extend the range [i, j]</span></div><div class="line">            <span class="keyword">if</span> (!set.contains(s.charAt(j)))&#123;</div><div class="line">                set.add(s.charAt(j++));</div><div class="line">                ans = Math.max(ans, j - i);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                set.remove(s.charAt(i++));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/Sliding_Window_result.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>方法一重复检查每一个子字符串是否重复，其实没有必要这样，方法二就是避免了多次重复检查，当i~j没有重复时，我们只需要检测s[j + 1]是否和i~j中的字符重复。直到j+1的字符重复了，我们就得到了i字符的最长不重复字符。当j不小于n时就可以停止计算了，因为此时的[i,j)肯定要长于[i+1,j)。</p>
<p>时间复杂度 ： O(2n) = O(n)<br>空间复杂度 ： O(min(m,n)) n就是字符串的长度，m是字母表的字符集的值。因为我们最多就可能有m个不重复的值，所以hashset的size最大也只会是m.</p>
<h3><span id="方法三改良后的滑窗算法">方法三：改良后的滑窗算法</span></h3><p>HashMap<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</div><div class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">// current index of character</span></div><div class="line">        <span class="comment">// try to extend the range [i, j]</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">            <span class="keyword">if</span> (map.containsKey(s.charAt(j))) &#123;</div><div class="line">                i = Math.max(map.get(s.charAt(j)), i);</div><div class="line">            &#125;</div><div class="line">            ans = Math.max(ans, j - i + <span class="number">1</span>);</div><div class="line">            map.put(s.charAt(j), j + <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/Sliding_Window_Optimized_hashmap_result.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法是对方法二的改进，我们使用HashMap来保存出现的字符和他的位置，当出现重复字符时，我们可以直接定位到重复字符的位置(注意这里的位置和程序上的序号是不同的，他的第一位就是1而不是我们程序上的0.)，对比以前的i取较大的值赋值为新的i。为什么取大值可以看上面的二次解</p>
<p>时间复杂度 ： O(n)<br>空间复杂度 ： O(min(m,n)) 和方法二相同</p>
<p>ASCII 128<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span>[] index = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">128</span>]; <span class="comment">// current index of character</span></div><div class="line">        <span class="comment">// try to extend the range [i, j]</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">            i = Math.max(index[s.charAt(j)], i);</div><div class="line">            ans = Math.max(ans, j - i + <span class="number">1</span>);</div><div class="line">            index[s.charAt(j)] = j + <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/3.%20Longest%20Substring%20Without%20Repeating%20Characters/Images/Sliding_Window_Optimized_ascii_result.png?raw=true" alt="效率"></p>
<p>效率最快的一种，在同样的复杂度上为什么会比上一种hashmap的方法快那么多呢，简单点说，其实集合大部分都是由数组构成的，hashmap其实就是由数组加链表封装而成的，所以在速度上数组查找会优于hashmap查找。</p>
<p><strong>分析</strong><br>这个方法原理和上一个使用hashmap的方法大致相同，但是它使用的是int[]来存储键值对，使用字符来做下标(是的，字符可以做下标，准确的来说是整型字符常量可以做下标，会被解析为他的ASCII码值)，位置来做值。</p>
<p>时间复杂度 ： O(n)<br>空间复杂度 ： O(m) m是字符表的大小</p>
<p>如果你有更好的办法或者对我这里的描述有其他看法，请联系我。谢谢</p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=true" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/07/21/3-Longest-Substring-Without-Repeating-Characters/Record[Chinese-ver]/" data-id="cjo6xygds003z6objnmq4y4it" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-2-Add-Two-Num/Record[English-ver]" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/07/15/2-Add-Two-Num/Record[English-ver]/" itemprop="url">
            <img src="/2018/07/15/2-Add-Two-Num/Record[Chinese-ver]/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/07/15/2-Add-Two-Num/Record[English-ver]/">LeetCode 2. Add Two Numbers [English ver]</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/07/15/2-Add-Two-Num/Record[English-ver]/">
            <time datetime="2018-07-14T16:00:00.000Z" itemprop="datePublished">2018-07-15</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[English ver]</p>
<h2><span id="2-add-two-numbers">2. Add Two Numbers</span></h2><p>Question ：You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.<br>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p>
<p>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>Output: 7 -&gt; 0 -&gt; 8</p>
<h3><span id="approach-1">Approach 1：</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</div><div class="line">    ListNode dummyHead = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</div><div class="line">    ListNode p = l1, q = l2, curr = dummyHead;</div><div class="line">    <span class="keyword">int</span> carry = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (p != <span class="keyword">null</span> || q != <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">int</span> x = (p != <span class="keyword">null</span>) ? p.val : <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> y = (q != <span class="keyword">null</span>) ? q.val : <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> sum = carry + x + y;</div><div class="line">        carry = sum / <span class="number">10</span>;</div><div class="line">        curr.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</div><div class="line">        curr = curr.next;</div><div class="line">        <span class="keyword">if</span> (p != <span class="keyword">null</span>) p = p.next;</div><div class="line">        <span class="keyword">if</span> (q != <span class="keyword">null</span>) q = q.next;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (carry &gt; <span class="number">0</span>) &#123;</div><div class="line">        curr.next = <span class="keyword">new</span> ListNode(carry);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> dummyHead.next;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/07/15/2-Add-Two-Num/Record[English-ver]/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[English ver]</p>
<h2><span id="2-add-two-numbers">2. Add Two Numbers</span></h2><p>Question ：You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.<br>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p>
<p>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>Output: 7 -&gt; 0 -&gt; 8</p>
<h3><span id="approach-1">Approach 1：</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</div><div class="line">    ListNode dummyHead = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</div><div class="line">    ListNode p = l1, q = l2, curr = dummyHead;</div><div class="line">    <span class="keyword">int</span> carry = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (p != <span class="keyword">null</span> || q != <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">int</span> x = (p != <span class="keyword">null</span>) ? p.val : <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> y = (q != <span class="keyword">null</span>) ? q.val : <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> sum = carry + x + y;</div><div class="line">        carry = sum / <span class="number">10</span>;</div><div class="line">        curr.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</div><div class="line">        curr = curr.next;</div><div class="line">        <span class="keyword">if</span> (p != <span class="keyword">null</span>) p = p.next;</div><div class="line">        <span class="keyword">if</span> (q != <span class="keyword">null</span>) q = q.next;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (carry &gt; <span class="number">0</span>) &#123;</div><div class="line">        curr.next = <span class="keyword">new</span> ListNode(carry);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> dummyHead.next;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/2%20Add%20Two%20Num/Images/method1result.png?raw=true" alt="Efficiency"></p>
<h4><span id="analysis">Analysis</span></h4><p>Actually, the problem is easy to resolved if you are familiar with the use of the list and the logic of the arithmetic . Plus every bit base on decimal, note that the addition of the carry will only be 0 or 1, because even if you use the two largest number 9 +9 in finally you only get carry 1, then use the largest number 9 +9 + 1 will only Get 19, the carry is 1 too. So the main logic is (the sum of two numbers )sum / 10 is the carry, sum% 10 is the number of the this bit . DummyHead is a fake data header, used to do an initialization, it is possible if you don’t want to use it, but in the internal logic you need to deal with the difference logic between the first bit of the result and the number of subsequent .<br>Note that there are several special cases. 1. The length of one list is longer than the other. 2. One of the lists is empty. 3. There is still have a carry in the last bit</p>
<p>Time complexity: O (max (m, n)). The total number of cycles is the largest number between m and n.<br>Space complexity: O (max (m, n)). The length of the new list we create is the maximum length of m, n, plus a dummy header.</p>
<h3><span id="approach-2">Approach 2</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Definition for singly-linked list.</span></div><div class="line"><span class="comment"> * public class ListNode &#123;</span></div><div class="line"><span class="comment"> *     int val;</span></div><div class="line"><span class="comment"> *     ListNode next;</span></div><div class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></div><div class="line"><span class="comment"> * &#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</div><div class="line">        ListNode ln1 = l1, ln2 = l2, head = <span class="keyword">null</span>, node = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>, remainder = <span class="number">0</span>, sum = <span class="number">0</span>;</div><div class="line">        head = node = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</div><div class="line"></div><div class="line">        <span class="keyword">while</span>(ln1 != <span class="keyword">null</span> || ln2 != <span class="keyword">null</span> || carry != <span class="number">0</span>) &#123;</div><div class="line">            sum = (ln1 != <span class="keyword">null</span> ? ln1.val : <span class="number">0</span>) + (ln2 != <span class="keyword">null</span> ? ln2.val : <span class="number">0</span>) + carry;</div><div class="line">            carry = sum / <span class="number">10</span>;</div><div class="line">            remainder = sum % <span class="number">10</span>;</div><div class="line">            node = node.next = <span class="keyword">new</span> ListNode(remainder);</div><div class="line">            ln1 = (ln1 != <span class="keyword">null</span> ? ln1.next : <span class="keyword">null</span>);</div><div class="line">            ln2 = (ln2 != <span class="keyword">null</span> ? ln2.next : <span class="keyword">null</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> head.next;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/2%20Add%20Two%20Num/Images/method2result.png?raw=true" alt="Efficience"></p>
<p>This is someone else’s approach, actually these two methods in the overall thinking is almost the same ,but this approach is more faster than approach 1 . why ? I think the approach 1 is always create a int x,y and other objects in the cycle , because the timing was based on thousands of examples , result a gap about 20ms. This is purely personal think , if you have more correct ideas, or somewhere is an argument about the reason this gap, please tell me. Thank you.</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github [<a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/07/15/2-Add-Two-Num/Record[English-ver]/" data-id="cjo6xygcy002e6objeurv54ci" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/09/12/6-ZigZag-Conversion/Record-en/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/09/12/6-ZigZag-Conversion/Record-cn/titleThumb.jpg)" alt="LeetCode 6. ZigZag Conversion" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/09/12/6-ZigZag-Conversion/Record-en/" class="title">LeetCode 6. ZigZag Conversion</a></p>
                            <p class="item-date"><time datetime="2018-09-11T16:00:00.000Z" itemprop="datePublished">2018-09-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/09/12/6-ZigZag-Conversion/Record-cn/titleThumb.jpg)" alt="LeetCode 6. 锯齿形转换" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/" class="title">LeetCode 6. 锯齿形转换</a></p>
                            <p class="item-date"><time datetime="2018-09-11T16:00:00.000Z" itemprop="datePublished">2018-09-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/titleThumb.jpg)" alt="LeetCode 5.最长的回文字符串" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/" class="title">LeetCode 5.最长的回文字符串</a></p>
                            <p class="item-date"><time datetime="2018-08-30T16:00:00.000Z" itemprop="datePublished">2018-08-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/titleThumb.jpg)" alt="LeetCode 5.Longest Palindromic Substring" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/" class="title">LeetCode 5.Longest Palindromic Substring</a></p>
                            <p class="item-date"><time datetime="2018-08-30T16:00:00.000Z" itemprop="datePublished">2018-08-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/titleThumb.jpg)" alt="LeetCode 4. Median of Two Sorted Arrays [English ver]" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/" class="title">LeetCode 4. Median of Two Sorted Arrays [English ver]</a></p>
                            <p class="item-date"><time datetime="2018-08-14T16:00:00.000Z" itemprop="datePublished">2018-08-15</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/">Chinese</a><span class="category-list-count">13</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Algorithm/">Algorithm</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Algorithm/Common/">Common</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/">Android</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/Error/">Error</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/UI/">UI</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/UI/Custom-View/">Custom View</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/版本差异/">版本差异</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/版本管理/">版本管理</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Java/">Java</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Java/Data-Structure/">Data Structure</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/English/Algorithm/">Algorithm</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a><span class="category-list-count">6</span></li></ul></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chinese/">Chinese</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Custom-View/">Custom View</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/">English</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/">Error</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/">UI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本差异/">版本差异</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本管理/">版本管理</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Algorithm/" style="font-size: 20px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 14px;">Android</a> <a href="/tags/Chinese/" style="font-size: 20px;">Chinese</a> <a href="/tags/Custom-View/" style="font-size: 10px;">Custom View</a> <a href="/tags/Data-Structure/" style="font-size: 10px;">Data Structure</a> <a href="/tags/English/" style="font-size: 16px;">English</a> <a href="/tags/Error/" style="font-size: 10px;">Error</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/LeetCode/" style="font-size: 18px;">LeetCode</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/版本差异/" style="font-size: 12px;">版本差异</a> <a href="/tags/版本管理/" style="font-size: 10px;">版本管理</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <!-- ad start -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9191109011370892",
    enable_page_level_ads: true
  });
</script>
        <!-- ad end -->
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2018 LeonChen<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. 
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>