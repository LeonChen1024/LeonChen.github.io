<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>LeonChen&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="LeonChen&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="LeonChen&#39;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LeonChen&#39;s Blog">
    

    

    
        <link rel="icon" href="/images/Facicon.png" />
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9191109011370892",
    enable_page_level_ads: true
  });
</script>
    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-111687087-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">LeonChen&#39;s Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">Leon Chen</h2>
            <h3 id="title">Android Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>XiaMen, China</span>
            <a id="follow" target="_blank" href="https://github.com/LeonChen1024">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                23
                <span>posts</span>
            </div>
            <div class="article-info-block">
                13
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/LeonChen1024/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/en" target="_blank" title="english" class=tooltip>
                            <i class="fa fa-english"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
         
    </div>
</aside>

            
            <section id="main">
    <article id="post-S1ep1-The-macgic-of-LRU-Cache" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/" itemprop="url">
            <img src="/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/">贪婪算法</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/">
            <time datetime="2018-12-22T16:00:00.000Z" itemprop="datePublished">2018-12-23</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Android/">Android</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Android/Algorithm/">Algorithm</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Android/">Android</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/Optimize/">Optimize</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><h1><span id="lru-缓存的魔力">LRU 缓存的魔力</span></h1><h2><span id="场景">场景</span></h2><p>假设这么一个情况,当你需要多次展示同一个图片的时候,如果你重复从硬盘中加载图片的话,那么会造成资源的浪费,甚至可能会OOM.</p>
<p>这个时候我们可以使用 cache 来避免这种情况,我们只从硬盘中加载一次到内存中,然后在需要的时候反复使用这个照片.</p>
<p>但是,当这个 cache 里的资源已经装满的时候,那么我们就必须移除cache里面的某些数据,来给要加入的数据腾出空间.</p>
<h2><span id="解决方案">解决方案</span></h2><p>在这种情况下,我们应该选择移除哪些资源才是最有优的呢?显而易见的,我们应该移除之后不会用到的资源,还有就是间隔最久才会用到的资源.这里有一个详细的最优算法如下:<br>$$<br>T = m * T_m + T_h + E<br>$$<br>其中:</p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<h1><span id="lru-缓存的魔力">LRU 缓存的魔力</span></h1><h2><span id="场景">场景</span></h2><p>假设这么一个情况,当你需要多次展示同一个图片的时候,如果你重复从硬盘中加载图片的话,那么会造成资源的浪费,甚至可能会OOM.</p>
<p>这个时候我们可以使用 cache 来避免这种情况,我们只从硬盘中加载一次到内存中,然后在需要的时候反复使用这个照片.</p>
<p>但是,当这个 cache 里的资源已经装满的时候,那么我们就必须移除cache里面的某些数据,来给要加入的数据腾出空间.</p>
<h2><span id="解决方案">解决方案</span></h2><p>在这种情况下,我们应该选择移除哪些资源才是最有优的呢?显而易见的,我们应该移除之后不会用到的资源,还有就是间隔最久才会用到的资源.这里有一个详细的最优算法如下:<br>$$<br>T = m * T_m + T_h + E<br>$$<br>其中:</p>
<p>T = 平均内存引用时间</p>
<p>m = 没选中的概率 = 1 - (选中的概率)</p>
<p> T_m  = 当没选中的时候主内存访问的时间(或者,如果是多级缓存的时候,还要算上更低级的缓存内存引用时间的平均值)</p>
<p> T_h  = 延迟 : 当选中该资源的时候缓存引用的时间</p>
<p>E = 各种副作用,比如多处理器系统中的 排队效应</p>
<h3><span id="lru">LRU</span></h3><p>要得到一个完美的方法是很复杂的,这里我们介绍一个常用的算法,叫做 LRU cache (least recently used),它的原理很简单,就是把使用的元素提到队列的开始,这样最近使用的资源将会在开始的地方,而那些长期未被使用的资源将会在后面,然后当空间不够的时候将会从后面开始释放资源.LRU 的思路是最近使用的资源他们就推测他在未来也有更大的可能性会被使用.</p>
<p>LRU 并不是一个普通的容器.他需要一些策略来实现他的要求.</p>
<ul>
<li>LruCache 由键值对组成 , 形如 LruCache<key,value></key,value></li>
<li><p>它需要有一个最大值,要注意它的取值,太小的话那么缓存不了多少东西,会导致频繁的重新读取,导致失去缓存的意义,太大的话可能会导致 oom.所以最好是根据你的应用当前可用的内存来决定这个大小.</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//set the max memory used by lru</span></div><div class="line"></div><div class="line">ActivityManager am = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);</div><div class="line"><span class="keyword">int</span> availMemInBytes = am.getMemoryClass() * <span class="number">1024</span> * <span class="number">1024</span>;</div><div class="line"><span class="comment">//8 is a common value , we can twist it by how much memory can we app used,</span></div><div class="line"><span class="comment">//and what kind of the phone we run on.</span></div><div class="line">LruCache bitmapCache = <span class="keyword">new</span> LruCache&lt;String,Bitmap&gt;(availMemInBytes / <span class="number">8</span>);</div></pre></td></tr></table></figure>
<p>其中 8 是一个比较通用的值,当然你可以根据你的应用所占用的内存来进行调整,还有运行的机型的限制等.</p>
</li>
</ul>
<ul>
<li><p>我们还需要知道里面存储的每一个对象的值的大小.比如我们可以</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Public <span class="class"><span class="keyword">class</span> <span class="title">ThumbnailCache</span> <span class="keyword">extends</span> <span class="title">LruCache</span>&lt;<span class="title">String</span>,<span class="title">Bitmap</span>&gt;</span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">sizeOf</span><span class="params">(String key,Bitmap value)</span></span>&#123;</div><div class="line">        <span class="comment">//return the size of the in-memory bitmap,</span></div><div class="line">        <span class="comment">//counted against maxSizeBytes</span></div><div class="line">        <span class="keyword">return</span> value.getByteCount();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>当我们从 LruCache 中获取数据的时候,需要对数据已经被回收或者没有进入过缓存的情况做处理.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// get data from Lru and put data to Lru</span></div><div class="line"></div><div class="line">Bitmap bmpToDraw = mCache.get(filename);</div><div class="line"><span class="keyword">if</span>(bmpToDraw == <span class="keyword">null</span>)&#123;</div><div class="line">    bmpToDraw = BitmapFactory.decodeFile(filename);</div><div class="line">    mCache.put(filename,bmpToDraw);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>还要注意的一点是,当你存进一个较大的对象的时候,有时候 LruCache 会同时清理多个资源来给这个对象腾出位置.</p>
<h2><span id="resource">Resource</span></h2><p><a href="https://www.youtube.com/playlist?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE" target="_blank" rel="external">https://www.youtube.com/playlist?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE</a></p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=false" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/" data-id="cjq0wmyom000iuabjz3un4y6t" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-Greedy-Algorithm" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/12/03/Greedy-Algorithm/" itemprop="url">
            <img src="/2018/12/03/Greedy-Algorithm/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/12/03/Greedy-Algorithm/">贪婪算法</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/12/03/Greedy-Algorithm/">
            <time datetime="2018-12-02T16:00:00.000Z" itemprop="datePublished">2018-12-03</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/Common/">Common</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><h1><span id="贪婪算法">贪婪算法</span></h1><p>贪婪算法(Greedy Algorithm)也叫算贪心法,贪婪法.它是一个遵循启发式解决问题的算法范式.它的核心思想就是通过在每一步的选择中都选用当前步骤下最优的选择,期望结果是最优的算法.如 <a href="https://zh.wikipedia.org/wiki/%E6%97%85%E8%A1%8C%E6%8E%A8%E9%94%80%E5%91%98%E9%97%AE%E9%A2%98" target="_blank" rel="external">旅行推销员问题</a>.</p>
<p>贪婪算法尤其适用于有最优子结构的问题中,最优子结构的意思是局部的最优解可以导出全局的最优解.贪婪算法与<a href="https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92" target="_blank" rel="external">动态规划</a> 的不同在于贪婪算法对每一个子问题都作出选择,不能回退;动态规划则会保存以前的运算结果,根据以前的结果对当前进行选择,可以回退.</p>
<p>贪婪算法可以解决一些<a href="https://zh.wikipedia.org/wiki/%E6%9C%80%E4%BC%98%E5%8C%96" target="_blank" rel="external">最优化</a>(如最大值最小值等)问题,比如求图中的<a href="https://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91" target="_blank" rel="external">最小生成树</a>、求<a href="https://zh.wikipedia.org/wiki/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81" target="_blank" rel="external">哈夫曼编码</a>…其他大多数的情况都不适用贪婪算法,一旦一个问题可以使用贪婪算法来解决,那么贪婪算法一般是解决这个问题的最好办法.由于贪婪算法的高效性以及其答案比较接近最有结果,也可以作为辅助算法或直接解决一些结果要求不那么精确的问题.</p>
<h2><span id="原理">原理</span></h2><h3><span id="步骤">步骤</span></h3><ol>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/12/03/Greedy-Algorithm/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<h1><span id="贪婪算法">贪婪算法</span></h1><p>贪婪算法(Greedy Algorithm)也叫算贪心法,贪婪法.它是一个遵循启发式解决问题的算法范式.它的核心思想就是通过在每一步的选择中都选用当前步骤下最优的选择,期望结果是最优的算法.如 <a href="https://zh.wikipedia.org/wiki/%E6%97%85%E8%A1%8C%E6%8E%A8%E9%94%80%E5%91%98%E9%97%AE%E9%A2%98" target="_blank" rel="external">旅行推销员问题</a>.</p>
<p>贪婪算法尤其适用于有最优子结构的问题中,最优子结构的意思是局部的最优解可以导出全局的最优解.贪婪算法与<a href="https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92" target="_blank" rel="external">动态规划</a> 的不同在于贪婪算法对每一个子问题都作出选择,不能回退;动态规划则会保存以前的运算结果,根据以前的结果对当前进行选择,可以回退.</p>
<p>贪婪算法可以解决一些<a href="https://zh.wikipedia.org/wiki/%E6%9C%80%E4%BC%98%E5%8C%96" target="_blank" rel="external">最优化</a>(如最大值最小值等)问题,比如求图中的<a href="https://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91" target="_blank" rel="external">最小生成树</a>、求<a href="https://zh.wikipedia.org/wiki/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81" target="_blank" rel="external">哈夫曼编码</a>…其他大多数的情况都不适用贪婪算法,一旦一个问题可以使用贪婪算法来解决,那么贪婪算法一般是解决这个问题的最好办法.由于贪婪算法的高效性以及其答案比较接近最有结果,也可以作为辅助算法或直接解决一些结果要求不那么精确的问题.</p>
<h2><span id="原理">原理</span></h2><h3><span id="步骤">步骤</span></h3><ol>
<li><p>建立数学模型来描述问题,并建立一个备选答案区</p>
</li>
<li><p>把求解的问题分成若干个子问题,</p>
</li>
<li><p>使用一个选择函数对每个子问题求解最优解,并判断是否可用于整体问题</p>
</li>
<li><p>把所有子问题的最优解合成一个整的解</p>
</li>
</ol>
<h3><span id="适用情况">适用情况</span></h3><p>贪婪算法适用于一些数学问题等,大部分适用的问题都有两个特点:</p>
<h4><span id="greedy-choice-property-贪婪选择的属性">Greedy choice property (贪婪选择的属性)</span></h4><p>我们可以在每个子问题找出最好的选择然后进行总结.贪婪算法可能会根据迄今为止已经做的选择进行计算,但是却不会考虑之后子问题的选择.它将一个大的问题分解成小的问题并一个一个进行迭代计算.换句话说,贪婪算法不会重新考虑它已经得出的选择.这是它和  <a href="https://en.wikipedia.org/wiki/Dynamic_programming" target="_blank" rel="external">dynamic programming</a> 的主要区别,动态规划会详尽的计算并确保得到最优解,在一步之后,动态规划会根据之前所有得到的选择进行下一个选择,并可能会重新对之前步骤的算法路径进行修改.</p>
<h4><span id="optimal-substructure-最优子结构">Optimal substructure (最优子结构)</span></h4><p>这个问题要包含<a href="https://en.wikipedia.org/wiki/Optimal_substructure" target="_blank" rel="external">optimal substructure</a>(即这个问题的最优解包含了它的子问题的最优解)</p>
<p>如以下几种类型的问题</p>
<h4><span id="matroids-拟阵">Matroids (拟阵)</span></h4><p><a href="https://en.wikipedia.org/wiki/Matroid" target="_blank" rel="external">matroid</a>(拟阵) 是一个数学上的结构,它将<a href="https://en.wikipedia.org/wiki/Linear_independence" target="_blank" rel="external">linear independence</a> (线性无关)的概念从 <a href="https://en.wikipedia.org/wiki/Vector_spaces" target="_blank" rel="external">vector spaces</a> (向量空间)推广到了任意的集合.如果一个最优解问题有一个拟阵结构,那么贪婪算法是最佳的解决办法.</p>
<h4><span id="submodular-functions子模块函数">(子模块函数)</span></h4><p>一个函数 $f$ 定义了当集合 $\Omega$ 的所有子集合 $S,T \subseteq \Omega$ 都满足 $f(S)+f(T)\geq f(S\cup T)+f(S\cap T)$ 的情况即为子模块. </p>
<p>假设有人想要找到一个集合 $S$ 使得函数 $f$ 最大.贪婪算法将会通过逐个添加在每一步中使得 $f$ 增加最多的元素,产生一个结果至少是  $(1-1/e)\max _{X\subseteq \Omega }f(X)$ ??todo. 所以,贪婪算法至少得出最优解的 $(1-1/e) \approx 0.63$倍的解. </p>
<h4><span id="其他一些相对可以使用的问题">其他一些相对可以使用的问题</span></h4><ul>
<li><a href="https://en.wikipedia.org/wiki/Set_cover_problem#Greedy_algorithm" target="_blank" rel="external">Set cover</a></li>
<li>The <a href="https://en.wikipedia.org/wiki/Steiner_tree_problem" target="_blank" rel="external">Steiner tree problem</a></li>
<li><a href="https://en.wikipedia.org/wiki/Load_balancing_(computing" target="_blank" rel="external">Load balancing</a>)<a href="https://en.wikipedia.org/wiki/Greedy_algorithm#cite_note-9" target="_blank" rel="external">[9]</a></li>
<li><a href="https://en.wikipedia.org/wiki/Independent_set_(graph_theory" target="_blank" rel="external">Independent set</a>#Approximation_algorithms)</li>
</ul>
<p>这些问题也可以使用贪婪算法,但不是最好的解法,他们在最差的情况下,可能会得到很差的结果. </p>
<h3><span id="失败的情况">失败的情况</span></h3><p>在很多其他问题上,贪婪算法无法产生最优解,甚至可能产生一个最坏的解决方案.比如之前提到的  <a href="https://en.wikipedia.org/wiki/Traveling_salesman_problem" target="_blank" rel="external">traveling salesman problem</a> :对每一个城市都要计算一个最近的邻居,这种方式可能会产生一个最坏的路程.</p>
<p>比如下图,贪婪算法只考虑到下一步的最优解,但是却没有考虑到之后的解决方案,导致实际上得出的不是一个最优解.</p>
<p><img src="/2018/12/03/Greedy-Algorithm/Greedy-search-path-example.gif" alt="Greedy-search-path-example"></p>
<h2><span id="application">Application</span></h2><p>贪婪法基本上（但并不是一定）不适用于求全局最优解，因为他通常没有遍历所有的数据。他们太早给出了肯定的选择使得他们无法从所有的解法中找到最优解。比如，使用 <a href="https://en.wikipedia.org/wiki/Greedy_coloring" target="_blank" rel="external">greedy coloring</a> 算法来解决  <a href="https://en.wikipedia.org/wiki/Graph_coloring_problem" target="_blank" rel="external">graph coloring problem</a> 以及所有的  <a href="https://en.wikipedia.org/wiki/NP-complete" target="_blank" rel="external">NP-complete</a> 问题。尽管如此，贪婪法还是很有用的，因为他们容易被考虑到并且通常情况下会给出一个比较好的解法。</p>
<p>如果一个贪婪算法可以被证明是某个问题的全局最优解法，他通常情况下就会成为优先选择的方法，因为它比其他的最优解方法如 <a href="https://en.wikipedia.org/wiki/Dynamic_programming" target="_blank" rel="external">dynamic programming</a> 要快。这种例子有使用  <a href="https://en.wikipedia.org/wiki/Kruskal%27s_algorithm" target="_blank" rel="external">Kruskal’s algorithm</a> 和 <a href="https://en.wikipedia.org/wiki/Prim%27s_algorithm" target="_blank" rel="external">Prim’s algorithm</a> 找到<a href="https://en.wikipedia.org/wiki/Minimum_spanning_tree" target="_blank" rel="external">minimum spanning trees</a>,还有找到最优  <a href="https://en.wikipedia.org/wiki/Huffman_tree" target="_blank" rel="external">Huffman trees</a>.</p>
<p>贪心法也使用于 网络 <a href="https://en.wikipedia.org/wiki/Routing" target="_blank" rel="external">路由</a> 中。使用贪心路由，消息会被发送到距离目标节点“最近”的相邻节点。一个节点位置的定义（还有“最近”的含义）也许会取决于它的物理位置，如同在 <a href="https://en.wikipedia.org/wiki/Ad_hoc_network" target="_blank" rel="external">ad hoc networks</a> 中使用  <a href="https://en.wikipedia.org/wiki/Geographic_routing" target="_blank" rel="external">geographic routing</a> . 位置也可能会使一个人造的结构如同在  <a href="https://en.wikipedia.org/wiki/Small_world_routing" target="_blank" rel="external">small world routing</a> 和 <a href="https://en.wikipedia.org/wiki/Distributed_hash_table" target="_blank" rel="external">distributed hash table</a> 中.</p>
<h2><span id="reference">Reference</span></h2><p><a href="https://en.wikipedia.org/wiki/Greedy_algorithm" target="_blank" rel="external">https://en.wikipedia.org/wiki/Greedy_algorithm</a></p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=false" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/12/03/Greedy-Algorithm/" data-id="cjq0wmyol000huabj8gnukre1" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-7-Reverse-Integer/Record-en" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/12/02/7-Reverse-Integer/Record-en/" itemprop="url">
            <img src="/2018/12/02/7-Reverse-Integer/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/12/02/7-Reverse-Integer/Record-en/">LeetCode 7. Reverse Integer</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/12/02/7-Reverse-Integer/Record-en/">
            <time datetime="2018-12-01T16:00:00.000Z" itemprop="datePublished">2018-12-02</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[English ver]Easy</p>
<h1><span id="7-reverse-integer">7. Reverse Integer</span></h1><p>Reverse digits of an integer.</p>
<p>Example1: x = 123, return 321<br>Example2: x = -123, return -321</p>
<p>Note:<br>The input is assumed to be a 32-bit signed integer. Your function should return 0 when the reversed integer overflows.</p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/12/02/7-Reverse-Integer/Record-en/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[English ver]Easy</p>
<h1><span id="7-reverse-integer">7. Reverse Integer</span></h1><p>Reverse digits of an integer.</p>
<p>Example1: x = 123, return 321<br>Example2: x = -123, return -321</p>
<p>Note:<br>The input is assumed to be a 32-bit signed integer. Your function should return 0 when the reversed integer overflows.</p>
<hr>
<p>spoilers</p>
<p>Have you thought about this?<br>Here are some good questions to ask before coding. Bonus points for you if you have already thought through this!</p>
<p>If the integer’s last digit is 0, what should the output be? ie, cases such as 10, 100.</p>
<p>Did you notice that the reversed integer might overflow? Assume the input is a 32-bit integer, then the reverse of 1000000003 overflows. How should you handle such cases?</p>
<p>For the purpose of this problem, assume that your function returns 0 when the reversed integer overflows.</p>
<hr>
<h3><span id="approach-1-use-stringbuilder">Approach 1 use StringBuilder:</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line"></div><div class="line">	    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">          <span class="comment">//judge x is negative or not</span></div><div class="line">	        <span class="keyword">boolean</span> isNegative = <span class="keyword">false</span>;</div><div class="line">	        <span class="keyword">int</span> result =<span class="number">0</span>;</div><div class="line">	        <span class="keyword">if</span> (x&lt;<span class="number">0</span>)&#123;</div><div class="line">	            isNegative = <span class="keyword">true</span>;</div><div class="line">	            x = Math.abs(x);</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        StringBuilder oldSB = <span class="keyword">new</span> StringBuilder(String.valueOf(x));</div><div class="line">	        StringBuilder newSB = <span class="keyword">new</span> StringBuilder();</div><div class="line">          <span class="comment">//reverse the x use StringBuilder</span></div><div class="line">	        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; oldSB.length() ; i++)&#123;</div><div class="line">	            newSB.append(oldSB.charAt(oldSB.length()-i-<span class="number">1</span>));</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        <span class="keyword">try</span>&#123;</div><div class="line">	            result = Integer.valueOf(newSB.toString());</div><div class="line">	        &#125;</div><div class="line">	        <span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">              <span class="comment">//if overflows return the result 0</span></div><div class="line">	            <span class="keyword">return</span> result;</div><div class="line">	        &#125;</div><div class="line">	        <span class="keyword">if</span> (isNegative)&#123;</div><div class="line">	            result = -result;</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        <span class="keyword">return</span> result;</div><div class="line">	    &#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/7.%20Reverse%20Integer/Images/StringBuilderResult.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This approach turn Integer to a positive Integer and reverse it with StringBuilder. use try catch to deal with the overflows . if the input is negative , we can change the result to negative in last.</p>
<p>Time complexity ： O(n) 。n is the digit of the    x<br>Space complexity ： O(1) .</p>
<h3><span id="approach-2-use-int">Approach 2 use int:</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution1</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">	    <span class="keyword">int</span> result = <span class="number">0</span>;</div><div class="line"></div><div class="line">	    <span class="keyword">while</span> (x != <span class="number">0</span>)</div><div class="line">	    &#123;</div><div class="line">          <span class="comment">//get the last digit of the x.</span></div><div class="line">	        <span class="keyword">int</span> tail = x % <span class="number">10</span>;</div><div class="line">          <span class="comment">//add a digit in the end of the newResult ,and update the newResult's last digit</span></div><div class="line">	        <span class="keyword">int</span> newResult = result * <span class="number">10</span> + tail;</div><div class="line">          <span class="comment">//judge if newResult is overflows</span></div><div class="line">	        <span class="keyword">if</span> ((newResult - tail) / <span class="number">10</span> != result)</div><div class="line">	        &#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;</div><div class="line">	        result = newResult;</div><div class="line">          <span class="comment">//remove the last digit of x</span></div><div class="line">	        x = x / <span class="number">10</span>;</div><div class="line">	    &#125;</div><div class="line"></div><div class="line">	    <span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution2</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">        <span class="keyword">long</span> rev= <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>( x != <span class="number">0</span>)&#123;</div><div class="line">            <span class="comment">//add a digit in the end of the newResult ,and update the newResult's last digit</span></div><div class="line">            rev= rev*<span class="number">10</span> + x % <span class="number">10</span>;</div><div class="line">            <span class="comment">//remove the last digit of x</span></div><div class="line">            x= x/<span class="number">10</span>;</div><div class="line">            <span class="comment">//judge if newResult is overflows</span></div><div class="line">            <span class="keyword">if</span>( rev &gt; Integer.MAX_VALUE || rev &lt; Integer.MIN_VALUE)</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) rev;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/7.%20Reverse%20Integer/Images/IntResult.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>These two Solution has the same principle . They use the input x%10 to get the remainder which is the last digit of the x, and then use result*10 to add a digit to result and update the last digit to the x%10 , after that update x to x/10.<br>The only difference of the two solution is the way to judge the result is overflows or not. Solution1 is use the new result remove last digit campare to the old result,if they are equals to each other there is not overflows,else there is overflows. In other side , Solution2 is use the new result compare to the Integer’s limit threshold ,if it didn’t out of the threshold ,there is not overflows,else there is a overflows, notice that , long  rev = 0; in the code,your can;t use Integer to replace it , because once Integer overflows,java will change the value to make it between the limit threshold of the Integer. So  rev &gt; Integer.MAX_VALUE || rev &lt; Integer.MIN_VALUE will never be true.</p>
<p>Time complexity ： O(n) 。n is the digit of the    x.<br>Space complexity ： O(1) .</p>
<p>If you have any suggestions to make the logic and implementation more better , or you have some advice on my description. Please let me know!Thanks!</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github  <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>My twitter <a href="https://twitter.com/LChen1024?lang=en" target="_blank" rel="external">https://twitter.com/LChen1024?lang=en</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/12/02/7-Reverse-Integer/Record-en/" data-id="cjq0wmyr70044uabj0np5y395" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-7-Reverse-Integer/Record-cn" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/12/02/7-Reverse-Integer/Record-cn/" itemprop="url">
            <img src="/2018/12/02/7-Reverse-Integer/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/12/02/7-Reverse-Integer/Record-cn/">LeetCode 7. 数字反转</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/12/02/7-Reverse-Integer/Record-cn/">
            <time datetime="2018-12-01T16:00:00.000Z" itemprop="datePublished">2018-12-02</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[Chinese ver]</p>
<h1><span id="7-reverse-integer">7. Reverse Integer</span></h1><p>颠倒一个 integer 的前后位数。</p>
<p>例子: x = 123, return 321<br>例子: x = -123, return -321</p>
<p>注意：<br>输入是一个32位的有符号 integer . 当颠倒的 interger 溢出的时候你的函数应该返回0。</p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/12/02/7-Reverse-Integer/Record-cn/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[Chinese ver]</p>
<h1><span id="7-reverse-integer">7. Reverse Integer</span></h1><p>颠倒一个 integer 的前后位数。</p>
<p>例子: x = 123, return 321<br>例子: x = -123, return -321</p>
<p>注意：<br>输入是一个32位的有符号 integer . 当颠倒的 interger 溢出的时候你的函数应该返回0。</p>
<hr>
<p>提示</p>
<p>你是否注意到了这些？<br>在你编程之前你应该先想想这些问题。如果你已经考虑到了这些那是很加分的！</p>
<p>如果 integer 的最后一位是0，应该输出什么？比如，10，100.</p>
<p>你是否注意到了颠倒的 integer 可能会溢出？假设输入是一个 32位的 integer ，那么1000000003的颠倒溢出了。你该怎么处理这种情况？</p>
<p>为了解决这个问题，假设你的函数当颠倒的 integer 溢出的话返回0.</p>
<hr>
<h3><span id="方法一-使用stringbuilder">方法一 使用StringBuilder：</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line"></div><div class="line">	    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">          <span class="comment">//judge x is negative or not</span></div><div class="line">	        <span class="keyword">boolean</span> isNegative = <span class="keyword">false</span>;</div><div class="line">	        <span class="keyword">int</span> result =<span class="number">0</span>;</div><div class="line">	        <span class="keyword">if</span> (x&lt;<span class="number">0</span>)&#123;</div><div class="line">	            isNegative = <span class="keyword">true</span>;</div><div class="line">	            x = Math.abs(x);</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        StringBuilder oldSB = <span class="keyword">new</span> StringBuilder(String.valueOf(x));</div><div class="line">	        StringBuilder newSB = <span class="keyword">new</span> StringBuilder();</div><div class="line">          <span class="comment">//reverse the x use StringBuilder</span></div><div class="line">	        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; oldSB.length() ; i++)&#123;</div><div class="line">	            newSB.append(oldSB.charAt(oldSB.length()-i-<span class="number">1</span>));</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        <span class="keyword">try</span>&#123;</div><div class="line">	            result = Integer.valueOf(newSB.toString());</div><div class="line">	        &#125;</div><div class="line">	        <span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">              <span class="comment">//if overflows return the result 0</span></div><div class="line">	            <span class="keyword">return</span> result;</div><div class="line">	        &#125;</div><div class="line">	        <span class="keyword">if</span> (isNegative)&#123;</div><div class="line">	            result = -result;</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        <span class="keyword">return</span> result;</div><div class="line">	    &#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/7.%20Reverse%20Integer/Images/StringBuilderResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法使用StringBuilder 将 Integer 转换成正数进行颠倒的操作，使用 try catch 来处理溢出的情况。如果输入是负数，最后的结果在转为负数。<br>时间复杂度 ： O(n) 。n是输入的位数<br>空间复杂度 ： O(1) .</p>
<h3><span id="方法二-使用int">方法二 使用int：</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution1</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">	    <span class="keyword">int</span> result = <span class="number">0</span>;</div><div class="line"></div><div class="line">	    <span class="keyword">while</span> (x != <span class="number">0</span>)</div><div class="line">	    &#123;</div><div class="line">          <span class="comment">//get the last digit of the x.</span></div><div class="line">	        <span class="keyword">int</span> tail = x % <span class="number">10</span>;</div><div class="line">          <span class="comment">//add a digit in the end of the newResult ,and update the newResult's last digit</span></div><div class="line">	        <span class="keyword">int</span> newResult = result * <span class="number">10</span> + tail;</div><div class="line">          <span class="comment">//judge if newResult is overflows</span></div><div class="line">	        <span class="keyword">if</span> ((newResult - tail) / <span class="number">10</span> != result)</div><div class="line">	        &#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;</div><div class="line">	        result = newResult;</div><div class="line">          <span class="comment">//remove the last digit of x</span></div><div class="line">	        x = x / <span class="number">10</span>;</div><div class="line">	    &#125;</div><div class="line"></div><div class="line">	    <span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution2</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">        <span class="keyword">long</span> rev= <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>( x != <span class="number">0</span>)&#123;</div><div class="line">            <span class="comment">//add a digit in the end of the newResult ,and update the newResult's last digit</span></div><div class="line">            rev= rev*<span class="number">10</span> + x % <span class="number">10</span>;</div><div class="line">            <span class="comment">//remove the last digit of x</span></div><div class="line">            x= x/<span class="number">10</span>;</div><div class="line">            <span class="comment">//judge if newResult is overflows</span></div><div class="line">            <span class="keyword">if</span>( rev &gt; Integer.MAX_VALUE || rev &lt; Integer.MIN_VALUE)</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) rev;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/7.%20Reverse%20Integer/Images/IntResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这两个方法的原理都是一样的，通过将输入的x%10取余数得到最后一位数的值，然后使用 result*10 将result 增加一位并将最后一位更新为余数值，然后更新x为x/10。<br>这两个方法不同的地方是判断溢出的方法，Solution1 在更新 result 之后将新的 result 去掉最后一位和旧的 result 进行比较，看是否一致来判断是否溢出。Solution2 则是将新的 result 和 Integer 的临界值进行比较来判断是否溢出，要注意的是 Solution2 里的 long rev= 0; 一定不能使用 Integer ，因为一旦 Integer 溢出了 rev 就会被自动处理溢出，所以  rev &gt; Integer.MAX_VALUE || rev &lt; Integer.MIN_VALUE 永远不会为true。</p>
<p>时间复杂度 ： O(n) 。n是输入的位数<br>空间复杂度 ： O(1) .</p>
<p>如果你有更好的办法或者对我这里的描述有其他看法，请联系我。谢谢</p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=false" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/12/02/7-Reverse-Integer/Record-cn/" data-id="cjq0wmyr50041uabjj30fcyax" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-6-ZigZag-Conversion/Record-cn" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/" itemprop="url">
            <img src="/2018/09/12/6-ZigZag-Conversion/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/09/12/6-ZigZag-Conversion/Record-cn/">LeetCode 6. 锯齿形转换</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/">
            <time datetime="2018-09-11T16:00:00.000Z" itemprop="datePublished">2018-09-12</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[Chinese ver]</p>
<h1><span id="6-zigzag-conversion">6. ZigZag Conversion</span></h1><p>字符串”PAYPALISHIRING”是通过一个如下给定行数的锯齿模式书写的:(你可能想要使用一个固定的字体来更好的显示它)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">P   A   H   N</div><div class="line">A P L S I I G</div><div class="line">Y   I   R</div></pre></td></tr></table></figure>
<p>然后一行一行的读取这个字符串:”PAHNAPLSIIGYIR”<br>编写代码实现获取一个字符串然后根据给出的行数来实现这个锯齿转换:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string convert(string text, int nRows);</div></pre></td></tr></table></figure></p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[Chinese ver]</p>
<h1><span id="6-zigzag-conversion">6. ZigZag Conversion</span></h1><p>字符串”PAYPALISHIRING”是通过一个如下给定行数的锯齿模式书写的:(你可能想要使用一个固定的字体来更好的显示它)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">P   A   H   N</div><div class="line">A P L S I I G</div><div class="line">Y   I   R</div></pre></td></tr></table></figure>
<p>然后一行一行的读取这个字符串:”PAHNAPLSIIGYIR”<br>编写代码实现获取一个字符串然后根据给出的行数来实现这个锯齿转换:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string convert(string text, int nRows);</div></pre></td></tr></table></figure></p>
<p>convert(“PAYPALISHIRING”, 3) 应该返回 “PAHNAPLSIIGYIR”.</p>
<hr>
<p>首先我们来分析下什么是zigzag pattern,zigzag是锯齿或之字形的意思。是以一定的角度相交的两条线依次以其平行线进行重复相交的线路。一开始我以为是中间都是一行然后旁边是锯齿，当为4行的情况如下(以数字作为字符的index):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1   7    13</div><div class="line">2   8    14</div><div class="line">3 6 9 12 15</div><div class="line">4   10   16</div><div class="line">5   11   17</div></pre></td></tr></table></figure>
<p>但是事实并不是这样的，zigzag pattern 4行的情况应该是如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1     7        13</div><div class="line">2   6 8     12 14</div><div class="line">3 5   9  11    15</div><div class="line">4     10       16</div></pre></td></tr></table></figure></p>
<p>字符以这种锯齿形分布。</p>
<h4><span id="方法一-使用string">方法一 使用String[]：</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line">        String result = <span class="string">""</span>;</div><div class="line">        String[] strings = <span class="keyword">new</span> String[numRows];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            strings[i] = <span class="string">""</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> position = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">int</span> numRowsIndex = numRows-<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> step = <span class="number">1</span>;</div><div class="line">        <span class="comment">//if the numRows is one ,or the s's length is less than numRows ,return s .</span></div><div class="line">        <span class="keyword">if</span> (numRows ==<span class="number">1</span> || s.length()&lt;numRows)&#123;</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//loop the every char in the String, when the position is 0,the step is one ,is the position is numRowsIndex,the step is negative one</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            strings[position] += s.charAt(i);</div><div class="line">            <span class="keyword">if</span> (position ==<span class="number">0</span>)&#123;</div><div class="line">               step = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (position == numRowsIndex )&#123;</div><div class="line">                step = -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            position = position+step;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            result += strings[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/6.%20ZigZag%20Conversion/Images/StringsResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法将每一行的字符串存入对应的String[i]中，最后在将String[]按顺序拼接起来就得到了我们要的结果。当目前的位置在第一行的时候，下一个位置应该向下移动，所以step =1 . 当位置在最后一行的时候，下一个位置应该向上移动，所以step =-1.<br>时间复杂度 ： O(n) 。n是字符串的长度<br>空间复杂度 ： O(n) .</p>
<h4><span id="方法二-stringbuilder">方法二 StringBuilder[]：</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</div><div class="line">        StringBuilder[] strings = <span class="keyword">new</span> StringBuilder[numRows];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            strings[i] = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> position = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">int</span> numRowsIndex = numRows-<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> step = <span class="number">1</span>;</div><div class="line">          <span class="comment">//if the numRows is one ,or the s's length is less than numRows ,return s .</span></div><div class="line">        <span class="keyword">if</span> (numRows ==<span class="number">1</span> || s.length()&lt;numRows)&#123;</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        &#125;</div><div class="line">          <span class="comment">//loop the every char in the String, when the position is 0,the step is one ,is the position is numRowsIndex,the step is negative one</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            strings[position].append(s.charAt(i));</div><div class="line">            <span class="keyword">if</span> (position ==<span class="number">0</span>)&#123;</div><div class="line">               step = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (position == numRowsIndex )&#123;</div><div class="line">                step = -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            position = position+step;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            result.append(strings[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result.toString();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/6.%20ZigZag%20Conversion/Images/StringBuilderResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法原理和方法一一样，只是把String 换成 StringBuilder来处理，效率有了很大的提高</p>
<p>时间复杂度 ： O(n) 。n是字符串的长度<br>空间复杂度 ： O(n) .</p>
<h4><span id="方法三-间隔算法">方法三 间隔算法</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line"></div><div class="line">        String result=<span class="string">""</span>;</div><div class="line">        <span class="keyword">if</span>(numRows==<span class="number">1</span>)</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        <span class="keyword">int</span> step1,step2;</div><div class="line">        <span class="keyword">int</span> len=s.length();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numRows;++i)&#123;</div><div class="line">            step1=(numRows-i-<span class="number">1</span>)*<span class="number">2</span>;</div><div class="line">            step2=(i)*<span class="number">2</span>;</div><div class="line">            <span class="keyword">int</span> pos=i;</div><div class="line">            <span class="keyword">if</span>(pos&lt;len)</div><div class="line">                result+=s.charAt(pos);</div><div class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</div><div class="line">                pos+=step1;</div><div class="line">                <span class="keyword">if</span>(pos&gt;=len)</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">if</span>(step1&gt;<span class="number">0</span>)</div><div class="line">                    result+=s.charAt(pos);</div><div class="line">                pos+=step2;</div><div class="line">                <span class="keyword">if</span>(pos&gt;=len)</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">if</span>(step2&gt;<span class="number">0</span>)</div><div class="line">                    result+=s.charAt(pos);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>分析</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/*n=numRows</div><div class="line">Δ=2n-2    1                           2n-1                         4n-3</div><div class="line">Δ=        2                     2n-2  2n                    4n-4   4n-2</div><div class="line">Δ=        3               2n-3        2n+1              4n-5       .</div><div class="line">Δ=        .           .               .               .            .</div><div class="line">Δ=        .       n+2                 .           3n               .</div><div class="line">Δ=        n-1 n+1                     3n-3    3n-1                 5n-5</div><div class="line">Δ=2n-2    n                           3n-2                         5n-4</div><div class="line">*/</div></pre></td></tr></table></figure></p>
<p>这个方法主要是通过间隔的规律来进行计算和排位。</p>
<p>时间复杂度 ： O(n) 。n是字符串长度<br>空间复杂度 ： O(n) .</p>
<p>如果你有更好的办法或者对我这里的描述有其他看法，请联系我。谢谢</p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=false" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/09/12/6-ZigZag-Conversion/Record-cn/" data-id="cjq0wmyr2003tuabjye7wdm1a" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-6-ZigZag-Conversion/Record-en" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/09/12/6-ZigZag-Conversion/Record-en/" itemprop="url">
            <img src="/2018/09/12/6-ZigZag-Conversion/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/09/12/6-ZigZag-Conversion/Record-en/">LeetCode 6. ZigZag Conversion</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/09/12/6-ZigZag-Conversion/Record-en/">
            <time datetime="2018-09-11T16:00:00.000Z" itemprop="datePublished">2018-09-12</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[English ver]</p>
<h1><span id="6-zigzag-conversion">6. ZigZag Conversion</span></h1><p>The string “PAYPALISHIRING” is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">P   A   H   N</div><div class="line">A P L S I I G</div><div class="line">Y   I   R</div></pre></td></tr></table></figure></p>
<p>And then read line by line: “PAHNAPLSIIGYIR”<br>Write the code that will take a string and make this conversion given a number of rows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string convert(string text, int nRows);</div></pre></td></tr></table></figure></p>
<p>convert(“PAYPALISHIRING”, 3) should return “PAHNAPLSIIGYIR”.</p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/09/12/6-ZigZag-Conversion/Record-en/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[English ver]</p>
<h1><span id="6-zigzag-conversion">6. ZigZag Conversion</span></h1><p>The string “PAYPALISHIRING” is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">P   A   H   N</div><div class="line">A P L S I I G</div><div class="line">Y   I   R</div></pre></td></tr></table></figure></p>
<p>And then read line by line: “PAHNAPLSIIGYIR”<br>Write the code that will take a string and make this conversion given a number of rows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string convert(string text, int nRows);</div></pre></td></tr></table></figure></p>
<p>convert(“PAYPALISHIRING”, 3) should return “PAHNAPLSIIGYIR”.</p>
<hr>
<p>First we need to know the meaning about the zigzag pattern, it means a pattern made up of small corners at variable angles, though constant within the zigzag, tracing a path between two parallel lines; it can be described as both jagged and fairly regular. In the begining i think it’s one line in the middle and then some symmetry verticle line between the middle horizontal line,when the number of rows is 4(use number to represent the index of the String)it would look like that:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1   7    13</div><div class="line">2   8    14</div><div class="line">3 6 9 12 15</div><div class="line">4   10   16</div><div class="line">5   11   17</div></pre></td></tr></table></figure>
<p>but the trueth is not , it should be looked like that:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1     7        13</div><div class="line">2   6 8     12 14</div><div class="line">3 5   9  11    15</div><div class="line">4     10       16</div></pre></td></tr></table></figure></p>
<h3><span id="approach-1-use-string">Approach 1 use String[]:</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line">        String result = <span class="string">""</span>;</div><div class="line">        String[] strings = <span class="keyword">new</span> String[numRows];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            strings[i] = <span class="string">""</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> position = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">int</span> numRowsIndex = numRows-<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> step = <span class="number">1</span>;</div><div class="line">        <span class="comment">//if the numRows is one ,or the s's length is less than numRows ,return s .</span></div><div class="line">        <span class="keyword">if</span> (numRows ==<span class="number">1</span> || s.length()&lt;numRows)&#123;</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//loop the every char in the String, when the position is 0,the step is one ,is the position is numRowsIndex,the step is negative one</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            strings[position] += s.charAt(i);</div><div class="line">            <span class="keyword">if</span> (position ==<span class="number">0</span>)&#123;</div><div class="line">               step = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (position == numRowsIndex )&#123;</div><div class="line">                step = -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            position = position+step;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            result += strings[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/6.%20ZigZag%20Conversion/Images/StringsResult.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This method put every line’s String into the String[i] accordingly,in the last concate it together and then we get the result we want . When the position is in the first row , next time the position should move down,so step = 1.When the position is in the last Row , next time the position should move up , so the step = -1.</p>
<p>Time complexity ： O(n) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<h3><span id="approach-2-stringbuilder">Approach 2 StringBuilder[]:</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</div><div class="line">        StringBuilder[] strings = <span class="keyword">new</span> StringBuilder[numRows];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            strings[i] = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> position = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">int</span> numRowsIndex = numRows-<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> step = <span class="number">1</span>;</div><div class="line">          <span class="comment">//if the numRows is one ,or the s's length is less than numRows ,return s .</span></div><div class="line">        <span class="keyword">if</span> (numRows ==<span class="number">1</span> || s.length()&lt;numRows)&#123;</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        &#125;</div><div class="line">          <span class="comment">//loop the every char in the String, when the position is 0,the step is one ,is the position is numRowsIndex,the step is negative one</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            strings[position].append(s.charAt(i));</div><div class="line">            <span class="keyword">if</span> (position ==<span class="number">0</span>)&#123;</div><div class="line">               step = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (position == numRowsIndex )&#123;</div><div class="line">                step = -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            position = position+step;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;numRows;i++)&#123;</div><div class="line">            result.append(strings[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result.toString();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/6.%20ZigZag%20Conversion/Images/StringBuilderResult.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This method’s principle is the same as the Approach 1 , it just replace the String into StringBuilder,it has a big optimization.</p>
<p>Time complexity ： O(n) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<h3><span id="approach-3-use-interval">Approach 3 use interval</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</div><div class="line"></div><div class="line">        String result=<span class="string">""</span>;</div><div class="line">        <span class="keyword">if</span>(numRows==<span class="number">1</span>)</div><div class="line">            <span class="keyword">return</span> s;</div><div class="line">        <span class="keyword">int</span> step1,step2;</div><div class="line">        <span class="keyword">int</span> len=s.length();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numRows;++i)&#123;</div><div class="line">            step1=(numRows-i-<span class="number">1</span>)*<span class="number">2</span>;</div><div class="line">            step2=(i)*<span class="number">2</span>;</div><div class="line">            <span class="keyword">int</span> pos=i;</div><div class="line">            <span class="keyword">if</span>(pos&lt;len)</div><div class="line">                result+=s.charAt(pos);</div><div class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</div><div class="line">                pos+=step1;</div><div class="line">                <span class="keyword">if</span>(pos&gt;=len)</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">if</span>(step1&gt;<span class="number">0</span>)</div><div class="line">                    result+=s.charAt(pos);</div><div class="line">                pos+=step2;</div><div class="line">                <span class="keyword">if</span>(pos&gt;=len)</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">if</span>(step2&gt;<span class="number">0</span>)</div><div class="line">                    result+=s.charAt(pos);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Analysis</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/*n=numRows</div><div class="line">Δ=2n-2    1                           2n-1                         4n-3</div><div class="line">Δ=        2                     2n-2  2n                    4n-4   4n-2</div><div class="line">Δ=        3               2n-3        2n+1              4n-5       .</div><div class="line">Δ=        .           .               .               .            .</div><div class="line">Δ=        .       n+2                 .           3n               .</div><div class="line">Δ=        n-1 n+1                     3n-3    3n-1                 5n-5</div><div class="line">Δ=2n-2    n                           3n-2                         5n-4</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>This method used regular interval to calculate position .</p>
<p>Time complexity ： O(n) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<p>If you have any suggestions to make the logic and implementation more better , or you have some advice on my description. Please let me know!Thanks!</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github  <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>My twitter <a href="https://twitter.com/LChen1024?lang=en" target="_blank" rel="external">https://twitter.com/LChen1024?lang=en</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/09/12/6-ZigZag-Conversion/Record-en/" data-id="cjq0wmyr3003xuabj209dkmyp" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-5-Longest-Palindromic-Substring/Record-en" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/" itemprop="url">
            <img src="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/">LeetCode 5.Longest Palindromic Substring</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/">
            <time datetime="2018-08-30T16:00:00.000Z" itemprop="datePublished">2018-08-31</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><h1><span id="5-longest-palindromic-substring">5. Longest Palindromic Substring</span></h1><p>Given a string s, find the longest palindromic substring in s. You may assume that the maximum length of s is 1000.<br>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;babad&quot;</div><div class="line"></div><div class="line">Output: &quot;bab&quot;</div></pre></td></tr></table></figure></p>
<p>Note: “aba” is also a valid answer.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;cbbd&quot;</div><div class="line"></div><div class="line">Output: &quot;bb&quot;</div></pre></td></tr></table></figure></p>
<hr>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-en/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<h1><span id="5-longest-palindromic-substring">5. Longest Palindromic Substring</span></h1><p>Given a string s, find the longest palindromic substring in s. You may assume that the maximum length of s is 1000.<br>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;babad&quot;</div><div class="line"></div><div class="line">Output: &quot;bab&quot;</div></pre></td></tr></table></figure></p>
<p>Note: “aba” is also a valid answer.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;cbbd&quot;</div><div class="line"></div><div class="line">Output: &quot;bb&quot;</div></pre></td></tr></table></figure></p>
<hr>
<p>I have misunderstood the meaning of the word palindrome , i thought it was the meaning of repeat,finally i know that it was the meaning of a string which is the same when you look from left to right and from right to left.<br>According to that , we know it has two situation,one the length is odd , another is even .</p>
<h3><span id="approach-1">Approach 1 :</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">       <span class="keyword">private</span> <span class="keyword">int</span> lo, maxLen;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">           <span class="keyword">int</span> len = s.length();</div><div class="line">           <span class="keyword">if</span> (len &lt; <span class="number">2</span>)</div><div class="line">               <span class="keyword">return</span> s;</div><div class="line"></div><div class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</div><div class="line">               extendPalindrome(s, i, i);  <span class="comment">//assume odd length, try to extend Palindrome as possible</span></div><div class="line">               extendPalindrome(s, i, i + <span class="number">1</span>); <span class="comment">//assume even length.</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">return</span> s.substring(lo, lo + maxLen);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">extendPalindrome</span><span class="params">(String s, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">           <span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; k &lt; s.length() &amp;&amp; s.charAt(j) == s.charAt(k)) &#123;</div><div class="line">               j--;</div><div class="line">               k++;</div><div class="line">           &#125;</div><div class="line">           <span class="keyword">if</span> (maxLen &lt; k - j - <span class="number">1</span>) &#123;</div><div class="line">               lo = j + <span class="number">1</span>;</div><div class="line">               maxLen = k - j - <span class="number">1</span>;</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/SuccessResult1.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This method divided the problem into two situation.First we loop the every char of the String,each char call the extendPalindrome method .The extendPalindrome method is used to find the char of corresponding position is the same or not . if so we move the index of the left char to left one ,and the right char to right one,and then repeat this procedure.</p>
<p>Time complexity ： O(n^2) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<h3><span id="approach-2">Approach 2 :</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        String res = <span class="string">""</span>;</div><div class="line">        <span class="keyword">int</span> currLength = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            <span class="keyword">if</span>(isPalindrome(s,i-currLength-<span class="number">1</span>,i))&#123;</div><div class="line">                res = s.substring(i-currLength-<span class="number">1</span>,i+<span class="number">1</span>);</div><div class="line">                currLength = currLength+<span class="number">2</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(isPalindrome(s,i-currLength,i))&#123;</div><div class="line">                res = s.substring(i-currLength,i+<span class="number">1</span>);</div><div class="line">                currLength = currLength+<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(String s, <span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(begin&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">while</span>(begin&lt;end)&#123;</div><div class="line">        	<span class="keyword">if</span>(s.charAt(begin++)!=s.charAt(end--)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/SuccessResult2.png?raw=true" alt="Efficiency"></p>
<p><strong>Analysis</strong><br>This method is when then index move to right , we used the char of this index as the end of the substring which length is current length +1 or current length +2, and see if is the Palindrome string .</p>
<p>Time complexity ： O(n^2) 。n is the length of the string.<br>Space complexity ： O(n) .</p>
<h3><span id="approach-3-manachers-algorithm">Approach 3 (Manacher’s Algorithm)</span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">      <span class="keyword">char</span>[] str = changeString(s);</div><div class="line">		  String result = manacher(str,s);</div><div class="line"></div><div class="line">		  <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">	 * 返回例如 #a#c#b#c#a#a#c#b#c#d#形式的字符串数组</span></div><div class="line"><span class="comment">	 *</span></div><div class="line"><span class="comment">	 * <span class="doctag">@param</span> s</span></div><div class="line"><span class="comment">	 * <span class="doctag">@return</span></span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">char</span>[] changeString(String s)</div><div class="line">	&#123;</div><div class="line">	    <span class="keyword">char</span>[] str = <span class="keyword">new</span> <span class="keyword">char</span>[s.length() * <span class="number">2</span> + <span class="number">1</span>];</div><div class="line"></div><div class="line">	    <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">for</span> (; i &lt; s.length(); i++)</div><div class="line">	    &#123;</div><div class="line">	        str[<span class="number">2</span> * i] = <span class="string">'#'</span>;</div><div class="line">	        str[<span class="number">2</span> * i + <span class="number">1</span>] = s.charAt(i);</div><div class="line">	    &#125;</div><div class="line">	    str[<span class="number">2</span> * i] = <span class="string">'#'</span>;</div><div class="line"></div><div class="line">	    <span class="keyword">return</span> str;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">	 * manacher 算法实现找到回文字符串最长的一个</span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">manacher</span><span class="params">(<span class="keyword">char</span>[] s,String olds)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		  String result = <span class="string">""</span>;</div><div class="line">	    <span class="keyword">int</span> rad[] = <span class="keyword">new</span> <span class="keyword">int</span>[s.length];</div><div class="line">	    <span class="keyword">int</span> start = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">int</span> end = <span class="number">0</span>;</div><div class="line">	    <span class="comment">//i index,j 回文半径，k</span></div><div class="line">	    <span class="keyword">int</span> i = <span class="number">1</span>, j = <span class="number">0</span>, k;</div><div class="line"></div><div class="line">	    <span class="comment">// 记录最长的回文串的长度</span></div><div class="line">	    <span class="keyword">int</span> maxLen = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">while</span> (i &lt; s.length)</div><div class="line">	    &#123;</div><div class="line">	        <span class="comment">// 扫描得出rad值</span></div><div class="line">	        <span class="keyword">while</span> (i - j - <span class="number">1</span> &gt; -<span class="number">1</span> &amp;&amp; i + j + <span class="number">1</span> &lt; s.length</div><div class="line">	                &amp;&amp; s[i - j - <span class="number">1</span>] == s[i + j + <span class="number">1</span>]) &#123;</div><div class="line">	        	  j++;</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        <span class="keyword">if</span> (maxLen &lt; j ) &#123;</div><div class="line">				        maxLen =j;</div><div class="line">				        start = i - j  ;</div><div class="line">				        end =i + j ;</div><div class="line"></div><div class="line">			       &#125;</div><div class="line">	        rad[i] = j;</div><div class="line">	        maxLen = maxLen &gt; j ? maxLen : j;</div><div class="line"></div><div class="line">	        k = <span class="number">1</span>;</div><div class="line">          <span class="comment">//当回文中包含子回文，看子回文是否超出父回文边界。 分三种情况。</span></div><div class="line">	        <span class="keyword">while</span> (k &lt;= rad[i] &amp;&amp; rad[i - k] != rad[i] - k)</div><div class="line">	        &#123;</div><div class="line">	            rad[i + k] = Math.min(rad[i - k], rad[i] - k);</div><div class="line">	            k++;</div><div class="line">	        &#125;</div><div class="line">	        i = i + k;</div><div class="line">	        j = Math.max(j - k, <span class="number">0</span>);</div><div class="line">	    &#125;</div><div class="line"></div><div class="line">	    result = olds.substring(start/<span class="number">2</span>,end/<span class="number">2</span>);</div><div class="line">	    <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Analysis</strong></p>
<p>In this question,the Palindrome has two situation, one is even Palindrome , another is odd Palindrome. In order to combine them into one situation, we can add a special char like ‘#’ between every two char of the string which is neaby ,and the begining and the ending of the string . like  “#a#b#b#c#a#”. Now we have combine the two situation into together.</p>
<p>In the String s ,we use rad[i] to represent the Palindrome radius of index i , we can get s[i-rad[i],i-1] = s[i+1,i+rad[i]] easily , once we get the all the rad of the String , we get the all the Palindrome which is even length .</p>
<p>when we get the value of rad[1..i-1],and get the rad value of the char i is at least j through compare char which is symmetry.Now we suppose that we have a index k , it start from 1 to rad[i],we can use it to get the rad valule of the [i+1,i+rad[i]].</p>
<p>According to the acept of the Palindrome , we know the part of the black is a Palindrome, two parts of the red have the same length.<br>Because we have calculate the value of rad[i-k],so we can use it . There are three situations:<br>(1)rad[i]-k &lt; rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation1.jpg?raw=true" alt="Situation1.jpg"></p>
<p>As the picture , rad[i-k]’s range is blackish green line . Because of the black line is Palindrome,and a part of blackish green line is out of the black line,so rad[i+k] is at least rad[i]-k (the orange line).Is there have any possible that rad[i+k] is larger than rad[i]-k? it’s impossible ,according to the acept of the Palindrome ,we know that if the part out of the orange line is the Palindrome , than the black line can expand outward. Is different from the suppose we have done . so rad[i+k] = rad[i]-k。</p>
<p>（2）rad[i]-k &gt; rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation2.jpg?raw=true" alt="Situation2.jpg"></p>
<p>As the picture , rad[i-k]’s range is the blackish green line . Because the black line is Palindrome and the blackish green line is in the black line , according to the acept of the Palindrome ,we can get that rad[i+k] = rad[i-k] easily.</p>
<p>According to the situation we have talk , we can get that when rad[i]-k != rad[i-k] ,rad[i+k] = min(rad[i]-k,rad[i-k])。</p>
<p>（3）rad[i]-k = rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation3.jpg?raw=true" alt="Situation3.jpg"></p>
<p>As the picture , after compare to the first situation , we can find that because the blackish line is in the black line , so even the orange line is equals , it can’t cause a contradiction like situation 1 ,so the orange line can be equals . But , according to the message we know , we have not idear how long is the orange line , so we put the i to the i+k position , j=rad[i-k](because it’s rad is at least rad[i-k]), wait to next loop to calculate it can expand out or not .</p>
<p>Time complexity  ： O(n) 。it looks like the program is use the nesting loop ,but actualy it only calculate the i which haven’t calculated.<br>Space complexity ： O(n) .</p>
<p>If you have any suggestions to make the logic and implementation more better , or you have some advice on my description. Please let me know!Thanks!</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github  <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>My twitter <a href="https://twitter.com/LChen1024?lang=en" target="_blank" rel="external">https://twitter.com/LChen1024?lang=en</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/31/5-Longest-Palindromic-Substring/Record-en/" data-id="cjq0wmyr0003puabjptkggm4y" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-5-Longest-Palindromic-Substring/Record-cn" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/" itemprop="url">
            <img src="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/">LeetCode 5.最长的回文字符串</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/">
            <time datetime="2018-08-30T16:00:00.000Z" itemprop="datePublished">2018-08-31</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><h1><span id="5-longest-palindromic-substring">5. Longest Palindromic Substring</span></h1><p>给定一个字符串s,找出其中最长的回文格式的子字符串。你可以假设长度的最大值为1000.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;babad&quot;</div><div class="line"></div><div class="line">Output: &quot;bab&quot;</div></pre></td></tr></table></figure></p>
<p>Note: “aba” is also a valid answer.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;cbbd&quot;</div><div class="line"></div><div class="line">Output: &quot;bb&quot;</div></pre></td></tr></table></figure></p>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<h1><span id="5-longest-palindromic-substring">5. Longest Palindromic Substring</span></h1><p>给定一个字符串s,找出其中最长的回文格式的子字符串。你可以假设长度的最大值为1000.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;babad&quot;</div><div class="line"></div><div class="line">Output: &quot;bab&quot;</div></pre></td></tr></table></figure></p>
<p>Note: “aba” is also a valid answer.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;cbbd&quot;</div><div class="line"></div><div class="line">Output: &quot;bb&quot;</div></pre></td></tr></table></figure></p>
<p>一开始以为palindrome是重复的意思，走了很大的弯路，后来才知道指的是回文格式，就是一个顺着读和反过来读都一样的字符串。<br>由此可知他有两种情况，一种是奇数的情况，中间的一个字符独立，其余的字符以中间为轴两两对应。另一种是偶数的情况，所有的字符都以中间为轴两两对应。</p>
<h4><span id="方法一">方法一：</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">       <span class="keyword">private</span> <span class="keyword">int</span> lo, maxLen;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">           <span class="keyword">int</span> len = s.length();</div><div class="line">           <span class="keyword">if</span> (len &lt; <span class="number">2</span>)</div><div class="line">               <span class="keyword">return</span> s;</div><div class="line"></div><div class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</div><div class="line">               extendPalindrome(s, i, i);  <span class="comment">//assume odd length, try to extend Palindrome as possible</span></div><div class="line">               extendPalindrome(s, i, i + <span class="number">1</span>); <span class="comment">//assume even length.</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">return</span> s.substring(lo, lo + maxLen);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">extendPalindrome</span><span class="params">(String s, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">           <span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; k &lt; s.length() &amp;&amp; s.charAt(j) == s.charAt(k)) &#123;</div><div class="line">               j--;</div><div class="line">               k++;</div><div class="line">           &#125;</div><div class="line">           <span class="keyword">if</span> (maxLen &lt; k - j - <span class="number">1</span>) &#123;</div><div class="line">               lo = j + <span class="number">1</span>;</div><div class="line">               maxLen = k - j - <span class="number">1</span>;</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/SuccessResult1.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法分为奇偶两种情况进行计算。首先对每一个字符串里的字符进行两种情况的计算，extendPalindrome方法的原理就是当对应的位置的字符相同时，就将左侧字符向左一位，右侧字符向右一位，然后再重复进行这个比较过程。<br>时间复杂度 ： O(n^2) 。n是字符串的长度<br>空间复杂度 ： O(n) .</p>
<h4><span id="方法二">方法二：</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        String res = <span class="string">""</span>;</div><div class="line">        <span class="keyword">int</span> currLength = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</div><div class="line">            <span class="keyword">if</span>(isPalindrome(s,i-currLength-<span class="number">1</span>,i))&#123;</div><div class="line">                res = s.substring(i-currLength-<span class="number">1</span>,i+<span class="number">1</span>);</div><div class="line">                currLength = currLength+<span class="number">2</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(isPalindrome(s,i-currLength,i))&#123;</div><div class="line">                res = s.substring(i-currLength,i+<span class="number">1</span>);</div><div class="line">                currLength = currLength+<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(String s, <span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(begin&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">while</span>(begin&lt;end)&#123;</div><div class="line">        	<span class="keyword">if</span>(s.charAt(begin++)!=s.charAt(end--)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/SuccessResult2.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法主要是每当指针向右移时，我们都以这个位置的字符为结尾看是否能有新的长度为length(current length +1 或者 current length +2)的回文字符串。</p>
<p>时间复杂度 ： O(n^2) 。n是字符串长度。<br>空间复杂度 ： O(n) .</p>
<h4><span id="方法三-manacher算法">方法三 Manacher算法</span></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">      <span class="keyword">char</span>[] str = changeString(s);</div><div class="line">		  String result = manacher(str,s);</div><div class="line"></div><div class="line">		  <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">	 * 返回例如 #a#c#b#c#a#a#c#b#c#d#形式的字符串数组</span></div><div class="line"><span class="comment">	 *</span></div><div class="line"><span class="comment">	 * <span class="doctag">@param</span> s</span></div><div class="line"><span class="comment">	 * <span class="doctag">@return</span></span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">char</span>[] changeString(String s)</div><div class="line">	&#123;</div><div class="line">	    <span class="keyword">char</span>[] str = <span class="keyword">new</span> <span class="keyword">char</span>[s.length() * <span class="number">2</span> + <span class="number">1</span>];</div><div class="line"></div><div class="line">	    <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">for</span> (; i &lt; s.length(); i++)</div><div class="line">	    &#123;</div><div class="line">	        str[<span class="number">2</span> * i] = <span class="string">'#'</span>;</div><div class="line">	        str[<span class="number">2</span> * i + <span class="number">1</span>] = s.charAt(i);</div><div class="line">	    &#125;</div><div class="line">	    str[<span class="number">2</span> * i] = <span class="string">'#'</span>;</div><div class="line"></div><div class="line">	    <span class="keyword">return</span> str;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">	 * manacher 算法实现找到回文字符串最长的一个</span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">manacher</span><span class="params">(<span class="keyword">char</span>[] s,String olds)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		  String result = <span class="string">""</span>;</div><div class="line">	    <span class="keyword">int</span> rad[] = <span class="keyword">new</span> <span class="keyword">int</span>[s.length];</div><div class="line">	    <span class="keyword">int</span> start = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">int</span> end = <span class="number">0</span>;</div><div class="line">	    <span class="comment">//i index,j 回文半径，k</span></div><div class="line">	    <span class="keyword">int</span> i = <span class="number">1</span>, j = <span class="number">0</span>, k;</div><div class="line"></div><div class="line">	    <span class="comment">// 记录最长的回文串的长度</span></div><div class="line">	    <span class="keyword">int</span> maxLen = <span class="number">0</span>;</div><div class="line">	    <span class="keyword">while</span> (i &lt; s.length)</div><div class="line">	    &#123;</div><div class="line">	        <span class="comment">// 扫描得出rad值</span></div><div class="line">	        <span class="keyword">while</span> (i - j - <span class="number">1</span> &gt; -<span class="number">1</span> &amp;&amp; i + j + <span class="number">1</span> &lt; s.length</div><div class="line">	                &amp;&amp; s[i - j - <span class="number">1</span>] == s[i + j + <span class="number">1</span>]) &#123;</div><div class="line">	        	  j++;</div><div class="line">	        &#125;</div><div class="line"></div><div class="line">	        <span class="keyword">if</span> (maxLen &lt; j ) &#123;</div><div class="line">				        maxLen =j;</div><div class="line">				        start = i - j  ;</div><div class="line">				        end =i + j ;</div><div class="line"></div><div class="line">			       &#125;</div><div class="line">	        rad[i] = j;</div><div class="line">	        maxLen = maxLen &gt; j ? maxLen : j;</div><div class="line"></div><div class="line">	        k = <span class="number">1</span>;</div><div class="line">          <span class="comment">//当回文中包含子回文，看子回文是否超出父回文边界。 分三种情况。</span></div><div class="line">	        <span class="keyword">while</span> (k &lt;= rad[i] &amp;&amp; rad[i - k] != rad[i] - k)</div><div class="line">	        &#123;</div><div class="line">	            rad[i + k] = Math.min(rad[i - k], rad[i] - k);</div><div class="line">	            k++;</div><div class="line">	        &#125;</div><div class="line">	        i = i + k;</div><div class="line">	        j = Math.max(j - k, <span class="number">0</span>);</div><div class="line">	    &#125;</div><div class="line"></div><div class="line">	    result = olds.substring(start/<span class="number">2</span>,end/<span class="number">2</span>);</div><div class="line">	    <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>分析</strong><br>在这个问题中，回文的情况一共有两种，一种是奇数回文，一种是偶数回文，为了将他们合并成一种情况，我们可以在首尾和每两个字符中间加上一个特殊字符，如‘#’，形如”#a#b#b#c#a#”.这样我们就将所有的回文情况合并成奇数回文的情况。</p>
<p>在字符串s中，我们用rad[i]表示第i个字符的回文半径，可以得到s[i-rad[i],i-1] = s[i+1,i+rad[i]]，只要求出了所有的rad，就求出了所有奇数长度的回文子串。</p>
<p>当我们得到了rad[1..i-1]的值，并通过比较对称字符得到当前字符i的rad值至少为j，求出了rad[i]。现在我们设一个指针k，从1循环到rad[i]，以此来求出[i+1,i+rad[i]]的rad值。</p>
<p>根据定义，黑色的部分是一个回文子串，两段红色的区间全等。<br>因为之前已经求出了rad[i-k]，所以直接用它.有3种情况：<br>（1）rad[i]-k &lt; rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation1.jpg?raw=true" alt="Situation1.jpg"></p>
<p>如图,rad[i-k]的范围为墨绿色。因为黑色的部分是回文的，且墨绿色的部分超过了黑色的部分，所以rad[i+k]至少为rad[i]-k，即橙色的部分。有没有可能rad[i+k]的值大于rad[i]-k呢？这是不可能发生的，根据回文的特性我们知道，如果橙色部分以外也是回文，那么黑色的回文部分就可以向外拓展。与假设冲突。因此rad[i+k] = rad[i]-k。</p>
<p>（2）rad[i]-k &gt; rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation2.jpg?raw=true" alt="Situation2.jpg"></p>
<p>如图,rad[i-k]的范围为墨绿色。因为黑色的部分是回文的，且墨绿色的部分在黑色的部分里面，根据回文特性，很容易得出：rad[i+k] = rad[i-k]。</p>
<p>根据上面两种情况，可以得出结论：当rad[i]-k != rad[i-k]的时候，rad[i+k] = min(rad[i]-k,rad[i-k])。</p>
<p>（3）rad[i]-k = rad[i-k]<br><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/5.%20Longest%20Palindromic%20Substring/Images/Situation3.jpg?raw=true" alt="Situation3.jpg"><br>如图，通过和第一种情况对比之后会发现，因为墨绿色的部分没有超出黑色的部分，所以即使橙色的部分全等，也无法像第一种情况一样引出矛盾，因此橙色的部分是有可能全等的。但是，根据已知的信息，我们不知道橙色的部分是多长，因此就把i指针移到i+k的位置，j=rad[i-k](因为它的rad值至少为rad[i-k])，是否可以向外拓展等下个循环再做。</p>
<p>时间复杂度 ： O(n) 。看起来程序里用到了循环嵌套，但是实际上他只对没有计量过的i进行计量。<br>空间复杂度 ： O(n) .</p>
<p>如果你有更好的办法或者对我这里的描述有其他看法，请联系我。谢谢</p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=false" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/31/5-Longest-Palindromic-Substring/Record-cn/" data-id="cjq0wmyqx003luabjg8x3nzs2" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-4-Median-of-Two-Sorted-Arrays/Record-en" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/" itemprop="url">
            <img src="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/">LeetCode 4. Median of Two Sorted Arrays [English ver]</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/">
            <time datetime="2018-08-14T16:00:00.000Z" itemprop="datePublished">2018-08-15</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/English/">English</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[English ver]</p>
<h1><span id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays</span></h1><p>There are two sorted arrays nums1 and nums2 of size m and n respectively.</p>
<p>Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Example 1:</div><div class="line">nums1 = [1, 3]</div><div class="line">nums2 = [2]</div><div class="line"></div><div class="line">The median is 2.0</div></pre></td></tr></table></figure>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[English ver]</p>
<h1><span id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays</span></h1><p>There are two sorted arrays nums1 and nums2 of size m and n respectively.</p>
<p>Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Example 1:</div><div class="line">nums1 = [1, 3]</div><div class="line">nums2 = [2]</div><div class="line"></div><div class="line">The median is 2.0</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Example 2:</div><div class="line">nums1 = [1, 2]</div><div class="line">nums2 = [3, 4]</div><div class="line"></div><div class="line">The median is (2 + 3)/2 = 2.5</div></pre></td></tr></table></figure>
<h2><span id="approach-1">Approach 1:</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">        <span class="comment">//how many number we need</span></div><div class="line">        <span class="keyword">int</span> needNum = <span class="number">0</span>;</div><div class="line">        <span class="comment">//the index of the number we need</span></div><div class="line">        <span class="keyword">int</span> needIndex = <span class="number">0</span>;</div><div class="line">        <span class="comment">//the median value</span></div><div class="line">        <span class="keyword">double</span> median = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> big = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> stand = <span class="number">0</span>;</div><div class="line">        <span class="comment">//the total array</span></div><div class="line">        <span class="keyword">int</span>[] insertnum ;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> m = nums1.length;</div><div class="line">        <span class="keyword">int</span> n = nums2.length;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">0</span>)&#123;</div><div class="line">            needNum = <span class="number">2</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>-<span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            needNum=<span class="number">1</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        insertnum = <span class="keyword">new</span> <span class="keyword">int</span>[m+n];</div><div class="line">        <span class="comment">//nums1 index</span></div><div class="line">        <span class="keyword">int</span> j =<span class="number">0</span>;</div><div class="line">        <span class="comment">//nums2 index</span></div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;m+n;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(k==n)&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j==m)&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[j]&gt;nums2[k])&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(needNum == <span class="number">1</span>)&#123;</div><div class="line">            median = Double.valueOf(insertnum[needIndex]);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            median = Double.valueOf(insertnum[needIndex]+insertnum[needIndex+<span class="number">1</span>]) /<span class="number">2.0</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> median;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>by the way ,this method often failed , maybe is the complexity is too big.</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/1SuccessResult.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong><br>This method is easy,first we figure out how to get the median value and how many number we need for calculate median value when the sum of the two arrays size is odd-lengthed or even-lengthed. And then we put the two arrays together sorted from small to large , and then use the method we got to calculate the median value.</p>
<p>Time complexity: O(m+n)<br>Space complexity:O(m+n)</p>
<p>we can have a optmization of this approach,like that</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> needNum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> needIndex = <span class="number">0</span>;</div><div class="line">        <span class="keyword">double</span> median = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> big = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> stand = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span>[] insertnum ;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> m = nums1.length;</div><div class="line">        <span class="keyword">int</span> n = nums2.length;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">0</span>)&#123;</div><div class="line">            needNum = <span class="number">2</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>-<span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            needNum=<span class="number">1</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        insertnum = <span class="keyword">new</span> <span class="keyword">int</span>[(m+n)/<span class="number">2</span>+<span class="number">1</span>];</div><div class="line">        <span class="keyword">int</span> j =<span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;m+n;i++)&#123;</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(k==n)&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j==m)&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[j]&gt;nums2[k])&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">             <span class="keyword">if</span> (i &gt;= needIndex )&#123;</div><div class="line">                <span class="keyword">if</span> (needNum == <span class="number">1</span>)&#123;</div><div class="line">                    median = Double.valueOf(insertnum[needIndex]);</div><div class="line">                    <span class="keyword">return</span> median;</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                     <span class="keyword">if</span> (i == needIndex+<span class="number">1</span>)&#123;</div><div class="line">                         median = Double.valueOf(insertnum[needIndex]+insertnum[needIndex+<span class="number">1</span>]) /<span class="number">2.0</span>;</div><div class="line">                         <span class="keyword">return</span> median;</div><div class="line">                     &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    <span class="keyword">return</span> median;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Analysis</strong></p>
<p>The optmization is we get the index of the median value ,  when we sorted the array to the index , we can calculate the median value and we don’t need to sorted all the number.</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/1OptimizeSuccessResult.png?raw=true" alt="efficiency"></p>
<h2><span id="approach-2">Approach 2</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">           <span class="keyword">int</span> N1 = nums1.length;</div><div class="line">           <span class="keyword">int</span> N2 = nums2.length;</div><div class="line">           <span class="keyword">if</span> (N1 &lt; N2)</div><div class="line">               <span class="keyword">return</span> findMedianSortedArrays(nums2, nums1);    <span class="comment">// Make sure A2 is the shorter one.</span></div><div class="line"></div><div class="line">           <span class="keyword">if</span> (N2 == <span class="number">0</span>)</div><div class="line">               <span class="keyword">return</span> ((<span class="keyword">double</span>) nums1[(N1 - <span class="number">1</span>) / <span class="number">2</span>] + (<span class="keyword">double</span>) nums1[N1 / <span class="number">2</span>]) / <span class="number">2</span>;  <span class="comment">// If A2 is empty</span></div><div class="line"></div><div class="line">           <span class="keyword">int</span> lo = <span class="number">0</span>, hi = N2 * <span class="number">2</span>;</div><div class="line">           <span class="keyword">while</span> (lo &lt;= hi) &#123;</div><div class="line">               <span class="keyword">int</span> mid2 = (lo + hi) / <span class="number">2</span>;   <span class="comment">// Try Cut 2</span></div><div class="line">               <span class="keyword">int</span> mid1 = N1 + N2 - mid2;  <span class="comment">// Calculate Cut 1 accordingly</span></div><div class="line"></div><div class="line">               <span class="keyword">double</span> L1 = (mid1 == <span class="number">0</span>) ? Integer.MIN_VALUE : nums1[(mid1 - <span class="number">1</span>) / <span class="number">2</span>];    <span class="comment">// Get L1, R1, L2, R2 respectively</span></div><div class="line">               <span class="keyword">double</span> L2 = (mid2 == <span class="number">0</span>) ? Integer.MIN_VALUE : nums2[(mid2 - <span class="number">1</span>) / <span class="number">2</span>];</div><div class="line">               <span class="keyword">double</span> R1 = (mid1 == N1 * <span class="number">2</span>) ? Integer.MAX_VALUE : nums1[(mid1) / <span class="number">2</span>];</div><div class="line">               <span class="keyword">double</span> R2 = (mid2 == N2 * <span class="number">2</span>) ? Integer.MAX_VALUE : nums2[(mid2) / <span class="number">2</span>];</div><div class="line"></div><div class="line">               <span class="keyword">if</span> (L1 &gt; R2)</div><div class="line">                   lo = mid2 + <span class="number">1</span>;        <span class="comment">// A1's lower half is too big; need to move C1 left (C2 right)</span></div><div class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (L2 &gt; R1)</div><div class="line">                   hi = mid2 - <span class="number">1</span>;    <span class="comment">// A2's lower half too big; need to move C2 left.</span></div><div class="line">               <span class="keyword">else</span></div><div class="line">                   <span class="keyword">return</span> ((L1 &gt; L2 ? L1 : L2) + (R1 &gt; R2 ? R2 : R1)) / <span class="number">2</span>;    <span class="comment">// Otherwise, that's the right cut.</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/2SeccessResult.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong></p>
<p>this method is a little hard to understand,many implementations consider odd-lengthed and even-lengthed arrays as two different cases and treat them separately. In fact , this is a little twist.<br>First, we can define ‘MEDIAN’ i:</p>
<p>“if we cut the sorted array to two halves of equal length, then median is the average of the max number of the small half and min of larger half , is the number near to the cut .</p>
<p>For example, for [ 1 2 ], we make the cut between 1 and 2:<br>[1 | 2]<br>the median = (1+2)/2.0 = 1.5 .<br>The same to the two arrays , we only need to make sure numbers in the right side of the cut of the two arrays bigger than the left side of the cut ,and the size of the left is equal to the size of the right .<br>I’ll use ‘|’ to represent a cut, and (number | number) to represent a cut made through a number in this article.</p>
<p>for example , [1 2 3],the cut is like [1 (2|2) 3].the median = (2+2)/2.0 = 2.</p>
<p>now we use ‘L’ to represent the number in the left of the cut ,’R’ to represent the number in the right.</p>
<p>we can found that</p>
<p>N        Index of L / R<br>1               0 / 0<br>2               0 / 1<br>3               1 / 1<br>4               1 / 2<br>5               2 / 2<br>6               2 / 3<br>7               3 / 3<br>8               3 / 4</p>
<p>It is not hard to conclude that index of L = (N-1)/2, and R = N/2. the median = (L + R)/2 = (A[(N-1)/2] + A[N/2])/2</p>
<p>To get ready for the two array situation,we add a few empty number (represented as ‘#’) in between numbers. and use ‘positions’ to represented the position of that .</p>
<p>[1 2] -&gt; [# 1 # 2 #] (N=2)<br>position  0 1 2 3 4  (N_Position = 5)</p>
<p>[3 4] -&gt; [# 3 # 4 #] (N=2)<br>position  0 1 2 3 4  (N_Position = 5)</p>
<p>there are always 2*N+1 ‘positions’ of which array length is N. Therefore, the middle cut should be made on the Nth position (0-based). index(L) = (CutPosition-1)/2, index(R) = (CutPosition)/2.</p>
<p>notice that, when we cut the two arrays there are 2N1+2N2+2 positions,so,each side of the cut should be N1+N2 positions, the two position lefted is the cut . so when A2’s cut is at C2 = K , than A1’s cut should be C1 = N1 + N2 -K,for example ,C2 = 2, 那么 C1 = 2 + 2 - C2 = 2.</p>
<p>[# 1 | 2 #]<br>[# 3 | 4 #]</p>
<p>now we have two L and two R.</p>
<p>L1 = A1[(C1-1)/2]; R1 = A1[C1/2];<br>L2 = A2[(C2-1)/2]; R2 = A2[C2/2];</p>
<p>L1 = A1[(2-1)/2] = A1[0] = 1; R1 = A1[2/2] = A1[1] = 2;<br>L2 = A2[(2-1)/2] = A2[0] = 3; R2 = A1[2/2] = A1[1] = 4;</p>
<p>How can we figure out this cut is the cut we want ?<br>the numbers in left side must be smaller than the numbers in right side .<br>Because A1 and A2 is sorted , L1 &lt;= R1  &amp;&amp; L2 &lt;= R2.so we only need to confirm that L1 &lt;= R2 and L2 &lt;= R1.</p>
<p>Now we can use binary search to find out the result.</p>
<p>If L1 &gt; R1, it means there are too many large numbers on the left half of A1, then we must move C1 to the left at the same time move C2 to the right;<br>If L2 &gt; R1, then there are too many large numbers on the left half of A2, and we must move C2 to the left , and move C1 to the right .<br>Otherwise, make it opposite.</p>
<p>After we find the cut, the medium can be computed as (max(L1, L2) + min(R1, R2)) / 2;</p>
<ol>
<li>since C1 and C2 can be mutually determined from each other, we might as well select the shorter array (say A2) and only move C2 around, and calculate C1 accordingly. That way we can achieve a run-time complexity of O(log(min(N1, N2)))</li>
<li>The only edge case is when a cut falls on the 0th(first) or the 2Nth(last) position. For instance, if C2 = 2N2, then R2 = A2[2*N2/2] = A2[N2], which exceeds the boundary of the array. To solve this problem, we can imagine that both A1 and A2 actually have two extra elements, INT_MAX at A[-1] and INT_MAX at A[N].</li>
</ol>
<p>Time complexity ： O(log(min(m,n))) 。m,n is the length of the two arrays.<br>space complexity ： O(1) .</p>
<h2><span id="approach-3">Approach 3：</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> B[])</span> </span>&#123;</div><div class="line">       <span class="keyword">int</span> n = A.length;</div><div class="line">       <span class="keyword">int</span> m = B.length;</div><div class="line">       <span class="comment">// the following call is to make sure len(A) &lt;= len(B).</span></div><div class="line">       <span class="comment">// yes, it calls itself, but at most once, shouldn't be</span></div><div class="line">       <span class="comment">// consider a recursive solution</span></div><div class="line">       <span class="keyword">if</span> (n &gt; m)</div><div class="line">           <span class="keyword">return</span> findMedianSortedArrays(B, A);</div><div class="line"></div><div class="line">       <span class="comment">// now, do binary search</span></div><div class="line">       <span class="keyword">int</span> k = (n + m - <span class="number">1</span>) / <span class="number">2</span>;</div><div class="line">       <span class="keyword">int</span> l = <span class="number">0</span>, r = Math.min(k, n); <span class="comment">// r is n, NOT n-1, this is important!!</span></div><div class="line">       <span class="keyword">while</span> (l &lt; r) &#123;</div><div class="line">           <span class="keyword">int</span> midA = (l + r) / <span class="number">2</span>;</div><div class="line">           <span class="keyword">int</span> midB = k - midA;</div><div class="line">           <span class="keyword">if</span> (A[midA] &lt; B[midB])</div><div class="line">               l = midA + <span class="number">1</span>;</div><div class="line">           <span class="keyword">else</span></div><div class="line">               r = midA;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="comment">// after binary search, we almost get the median because it must be between</span></div><div class="line">       <span class="comment">// these 4 numbers: A[l-1], A[l], B[k-l], and B[k-l+1]</span></div><div class="line"></div><div class="line">       <span class="comment">// if (n+m) is odd, the median is the larger one between A[l-1] and B[k-l].</span></div><div class="line">       <span class="comment">// and there are some corner cases we need to take care of.</span></div><div class="line">       <span class="keyword">int</span> a = Math.max(l &gt; <span class="number">0</span> ? A[l - <span class="number">1</span>] : Integer.MIN_VALUE, k - l &gt;= <span class="number">0</span> ? B[k - l] : Integer.MIN_VALUE);</div><div class="line">       <span class="keyword">if</span> (((n + m) &amp; <span class="number">1</span>) == <span class="number">1</span>)</div><div class="line">           <span class="keyword">return</span> (<span class="keyword">double</span>) a;</div><div class="line"></div><div class="line">       <span class="comment">// if (n+m) is even, the median can be calculated by</span></div><div class="line">       <span class="comment">//      median = (max(A[l-1], B[k-l]) + min(A[l], B[k-l+1]) / 2.0</span></div><div class="line">       <span class="comment">// also, there are some corner cases to take care of.</span></div><div class="line">       <span class="keyword">int</span> b = Math.min(l &lt; n ? A[l] : Integer.MAX_VALUE, k - l + <span class="number">1</span> &lt; m ? B[k - l + <span class="number">1</span>] : Integer.MAX_VALUE);</div><div class="line">       <span class="keyword">return</span> (a + b) / <span class="number">2.0</span>;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/3SuccessResult.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong><br>this method’s principle is same as the Approach 2.</p>
<p>Time complexity ： O(log(min(m,n))) 。m,n is the length of the two arrays.<br>space complexity ： O(1) .</p>
<h2><span id="approach-4">Approach 4:</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</div><div class="line">              <span class="keyword">int</span> m = A.length, n = B.length;</div><div class="line">              <span class="keyword">int</span> l = (m + n + <span class="number">1</span>) / <span class="number">2</span>;<span class="comment">//position of l element (not the index)</span></div><div class="line">              <span class="keyword">int</span> r = (m + n + <span class="number">2</span>) / <span class="number">2</span>;<span class="comment">//position of r element (not the index)</span></div><div class="line">              <span class="keyword">return</span> (getkth(A, <span class="number">0</span>, B, <span class="number">0</span>, l) + getkth(A, <span class="number">0</span>, B, <span class="number">0</span>, r)) / <span class="number">2.0</span>;</div><div class="line">          &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getkth</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> aStart, <span class="keyword">int</span>[] B, <span class="keyword">int</span> bStart, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">          <span class="comment">//when the start position is bigger than A.length -1 ,means the median doesn't in the A.</span></div><div class="line">          <span class="keyword">if</span> (aStart &gt; A.length - <span class="number">1</span>) <span class="keyword">return</span> B[bStart + k - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (bStart &gt; B.length - <span class="number">1</span>) <span class="keyword">return</span> A[aStart + k - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (k == <span class="number">1</span>) <span class="keyword">return</span> Math.min(A[aStart], B[bStart]);</div><div class="line"></div><div class="line">          <span class="keyword">int</span> aMid = Integer.MAX_VALUE, bMid = Integer.MAX_VALUE;</div><div class="line">          <span class="keyword">if</span> (aStart + k/<span class="number">2</span> - <span class="number">1</span> &lt; A.length) aMid = A[aStart + k/<span class="number">2</span> - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (bStart + k/<span class="number">2</span> - <span class="number">1</span> &lt; B.length) bMid = B[bStart + k/<span class="number">2</span> - <span class="number">1</span>];</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (aMid &lt; bMid)</div><div class="line">              <span class="keyword">return</span> getkth(A, aStart + k/<span class="number">2</span>, B, bStart, k - k/<span class="number">2</span>);<span class="comment">// Check: aRight + bLeft</span></div><div class="line">          <span class="keyword">else</span></div><div class="line">              <span class="keyword">return</span> getkth(A, aStart, B, bStart + k/<span class="number">2</span>, k - k/<span class="number">2</span>);<span class="comment">// Check: bRight + aLeft</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/4SuccessResult.png?raw=true" alt="efficiency"></p>
<p><strong>Analysis</strong><br>this method is like that, compare the two arrays’s median recursively, and every time ignore a half of the two arrays. if A’s median is smaller than B’s median , then we keep A’s right and B’s left.Otherwise opposite. last ,we will get L and R , use (L+R)/2.0 to get the median.notice that L and R is not index, isn’t start from 0 . when the numbers of the sum of two array’s size is odd-lengthed L is the same as R,Otherwise is different.</p>
<p>Time complexity ： O(log(m + n))<br>Space complexity ： O(1)</p>
<p>If you have any suggestions to make the logic and implementation more better , or you have some advice on my description. Please let me know!</p>
<h2><span id="about-me">About Me</span></h2><p>My blog <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>My Github <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-en/" data-id="cjq0wmyqw003huabj68z2z8ab" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <article id="post-4-Median-of-Two-Sorted-Arrays/Record-cn" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
	
		<a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/" itemprop="url">
            <img src="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/title.jpg" class="article-banner" />
        </a>
	



        
        
        <header class="article-header">
            
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/">LeetCode 4. Median of Two Sorted Arrays [Chinese ver]</a>
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/">
            <time datetime="2018-08-14T16:00:00.000Z" itemprop="datePublished">2018-08-15</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Algorithm/">Algorithm</a>, <a class="tag-link" href="/tags/Chinese/">Chinese</a>, <a class="tag-link" href="/tags/LeetCode/">LeetCode</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><p>[Chinese ver]</p>
<h1><span id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays</span></h1><p>这里有两个有序数组nums1和nums2，他们各自的大小为m和n.<br>找到这两个数组的中间值，总的时间复杂度应该为O(log (m+n)).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example 1:</div><div class="line">nums1 = [1, 3]</div><div class="line">nums2 = [2]</div><div class="line"> 中间值是 2.0</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example 2:</div><div class="line">nums1 = [1, 2]</div><div class="line">nums2 = [3, 4]</div><div class="line">中间值是 (2 + 3)/2 = 2.5</div></pre></td></tr></table></figure>
<p>
                
                
                
            
    </div>
    <div class="article-more-link">
        <a href="/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/#more">Read More</a>
    </div>
    
        <!--<div class="article-entry" itemprop="articleBody">-->
            <!---->
            <!---->
            <!--<p>[Chinese ver]</p>
<h1><span id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays</span></h1><p>这里有两个有序数组nums1和nums2，他们各自的大小为m和n.<br>找到这两个数组的中间值，总的时间复杂度应该为O(log (m+n)).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example 1:</div><div class="line">nums1 = [1, 3]</div><div class="line">nums2 = [2]</div><div class="line"> 中间值是 2.0</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example 2:</div><div class="line">nums1 = [1, 2]</div><div class="line">nums2 = [3, 4]</div><div class="line">中间值是 (2 + 3)/2 = 2.5</div></pre></td></tr></table></figure>
<h2><span id="方法一">方法一：</span></h2><p>首先尝试了一种比较笨的方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">        <span class="comment">//需要几个数值</span></div><div class="line">        <span class="keyword">int</span> needNum = <span class="number">0</span>;</div><div class="line">        <span class="comment">//数值位置</span></div><div class="line">        <span class="keyword">int</span> needIndex = <span class="number">0</span>;</div><div class="line">        <span class="comment">//中间值</span></div><div class="line">        <span class="keyword">double</span> median = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> big = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> stand = <span class="number">0</span>;</div><div class="line">        <span class="comment">//合成的数组</span></div><div class="line">        <span class="keyword">int</span>[] insertnum ;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> m = nums1.length;</div><div class="line">        <span class="keyword">int</span> n = nums2.length;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">0</span>)&#123;</div><div class="line">            needNum = <span class="number">2</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>-<span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            needNum=<span class="number">1</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        insertnum = <span class="keyword">new</span> <span class="keyword">int</span>[m+n];</div><div class="line">        <span class="comment">//nums1的下标</span></div><div class="line">        <span class="keyword">int</span> j =<span class="number">0</span>;</div><div class="line">        <span class="comment">//nums2的下标</span></div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;m+n;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(k==n)&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j==m)&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[j]&gt;nums2[k])&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(needNum == <span class="number">1</span>)&#123;</div><div class="line">            median = Double.valueOf(insertnum[needIndex]);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            median = Double.valueOf(insertnum[needIndex]+insertnum[needIndex+<span class="number">1</span>]) /<span class="number">2.0</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> median;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>顺便提一下，这个方法经常无法通过，应该是时间复杂度过高的原因吧。</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/1SuccessResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法的原理很简单，首先将两个数组个数和是奇数和偶数的情况所需的取值个数以及中间值计算方法得出。然后将两个数组按照从小到大的顺序合并成一个数组，最后根据前面得到的中间数的计算方法得出中间值。<br>时间复杂度 ： O(m+n) 。<br>空间复杂度 ： O(m+n) .</p>
<p>这个方法可以在做一个优化，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> needNum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> needIndex = <span class="number">0</span>;</div><div class="line">        <span class="keyword">double</span> median = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> big = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> stand = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span>[] insertnum ;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> m = nums1.length;</div><div class="line">        <span class="keyword">int</span> n = nums2.length;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">0</span>)&#123;</div><div class="line">            needNum = <span class="number">2</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>-<span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            needNum=<span class="number">1</span>;</div><div class="line">            needIndex = (m+n)/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        insertnum = <span class="keyword">new</span> <span class="keyword">int</span>[(m+n)/<span class="number">2</span>+<span class="number">1</span>];</div><div class="line">        <span class="keyword">int</span> j =<span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;m+n;i++)&#123;</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(k==n)&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j==m)&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[j]&gt;nums2[k])&#123;</div><div class="line">                insertnum[i] = nums2[k];</div><div class="line">                k++;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                insertnum[i] = nums1[j];</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">             <span class="keyword">if</span> (i &gt;= needIndex )&#123;</div><div class="line">                <span class="keyword">if</span> (needNum == <span class="number">1</span>)&#123;</div><div class="line">                    median = Double.valueOf(insertnum[needIndex]);</div><div class="line">                    <span class="keyword">return</span> median;</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                     <span class="keyword">if</span> (i == needIndex+<span class="number">1</span>)&#123;</div><div class="line">                         median = Double.valueOf(insertnum[needIndex]+insertnum[needIndex+<span class="number">1</span>]) /<span class="number">2.0</span>;</div><div class="line">                         <span class="keyword">return</span> median;</div><div class="line">                     &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    <span class="keyword">return</span> median;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>分析</strong><br>这个方法优化的地方就是通过事先得到中间值的位置，在得到该位置的数值之后就不继续往下走了。</p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/1OptimizeSuccessResult.png?raw=true" alt="效率"></p>
<h2><span id="方法二">方法二：</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</div><div class="line">           <span class="keyword">int</span> N1 = nums1.length;</div><div class="line">           <span class="keyword">int</span> N2 = nums2.length;</div><div class="line">           <span class="keyword">if</span> (N1 &lt; N2)</div><div class="line">               <span class="keyword">return</span> findMedianSortedArrays(nums2, nums1);    <span class="comment">// Make sure A2 is the shorter one.</span></div><div class="line"></div><div class="line">           <span class="keyword">if</span> (N2 == <span class="number">0</span>)</div><div class="line">               <span class="keyword">return</span> ((<span class="keyword">double</span>) nums1[(N1 - <span class="number">1</span>) / <span class="number">2</span>] + (<span class="keyword">double</span>) nums1[N1 / <span class="number">2</span>]) / <span class="number">2</span>;  <span class="comment">// If A2 is empty</span></div><div class="line"></div><div class="line">           <span class="keyword">int</span> lo = <span class="number">0</span>, hi = N2 * <span class="number">2</span>;</div><div class="line">           <span class="keyword">while</span> (lo &lt;= hi) &#123;</div><div class="line">               <span class="keyword">int</span> mid2 = (lo + hi) / <span class="number">2</span>;   <span class="comment">// Try Cut 2</span></div><div class="line">               <span class="keyword">int</span> mid1 = N1 + N2 - mid2;  <span class="comment">// Calculate Cut 1 accordingly</span></div><div class="line"></div><div class="line">               <span class="keyword">double</span> L1 = (mid1 == <span class="number">0</span>) ? Integer.MIN_VALUE : nums1[(mid1 - <span class="number">1</span>) / <span class="number">2</span>];    <span class="comment">// Get L1, R1, L2, R2 respectively</span></div><div class="line">               <span class="keyword">double</span> L2 = (mid2 == <span class="number">0</span>) ? Integer.MIN_VALUE : nums2[(mid2 - <span class="number">1</span>) / <span class="number">2</span>];</div><div class="line">               <span class="keyword">double</span> R1 = (mid1 == N1 * <span class="number">2</span>) ? Integer.MAX_VALUE : nums1[(mid1) / <span class="number">2</span>];</div><div class="line">               <span class="keyword">double</span> R2 = (mid2 == N2 * <span class="number">2</span>) ? Integer.MAX_VALUE : nums2[(mid2) / <span class="number">2</span>];</div><div class="line"></div><div class="line">               <span class="keyword">if</span> (L1 &gt; R2)</div><div class="line">                   lo = mid2 + <span class="number">1</span>;        <span class="comment">// A1's lower half is too big; need to move C1 left (C2 right)</span></div><div class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (L2 &gt; R1)</div><div class="line">                   hi = mid2 - <span class="number">1</span>;    <span class="comment">// A2's lower half too big; need to move C2 left.</span></div><div class="line">               <span class="keyword">else</span></div><div class="line">                   <span class="keyword">return</span> ((L1 &gt; L2 ? L1 : L2) + (R1 &gt; R2 ? R2 : R1)) / <span class="number">2</span>;    <span class="comment">// Otherwise, that's the right cut.</span></div><div class="line">           &#125;</div><div class="line">           <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/2SeccessResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong></p>
<p>这个问题比较困难，很多方法都是把他分成两种情况，奇数个和偶数个。实际上这样有点复杂，我们可以把这两个情况合并成一种情况。</p>
<p>首先，我们来重新定义一下’median’的含义：</p>
<p>“如果我们把一个有序的array分成两个等长的部分，那么median就是比较小的那一部分的最大值和比较大的那一部分的最小值的平均值。即划分线两边的数。”</p>
<p>比如[1,2],我们的分割线就应该在1，2之间，[1 | 2],结果是(1 + 2)/2.0 = 1.5。<br>同理，如果是两个有序的数组，那么我们只需要保证两个数组划分线右侧的数都大于左侧的数，并且两个数组左侧数字个数的和等于右侧数字个数的和。</p>
<p>我们使用‘|’来代表分割线，(n|n)来表示分割线正好在某个数字n上。<br>比如[1 2 3],得到的分割后的数组像这样[1 (2|2) 3],z中间值就是(2+2)/2.0 = 2</p>
<p>我们使用L代表分割线左边的数，R代表分割线右边的数。</p>
<p>可以观察到左边的数和右边的数有这样的规律。</p>
<p>N        Index of L / R<br>1               0 / 0<br>2               0 / 1<br>3               1 / 1<br>4               1 / 2<br>5               2 / 2<br>6               2 / 3<br>7               3 / 3<br>8               3 / 4</p>
<p>可以得到 L = (N-1)/2,  R = N/2. 中间值为(L + R)/2 = (A[(N-1)/2] + A[N/2])/2</p>
<p>为了更方便的计算两个数组的情况，我们添加一些空位在数字之间。用’#’代表，用’position’来表示增加空格后的位置信息。</p>
<p>[1 2] -&gt; [# 1 # 2 #] (N=2)<br>position  0 1 2 3 4  (N_Position = 5)</p>
<p>[3 4] -&gt; [# 3 # 4 #] (N=2)<br>position  0 1 2 3 4  (N_Position = 5)</p>
<p>可以看出N_Position = 2N+1.所以分割线是在N，index(L) = (CutPosition-1)/2, index(R) = (CutPosition)/2.</p>
<p>当我们分割这两个数组的时候要注意，总共有2N1+2N2+2的位置，所以，分割线的每一边都要有N1+N2个位置，剩下的2个就是切线的位置，所以当我们A2分割线在 C2 = K  , 那么A1的分割线就必须要在C1 = N1 + N2 - k. 比如,  C2 = 2, 那么 C1 = 2 + 2 - C2 = 2.</p>
<p>[# 1 | 2 #]<br>[# 3 | 4 #]<br>现在我们有了两个L和两个R。<br>L1 = A1[(C1-1)/2]; R1 = A1[C1/2];<br>L2 = A2[(C2-1)/2]; R2 = A2[C2/2];<br>即<br>    L1 = A1[(2-1)/2] = A1[0] = 1; R1 = A1[2/2] = A1[1] = 2;<br>    L2 = A2[(2-1)/2] = A2[0] = 3; R2 = A1[2/2] = A1[1] = 4;</p>
<p>那么我们要怎么判断这个分割线是不是符合规则的呢？我们只要左边的数字都小于右边的数字。首先这两个数组都是有序的，所以L1,L2是左半边数组里最大的数，R1,R2是右半边数组里最小的数，L1&lt;=R1.L2&lt;=R2.<br>所以我们只要判断L1&lt;=R2,L2&lt;=R1就可以了。</p>
<p>现在我们用简单的二分法查找就可以得到答案了。</p>
<p>如果L1&gt;R2,代表A1左边有过多较大的数字，我们必须把C1往左移，同时需要把C2往右移。<br>如果L2&gt;R1,代表A2左边有过多较大的数字，我们必须把C2往左移，同时需要把C1往右移。<br>反之则相反。</p>
<p>当我们找到正确的分割线位置的时候，中间值  = (max(L1, L2) + min(R1, R2)) / 2。</p>
<p>1.因为C1和C2可以根据彼此的值互相推断，我们可以使用较短的数组(设为A2)并且只移动C2，然后计算出C1。这样我们的时间复杂度就是O(log(min(N1, N2)))</p>
<p>2.只有在极限的条件下分割线会在0,或者2N的index。比如，C2=2N2,R2 = A2[2*N2/2] = A2[N2].这种情况下他有一边是没有数值的，我们可以把它当成是极大或者极小，L = INT_MIN ，R = INT_MAX.</p>
<p>时间复杂度 ： O(log(min(m,n))) 。m,n是两个数组的长度。<br>空间复杂度 ： O(1) .</p>
<h2><span id="方法三">方法三：</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> B[])</span> </span>&#123;</div><div class="line">       <span class="keyword">int</span> n = A.length;</div><div class="line">       <span class="keyword">int</span> m = B.length;</div><div class="line">       <span class="comment">// the following call is to make sure len(A) &lt;= len(B).</span></div><div class="line">       <span class="comment">// yes, it calls itself, but at most once, shouldn't be</span></div><div class="line">       <span class="comment">// consider a recursive solution</span></div><div class="line">       <span class="keyword">if</span> (n &gt; m)</div><div class="line">           <span class="keyword">return</span> findMedianSortedArrays(B, A);</div><div class="line"></div><div class="line">       <span class="comment">// now, do binary search</span></div><div class="line">       <span class="keyword">int</span> k = (n + m - <span class="number">1</span>) / <span class="number">2</span>;</div><div class="line">       <span class="keyword">int</span> l = <span class="number">0</span>, r = Math.min(k, n); <span class="comment">// r is n, NOT n-1, this is important!!</span></div><div class="line">       <span class="keyword">while</span> (l &lt; r) &#123;</div><div class="line">           <span class="keyword">int</span> midA = (l + r) / <span class="number">2</span>;</div><div class="line">           <span class="keyword">int</span> midB = k - midA;</div><div class="line">           <span class="keyword">if</span> (A[midA] &lt; B[midB])</div><div class="line">               l = midA + <span class="number">1</span>;</div><div class="line">           <span class="keyword">else</span></div><div class="line">               r = midA;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="comment">// after binary search, we almost get the median because it must be between</span></div><div class="line">       <span class="comment">// these 4 numbers: A[l-1], A[l], B[k-l], and B[k-l+1]</span></div><div class="line"></div><div class="line">       <span class="comment">// if (n+m) is odd, the median is the larger one between A[l-1] and B[k-l].</span></div><div class="line">       <span class="comment">// and there are some corner cases we need to take care of.</span></div><div class="line">       <span class="keyword">int</span> a = Math.max(l &gt; <span class="number">0</span> ? A[l - <span class="number">1</span>] : Integer.MIN_VALUE, k - l &gt;= <span class="number">0</span> ? B[k - l] : Integer.MIN_VALUE);</div><div class="line">       <span class="keyword">if</span> (((n + m) &amp; <span class="number">1</span>) == <span class="number">1</span>)</div><div class="line">           <span class="keyword">return</span> (<span class="keyword">double</span>) a;</div><div class="line"></div><div class="line">       <span class="comment">// if (n+m) is even, the median can be calculated by</span></div><div class="line">       <span class="comment">//      median = (max(A[l-1], B[k-l]) + min(A[l], B[k-l+1]) / 2.0</span></div><div class="line">       <span class="comment">// also, there are some corner cases to take care of.</span></div><div class="line">       <span class="keyword">int</span> b = Math.min(l &lt; n ? A[l] : Integer.MAX_VALUE, k - l + <span class="number">1</span> &lt; m ? B[k - l + <span class="number">1</span>] : Integer.MAX_VALUE);</div><div class="line">       <span class="keyword">return</span> (a + b) / <span class="number">2.0</span>;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/3SuccessResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法的原理和上一个方法是大致相同的。<br>时间复杂度 ： O(log(min(m,n))) 。m,n是两个数组的长度。<br>空间复杂度 ： O(1) .</p>
<h2><span id="方法四">方法四：</span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</div><div class="line">              <span class="keyword">int</span> m = A.length, n = B.length;</div><div class="line">              <span class="keyword">int</span> l = (m + n + <span class="number">1</span>) / <span class="number">2</span>;<span class="comment">//position of l element (not the index)</span></div><div class="line">              <span class="keyword">int</span> r = (m + n + <span class="number">2</span>) / <span class="number">2</span>;<span class="comment">//position of r element (not the index)</span></div><div class="line">              <span class="keyword">return</span> (getkth(A, <span class="number">0</span>, B, <span class="number">0</span>, l) + getkth(A, <span class="number">0</span>, B, <span class="number">0</span>, r)) / <span class="number">2.0</span>;</div><div class="line">          &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getkth</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> aStart, <span class="keyword">int</span>[] B, <span class="keyword">int</span> bStart, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">          <span class="comment">//when the start position is bigger than A.length -1 ,means the median doesn't in the A.</span></div><div class="line">          <span class="keyword">if</span> (aStart &gt; A.length - <span class="number">1</span>) <span class="keyword">return</span> B[bStart + k - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (bStart &gt; B.length - <span class="number">1</span>) <span class="keyword">return</span> A[aStart + k - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (k == <span class="number">1</span>) <span class="keyword">return</span> Math.min(A[aStart], B[bStart]);</div><div class="line"></div><div class="line">          <span class="keyword">int</span> aMid = Integer.MAX_VALUE, bMid = Integer.MAX_VALUE;</div><div class="line">          <span class="keyword">if</span> (aStart + k/<span class="number">2</span> - <span class="number">1</span> &lt; A.length) aMid = A[aStart + k/<span class="number">2</span> - <span class="number">1</span>];</div><div class="line">          <span class="keyword">if</span> (bStart + k/<span class="number">2</span> - <span class="number">1</span> &lt; B.length) bMid = B[bStart + k/<span class="number">2</span> - <span class="number">1</span>];</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (aMid &lt; bMid)</div><div class="line">              <span class="keyword">return</span> getkth(A, aStart + k/<span class="number">2</span>, B, bStart, k - k/<span class="number">2</span>);<span class="comment">// Check: aRight + bLeft</span></div><div class="line">          <span class="keyword">else</span></div><div class="line">              <span class="keyword">return</span> getkth(A, aStart, B, bStart + k/<span class="number">2</span>, k - k/<span class="number">2</span>);<span class="comment">// Check: bRight + aLeft</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/4.%20Median%20of%20Two%20Sorted%20Arrays/Images/4SuccessResult.png?raw=true" alt="效率"></p>
<p><strong>分析</strong><br>这个方法的原理是这样的，从两个数组中间值开始通过递归对比，每次排除一半的选项。如果A的中间值小于B的中间值则保留a的右侧数字和b的左侧数字。反之相反。然后得到l和r位置的数字,再相加除以2即可。需要注意的是这里的l和r不是index，不是从零开始的。如果两个数组的长度的和是奇数的话l和r是相同的，偶数则不同。<br>时间复杂度 ： O(log(m + n))<br>空间复杂度 ： O(1)</p>
<p>如果你有更好的办法或者对我这里的描述有其他看法，请联系我。谢谢</p>
<h2><span id="about-me">About Me</span></h2><p>我的博客 <a href="http://leonchen1024.com/" target="_blank" rel="external">leonchen1024.com</a></p>
<p>我的 GitHub <a href="https://github.com/LeonChen1024" target="_blank" rel="external">https://github.com/LeonChen1024</a></p>
<p>微信公众号 </p>
<p><img src="https://github.com/LeonChen1024/LeetCodeRecord/blob/master/Images/CooderQRcodem.jpg?raw=true" alt="wechat"></p>
-->
            <!---->
        <!--</div>-->
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/08/15/4-Median-of-Two-Sorted-Arrays/Record-cn/" data-id="cjq0wmyqs003cuabj51jlhpij" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>







    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/titleThumb.jpg)" alt="贪婪算法" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Android/">Android</a></p>
                            <p class="item-title"><a href="/2018/12/23/S1ep1-The-macgic-of-LRU-Cache/" class="title">贪婪算法</a></p>
                            <p class="item-date"><time datetime="2018-12-22T16:00:00.000Z" itemprop="datePublished">2018-12-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/03/Greedy-Algorithm/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/12/03/Greedy-Algorithm/titleThumb.jpg)" alt="贪婪算法" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/12/03/Greedy-Algorithm/" class="title">贪婪算法</a></p>
                            <p class="item-date"><time datetime="2018-12-02T16:00:00.000Z" itemprop="datePublished">2018-12-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/02/7-Reverse-Integer/Record-en/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/12/02/7-Reverse-Integer/Record-cn/titleThumb.jpg)" alt="LeetCode 7. Reverse Integer" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/English/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/12/02/7-Reverse-Integer/Record-en/" class="title">LeetCode 7. Reverse Integer</a></p>
                            <p class="item-date"><time datetime="2018-12-01T16:00:00.000Z" itemprop="datePublished">2018-12-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/02/7-Reverse-Integer/Record-cn/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/12/02/7-Reverse-Integer/Record-cn/titleThumb.jpg)" alt="LeetCode 7. 数字反转" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/12/02/7-Reverse-Integer/Record-cn/" class="title">LeetCode 7. 数字反转</a></p>
                            <p class="item-date"><time datetime="2018-12-01T16:00:00.000Z" itemprop="datePublished">2018-12-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/" class="thumbnail">
    
    
        <span style="background-image:url(/2018/09/12/6-ZigZag-Conversion/Record-cn/titleThumb.jpg)" alt="LeetCode 6. 锯齿形转换" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Chinese/">Chinese</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Chinese/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/09/12/6-ZigZag-Conversion/Record-cn/" class="title">LeetCode 6. 锯齿形转换</a></p>
                            <p class="item-date"><time datetime="2018-09-11T16:00:00.000Z" itemprop="datePublished">2018-09-12</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/">Chinese</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Algorithm/">Algorithm</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Algorithm/Common/">Common</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Algorithm/LeetCode/">LeetCode</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/">Android</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/Algorithm/">Algorithm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/Error/">Error</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/UI/">UI</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/UI/Custom-View/">Custom View</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/版本差异/">版本差异</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Android/版本管理/">版本管理</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Java/">Java</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Chinese/Java/Data-Structure/">Data Structure</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/English/Algorithm/">Algorithm</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/English/Algorithm/LeetCode/">LeetCode</a><span class="category-list-count">7</span></li></ul></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chinese/">Chinese</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Custom-View/">Custom View</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/">English</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/">Error</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Optimize/">Optimize</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/">UI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本差异/">版本差异</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本管理/">版本管理</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Algorithm/" style="font-size: 20px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 13.33px;">Android</a> <a href="/tags/Chinese/" style="font-size: 18.33px;">Chinese</a> <a href="/tags/Custom-View/" style="font-size: 10px;">Custom View</a> <a href="/tags/Data-Structure/" style="font-size: 10px;">Data Structure</a> <a href="/tags/English/" style="font-size: 15px;">English</a> <a href="/tags/Error/" style="font-size: 10px;">Error</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/LeetCode/" style="font-size: 16.67px;">LeetCode</a> <a href="/tags/Optimize/" style="font-size: 10px;">Optimize</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/版本差异/" style="font-size: 11.67px;">版本差异</a> <a href="/tags/版本管理/" style="font-size: 10px;">版本管理</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <!-- ad start -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9191109011370892",
    enable_page_level_ads: true
  });
</script>
        <!-- ad end -->
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2018 LeonChen<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. 
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>